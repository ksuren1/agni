<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:g="http://www.jboss.org/drools/flow/gpd" xmlns:tns="http://www.jboss.org/drools" xmlns="http://www.jboss.org/drools" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd http://www.jboss.org/drools drools.xsd http://www.bpsim.org/schemas/1.0 bpsim.xsd" id="Definition" expressionLanguage="http://www.mvel.org/2.0" targetNamespace="http://www.jboss.org/drools" typeLanguage="http://www.java.com/javaTypes">
  <bpmn2:itemDefinition id="_contextEntityItem" structureRef="com.thirdpillar.codify.loanpath.model.Request"/>
  <bpmn2:itemDefinition id="_nextFacilityStatusItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_customersEmailListItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_borrowerNameItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_borrowerFirstNameItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_teamItem" structureRef="com.thirdpillar.codify.loanpath.model.Team"/>
  <bpmn2:itemDefinition id="_bureauInputMapItem" structureRef="java.util.Map"/>
  <bpmn2:itemDefinition id="_callConsumerBureauItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_bureauSuccessItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_mcdForLargeLoanItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_isValidFicoScoreItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_moveToStatusItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_complianceSuccessItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_manualDecisionItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_requestCustomersItem" structureRef="java.util.List"/>
  <bpmn2:itemDefinition id="_customerRoleItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_custFirstNameItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_callProvisionItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_provisionCustomersMapItem" structureRef="java.util.Map"/>
  <bpmn2:itemDefinition id="_borrowersItem" structureRef="java.util.Set"/>
  <bpmn2:itemDefinition id="_coBorrowersItem" structureRef="java.util.Set"/>
  <bpmn2:itemDefinition id="_requestDecisionItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_decisionFromTaskItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_frozenReportsItem" structureRef="java.util.List"/>
  <bpmn2:itemDefinition id="_custNameItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_approvalEntityItem" structureRef="com.thirdpillar.codify.loanpath.model.Approval"/>
  <bpmn2:itemDefinition id="_emailRecipientItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_bureauReportItem" structureRef="com.thirdpillar.codify.loanpath.model.BureauReport"/>
  <bpmn2:itemDefinition id="_coborrowerNameItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_coborrowerFirstNameItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_taskActionItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_creFlowItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_writeupDocItem" structureRef="com.thirdpillar.codify.loanpath.model.Document"/>
  <bpmn2:itemDefinition id="_callCommercialBureauItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_consumerBureauInputMapItem" structureRef="java.util.Map"/>
  <bpmn2:itemDefinition id="_commercialBureauInputMapItem" structureRef="java.util.Map"/>
  <bpmn2:process id="RequestFlow" tns:version="1" tns:packageName="LP" tns:adHoc="false" name="RequestFlow" isExecutable="true" processType="Private">
    <bpmn2:extensionElements>
      <tns:import name="com.thirdpillar.codify.loanpath.model.Request"/>
      <tns:import name="com.thirdpillar.codify.loanpath.model.Team"/>
      <tns:import name="com.thirdpillar.codify.loanpath.model.Customer"/>
      <tns:import name="com.thirdpillar.codify.loanpath.model.AttributeChoice"/>
      <tns:import name="com.thirdpillar.codify.loanpath.model.Facility"/>
      <tns:import name="com.thirdpillar.codify.loanpath.model.BureauReport"/>
      <tns:import name="com.thirdpillar.codify.loanpath.model.Compliance"/>
      <tns:import name="com.thirdpillar.codify.loanpath.model.FacilityCustomerRole"/>
      <tns:import name="com.thirdpillar.codify.loanpath.model.User"/>
      <tns:import name="com.thirdpillar.codify.loanpath.model.Approval"/>
      <tns:import name="com.thirdpillar.codify.loanpath.model.ApprovalLevel"/>
      <tns:import name="com.thirdpillar.codify.loanpath.model.Approver"/>
      <tns:import name="com.thirdpillar.codify.loanpath.model.Document"/>
      <tns:import name="com.thirdpillar.codify.loanpath.model.DocumentGroup"/>
      <tns:import name="com.thirdpillar.foundation.service.LookupService"/>
      <tns:import name="com.thirdpillar.foundation.service.EntityService"/>
      <tns:import name="com.thirdpillar.foundation.service.Context"/>
      <tns:import name="com.thirdpillar.foundation.service.ContextHolder"/>
      <tns:import name="java.util.Set"/>
      <tns:import name="java.util.HashSet"/>
      <tns:import name="java.util.List"/>
      <tns:import name="java.util.ArrayList"/>
      <tns:import name="java.util.Date"/>
      <tns:import name="java.util.Map"/>
      <tns:import name="java.util.HashMap"/>
      <tns:import name="java.math.BigDecimal"/>
      <tns:import name="java.util.Calendar"/>
    </bpmn2:extensionElements>
    <bpmn2:property id="contextEntity" itemSubjectRef="_contextEntityItem"/>
    <bpmn2:property id="nextFacilityStatus" itemSubjectRef="_nextFacilityStatusItem"/>
    <bpmn2:property id="customersEmailList" itemSubjectRef="_customersEmailListItem"/>
    <bpmn2:property id="borrowerName" itemSubjectRef="_borrowerNameItem"/>
    <bpmn2:property id="borrowerFirstName" itemSubjectRef="_borrowerFirstNameItem"/>
    <bpmn2:property id="team" itemSubjectRef="_teamItem"/>
    <bpmn2:property id="bureauInputMap" itemSubjectRef="_bureauInputMapItem"/>
    <bpmn2:property id="callConsumerBureau" itemSubjectRef="_callConsumerBureauItem"/>
    <bpmn2:property id="bureauSuccess" itemSubjectRef="_bureauSuccessItem"/>
    <bpmn2:property id="mcdForLargeLoan" itemSubjectRef="_mcdForLargeLoanItem"/>
    <bpmn2:property id="isValidFicoScore" itemSubjectRef="_isValidFicoScoreItem"/>
    <bpmn2:property id="moveToStatus" itemSubjectRef="_moveToStatusItem"/>
    <bpmn2:property id="complianceSuccess" itemSubjectRef="_complianceSuccessItem"/>
    <bpmn2:property id="manualDecision" itemSubjectRef="_manualDecisionItem"/>
    <bpmn2:property id="requestCustomers" itemSubjectRef="_requestCustomersItem"/>
    <bpmn2:property id="customerRole" itemSubjectRef="_customerRoleItem"/>
    <bpmn2:property id="custFirstName" itemSubjectRef="_custFirstNameItem"/>
    <bpmn2:property id="callProvision" itemSubjectRef="_callProvisionItem"/>
    <bpmn2:property id="provisionCustomersMap" itemSubjectRef="_provisionCustomersMapItem"/>
    <bpmn2:property id="borrowers" itemSubjectRef="_borrowersItem"/>
    <bpmn2:property id="coBorrowers" itemSubjectRef="_coBorrowersItem"/>
    <bpmn2:property id="requestDecision" itemSubjectRef="_requestDecisionItem"/>
    <bpmn2:property id="decisionFromTask" itemSubjectRef="_decisionFromTaskItem"/>
    <bpmn2:property id="frozenReports" itemSubjectRef="_frozenReportsItem"/>
    <bpmn2:property id="custName" itemSubjectRef="_custNameItem"/>
    <bpmn2:property id="approvalEntity" itemSubjectRef="_approvalEntityItem"/>
    <bpmn2:property id="emailRecipient" itemSubjectRef="_emailRecipientItem"/>
    <bpmn2:property id="bureauReport" itemSubjectRef="_bureauReportItem"/>
    <bpmn2:property id="coborrowerName" itemSubjectRef="_coborrowerNameItem"/>
    <bpmn2:property id="coborrowerFirstName" itemSubjectRef="_coborrowerFirstNameItem"/>
    <bpmn2:property id="taskAction" itemSubjectRef="_taskActionItem"/>
    <bpmn2:property id="creFlow" itemSubjectRef="_creFlowItem"/>
    <bpmn2:property id="writeupDoc" itemSubjectRef="_writeupDocItem"/>
    <bpmn2:property id="callCommercialBureau" itemSubjectRef="_callCommercialBureauItem"/>
    <bpmn2:property id="consumerBureauInputMap" itemSubjectRef="_consumerBureauInputMapItem"/>
    <bpmn2:property id="commercialBureauInputMap" itemSubjectRef="_commercialBureauInputMapItem"/>
    <bpmn2:intermediateCatchEvent id="_5" name="LPSubmitForCredit">
      <bpmn2:outgoing>_5-_7</bpmn2:outgoing>
      <bpmn2:signalEventDefinition id="SignalEventDefinition_1" signalRef="LPSubmitForCredit"/>
    </bpmn2:intermediateCatchEvent>
    <bpmn2:callActivity id="_7" tns:waitForCompletion="true" tns:independent="false" name="Product Status to Pending" calledElement="UpdateProductStatus">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,&quot;FACILITY_STATUS_PENDING&quot;);</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_5-_7</bpmn2:incoming>
      <bpmn2:outgoing>_7-_178</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_2">
        <bpmn2:dataInput id="_7_facilityStatusInput" name="facilityStatus"/>
        <bpmn2:dataInput id="_7_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_2">
          <bpmn2:dataInputRefs>_7_facilityStatusInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_2"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_1">
        <bpmn2:sourceRef>nextFacilityStatus</bpmn2:sourceRef>
        <bpmn2:targetRef>_7_facilityStatusInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_2">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_7_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:intermediateCatchEvent id="_10" name="CreateRequest">
      <bpmn2:outgoing>_10-_46</bpmn2:outgoing>
      <bpmn2:signalEventDefinition id="SignalEventDefinition_2" signalRef="CreateRequest"/>
    </bpmn2:intermediateCatchEvent>
    <bpmn2:callActivity id="_12" tns:waitForCompletion="true" tns:independent="false" name="Product Status to Pending" calledElement="UpdateProductStatus">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,&quot;FACILITY_STATUS_PENDING&quot;);</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_46-_12</bpmn2:incoming>
      <bpmn2:outgoing>_12-_21</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_3">
        <bpmn2:dataInput id="_12_facilityStatusInput" name="facilityStatus"/>
        <bpmn2:dataInput id="_12_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_3">
          <bpmn2:dataInputRefs>_12_facilityStatusInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_12_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_3"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_3">
        <bpmn2:sourceRef>nextFacilityStatus</bpmn2:sourceRef>
        <bpmn2:targetRef>_12_facilityStatusInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_4">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_12_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:exclusiveGateway id="_21" name="Gateway" gatewayDirection="Converging">
      <bpmn2:incoming>_22-_21</bpmn2:incoming>
      <bpmn2:incoming>_12-_21</bpmn2:incoming>
      <bpmn2:outgoing>_21-_16</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:endEvent id="_20" name="End">
      <bpmn2:incoming>_19-_20</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:intermediateCatchEvent id="_23" name="Signal">
      <bpmn2:outgoing>_23-_24</bpmn2:outgoing>
      <bpmn2:signalEventDefinition id="SignalEventDefinition_3" signalRef="OpenRequest"/>
    </bpmn2:intermediateCatchEvent>
    <bpmn2:intermediateCatchEvent id="_22" name="ReSend Email">
      <bpmn2:outgoing>_22-_21</bpmn2:outgoing>
      <bpmn2:signalEventDefinition id="SignalEventDefinition_4" signalRef="ReSendEmail"/>
    </bpmn2:intermediateCatchEvent>
    <bpmn2:callActivity id="_25" tns:waitForCompletion="true" tns:independent="false" name="UpdateRequestToSFDC" calledElement="UpdateRequestToSFDC">
      <bpmn2:incoming>_26-_25</bpmn2:incoming>
      <bpmn2:outgoing>_25-_27</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_7">
        <bpmn2:dataInput id="_25_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_7">
          <bpmn2:dataInputRefs>_25_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_7"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_14">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_25_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:task id="_24" tns:taskName="StatusUpdate" name="Pending - Application Opened">
      <bpmn2:incoming>_23-_24</bpmn2:incoming>
      <bpmn2:outgoing>_24-_26</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_8">
        <bpmn2:dataInput id="_24_entityInput" name="entity"/>
        <bpmn2:dataInput id="_24_nextStatusKeyInput" name="nextStatusKey"/>
        <bpmn2:inputSet id="InputSet_8">
          <bpmn2:dataInputRefs>_24_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_24_nextStatusKeyInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_8"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_15">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_24_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_16">
        <bpmn2:targetRef>_24_nextStatusKeyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_6">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_11">REQUEST_STATUS_PENDING_APPLICATION_OPENED</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_12">_24_nextStatusKeyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:endEvent id="_27" name="End">
      <bpmn2:incoming>_25-_27</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:task id="_26" tns:taskName="SaveEntity" name="Save Request">
      <bpmn2:incoming>_24-_26</bpmn2:incoming>
      <bpmn2:outgoing>_26-_25</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_9">
        <bpmn2:dataInput id="_26_entityInput" name="entity"/>
        <bpmn2:inputSet id="InputSet_9">
          <bpmn2:dataInputRefs>_26_entityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_9"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_17">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_26_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:intermediateCatchEvent id="_28" name="SubmitForCredit">
      <bpmn2:outgoing>_28-_30</bpmn2:outgoing>
      <bpmn2:signalEventDefinition id="SignalEventDefinition_5" signalRef="SubmitForCredit"/>
    </bpmn2:intermediateCatchEvent>
    <bpmn2:exclusiveGateway id="_31" name="Credit Submit Gateway" gatewayDirection="Converging">
      <bpmn2:incoming>_30-_31</bpmn2:incoming>
      <bpmn2:incoming>_69-_31</bpmn2:incoming>
      <bpmn2:incoming>_178-_31</bpmn2:incoming>
      <bpmn2:outgoing>_31-_32</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:scriptTask id="_30" name="Clear Portal Access Key" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_28-_30</bpmn2:incoming>
      <bpmn2:outgoing>_30-_31</bpmn2:outgoing>
      <bpmn2:script>//clearing portalAccessKey
Request request=(Request)context.getVariable(&quot;contextEntity&quot;);
request.setPortalAccessKey(null);</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:exclusiveGateway id="_35" name="Gateway" gatewayDirection="Converging">
      <bpmn2:incoming>_190-_35</bpmn2:incoming>
      <bpmn2:incoming>_192-_35</bpmn2:incoming>
      <bpmn2:outgoing>_35-_147</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:task id="_32" tns:taskName="BusinessOperationTask" name="DeDupProcess">
      <bpmn2:incoming>_31-_32</bpmn2:incoming>
      <bpmn2:outgoing>_32-_33</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_11">
        <bpmn2:dataInput id="_32_entityInput" name="entity"/>
        <bpmn2:dataInput id="_32_businessOperationNameInput" name="businessOperationName"/>
        <bpmn2:inputSet id="InputSet_11">
          <bpmn2:dataInputRefs>_32_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_32_businessOperationNameInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_11"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_21">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_32_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_22">
        <bpmn2:targetRef>_32_businessOperationNameInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_8">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_15">DeDupProcess</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_16">_32_businessOperationNameInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:scriptTask id="_33" name="Check For Bureau Integration Call" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_32-_33</bpmn2:incoming>
      <bpmn2:outgoing>_33-_36</bpmn2:outgoing>
      <bpmn2:script>Request request = (Request) context.getVariable(&quot;contextEntity&quot;);

Map&lt;String, Object> consumerBureauMap = new HashMap&lt;String, Object>();
Map&lt;Long, Object> consumerParties = new HashMap&lt;Long, Object>();
Map&lt;String, Object> commercialBureauMap = new HashMap&lt;String, Object>();
Map&lt;Long, Object> commercialParties = new HashMap&lt;Long, Object>();

//preparing list of unique relationship party ids
Set&lt;Customer> customers = request.getAllCustomersInRoles(&quot;PARTY_ROLE_TYPE_BORROWER&quot;,&quot;PARTY_ROLE_TYPE_OWNER&quot;,&quot;PARTY_ROLE_TYPE_GUARANTOR&quot;);
    for(Customer customer: customers ) {
          if(!(request.isBureauReportExist(customer))) {
              if (customer.isIndividual()) {
              	consumerParties.put(customer.getId(), customer);
              } else {
                 commercialParties.put(customer.getId(), customer);
              }
        }
    }


if(consumerParties.size() > 0) {
        consumerBureauMap.put(&quot;contextEntity&quot;,request);
        // using transunion
		AttributeChoice bureauChoice =(AttributeChoice) LookupService.getResult(&quot;AttributeChoice.byKey&quot;, &quot;key&quot;,&quot;BUREAU_NAME_TRANSUNION&quot;);        
        if (bureauChoice != null) {
             consumerBureauMap.put(&quot;bureauName&quot;,bureauChoice.getExternalIdentifier());  
        }
        consumerBureauMap.put(&quot;bureauPartyList&quot;, new ArrayList&lt;Object>(consumerParties.values()));
        consumerBureauMap.put(&quot;PulledBy&quot;, &quot;SYSTEM&quot;);  
        context.setVariable(&quot;consumerBureauInputMap&quot;, consumerBureauMap);
        context.setVariable(&quot;callConsumerBureau&quot;, &quot;true&quot;);
} else {
		context.setVariable(&quot;callConsumerBureau&quot;, &quot;false&quot;);
}
    
if(commercialParties.size() > 0) {
		commercialBureauMap.put(&quot;contextEntity&quot;,request);
        // using commercial bureau
		AttributeChoice bureauChoice =(AttributeChoice) LookupService.getResult(&quot;AttributeChoice.byKey&quot;, &quot;key&quot;,&quot;BUREAU_NAME_DNB&quot;);        
        if (bureauChoice != null) {
             commercialBureauMap.put(&quot;bureauName&quot;,bureauChoice.getExternalIdentifier());  
        }
        commercialBureauMap.put(&quot;bureauPartyList&quot;, new ArrayList&lt;Object>(commercialParties.values()));
        commercialBureauMap.put(&quot;PulledBy&quot;, &quot;SYSTEM&quot;);  
        context.setVariable(&quot;commercialBureauInputMap&quot;, commercialBureauMap);
        context.setVariable(&quot;callCommercialBureau&quot;, &quot;true&quot;);
} else {
		context.setVariable(&quot;callCommercialBureau&quot;, &quot;false&quot;);
}
    
</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:exclusiveGateway id="_38" name="Gateway" gatewayDirection="Diverging">
      <bpmn2:incoming>_37-_38</bpmn2:incoming>
      <bpmn2:outgoing>_38-_40</bpmn2:outgoing>
      <bpmn2:outgoing>_38-_47</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:endEvent id="_39" name="End">
      <bpmn2:incoming>_124-_39</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:exclusiveGateway id="_36" name="Gateway" gatewayDirection="Diverging">
      <bpmn2:incoming>_33-_36</bpmn2:incoming>
      <bpmn2:outgoing>_36-_34</bpmn2:outgoing>
      <bpmn2:outgoing>_36-_191</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:scriptTask id="_37" name="Determine Request Amount" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_148-_37</bpmn2:incoming>
      <bpmn2:outgoing>_37-_38</bpmn2:outgoing>
      <bpmn2:script>Request request = (Request) context.getVariable(&quot;contextEntity&quot;);

double largeLoanAmount = 250000; // TODO make this configurable ??

// mcdGreater250K
String mcd = &quot;&quot;;
if (request.getTotalRequestedLoanAmt().doubleValue() > largeLoanAmount) {
    mcd = &quot;true&quot;;
} else {
    mcd = &quot;false&quot;;
}

context.setVariable(&quot;mcdForLargeLoan&quot;,mcd);</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:scriptTask id="_42" name="Determine if any customer has FICO >= 700" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_41-_42</bpmn2:incoming>
      <bpmn2:outgoing>_42-_43</bpmn2:outgoing>
      <bpmn2:script>Request request=(Request)context.getVariable(&quot;contextEntity&quot;);
List&lt;FacilityCustomerRole> borrowerRoles = request.getAllCustomerRolesInRoles(&quot;PARTY_ROLE_TYPE_BORROWER&quot;);
	 
List&lt;BureauReport> reports = new ArrayList&lt;BureauReport>();
int maxFicoScore = 0;
String ficoScoreValid=&quot;false&quot;;
for (FacilityCustomerRole role : borrowerRoles) {
	Customer customer = null;
	if (role.getCustomer() != null &amp;&amp; role.getCustomer().isIndividual()) {
		customer = role.getCustomer();
	} else if (role.getCustomer() != null &amp;&amp; role.getCustomer().isNonIndividual()){
		FacilityCustomerRole primaryContactRole = role.getPrimaryContactRole();
		if (primaryContactRole != null) {
			customer = primaryContactRole.getCustomer();
		}
	}
	if (customer != null &amp;&amp; customer.isIndividual()) {
		Map&lt;String,BureauReport> reportMap = request.getLatestBureauReports(customer);
		for (String reportName : reportMap.keySet()) {
			BureauReport report = reportMap.get(reportName);
			int ficoScore =0;
			if(report.getFicoScore()!=null &amp;&amp; !report.getFicoScore().equals(&quot;&quot;)) {
				ficoScore=Integer.parseInt(report.getFicoScore());
				if (ficoScore >= 700) {
					ficoScoreValid=&quot;true&quot;;
					break;
				}
			}
		}
	}
	
	//breaking Customer Loop.
	if(ficoScoreValid==&quot;true&quot;) {
		break;
	}	
}
              
context.setVariable(&quot;isValidFicoScore&quot;,ficoScoreValid);
</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:exclusiveGateway id="_43" name="Gateway" gatewayDirection="Diverging">
      <bpmn2:incoming>_42-_43</bpmn2:incoming>
      <bpmn2:outgoing>_43-_44</bpmn2:outgoing>
      <bpmn2:outgoing>_43-_51</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:scriptTask id="_40" name="Determine Bureau Results" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_38-_40</bpmn2:incoming>
      <bpmn2:outgoing>_40-_41</bpmn2:outgoing>
      <bpmn2:script>String result=&quot;false&quot;;
Request request=(Request)context.getVariable(&quot;contextEntity&quot;);
List&lt;FacilityCustomerRole> borrowerRoles = request.getAllCustomerRolesInRoles(&quot;PARTY_ROLE_TYPE_BORROWER&quot;);
	 
List&lt;BureauReport> reports = new ArrayList&lt;BureauReport>();
int maxFicoScore = 0;
for (FacilityCustomerRole role : borrowerRoles) {
	Customer customer = null;
	if (role.getCustomer() != null &amp;&amp; role.getCustomer().isIndividual()) {
		customer = role.getCustomer();
	} else if (role.getCustomer() != null &amp;&amp; role.getCustomer().isNonIndividual()){
		FacilityCustomerRole primaryContactRole = role.getPrimaryContactRole();
		if (primaryContactRole != null) {
			customer = primaryContactRole.getCustomer();
		}
	}
	if (customer != null &amp;&amp; customer.isIndividual()) {
		Map&lt;String,BureauReport> reportMap = request.getLatestBureauReports(customer);
		for (String reportName : reportMap.keySet()) {
			BureauReport report = reportMap.get(reportName);
			if(report.getReportStatus()!=null &amp;&amp; (report.getReportStatus().getKey().equalsIgnoreCase(&quot;BUREAU_REPORT_STATUS_HIT&quot;) 
							|| report.getReportStatus().getKey().equalsIgnoreCase(&quot;BUREAU_REPORT_STATUS_REUSED&quot;)
							|| report.getReportStatus().getKey().equalsIgnoreCase(&quot;BUREAU_REPORT_STATUS_MISS&quot;))) {
				result=&quot;true&quot;;
			}
		}
	}
}
              
context.setVariable(&quot;bureauSuccess&quot;,result);
</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:exclusiveGateway id="_41" name="Gateway" gatewayDirection="Diverging">
      <bpmn2:incoming>_40-_41</bpmn2:incoming>
      <bpmn2:outgoing>_41-_42</bpmn2:outgoing>
      <bpmn2:outgoing>_41-_55</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:task id="_46" tns:taskName="StatusUpdate" name="Pending - Application Sent">
      <bpmn2:incoming>_10-_46</bpmn2:incoming>
      <bpmn2:outgoing>_46-_12</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_12">
        <bpmn2:dataInput id="_46_entityInput" name="entity"/>
        <bpmn2:dataInput id="_46_nextStatusKeyInput" name="nextStatusKey"/>
        <bpmn2:inputSet id="InputSet_12">
          <bpmn2:dataInputRefs>_46_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_46_nextStatusKeyInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_12"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_23">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_46_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_24">
        <bpmn2:targetRef>_46_nextStatusKeyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_9">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_17">REQUEST_STATUS_PENDING_APPLICATION_SENT</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_18">_46_nextStatusKeyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:scriptTask id="_47" name="Manual Credit Decision > 250K" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_38-_47</bpmn2:incoming>
      <bpmn2:outgoing>_47-_149</bpmn2:outgoing>
      <bpmn2:script></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:scriptTask id="_44" name="Check Compliances OFAC KYC  FRAUD" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_43-_44</bpmn2:incoming>
      <bpmn2:outgoing>_44-_45</bpmn2:outgoing>
      <bpmn2:script>String result=&quot;false&quot;;
String statusFlag = &quot;true&quot;;
Request request=(Request)context.getVariable(&quot;contextEntity&quot;);
List&lt;Customer> customers = request.getAllCustomers();
List&lt;Compliance> compliances= request.getCompliances();
if(compliances!=null &amp;&amp; compliances.size()>0) {
	for (Customer customer : customers)  {
		if(&quot;true&quot;.equals(statusFlag)) {
			if (customer.isIndividual()) {
				for (Compliance compliance:compliances) {	
						
					if(compliance.getCustomer().getId().equals(customer.getId())) {
						if(compliance.getStatus()!=null &amp;&amp; &quot;COMPLIANCE_STATUS_CLEAR&quot;.equalsIgnoreCase(compliance.getStatus().getKey())) {
							result=&quot;true&quot;;
						} else {
							result=&quot;false&quot;;
							statusFlag=&quot;false&quot;;
							//breaking Compliance Loop.
							break;
						}
					}
				}
			}
		} else {
			//breaking customers Loop.
			break;
		}
	}
}

context.setVariable(&quot;complianceSuccess&quot;,result);
</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:exclusiveGateway id="_45" name="Gateway" gatewayDirection="Diverging">
      <bpmn2:incoming>_44-_45</bpmn2:incoming>
      <bpmn2:outgoing>_45-_55</bpmn2:outgoing>
      <bpmn2:outgoing>_45-_70</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:scriptTask id="_51" name="Check forall Customers Valid Bureau data and Score &lt; 700" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_43-_51</bpmn2:incoming>
      <bpmn2:outgoing>_51-_54</bpmn2:outgoing>
      <bpmn2:script>Request request=(Request)context.getVariable(&quot;contextEntity&quot;);
List&lt;FacilityCustomerRole> borrowerRoles = request.getAllCustomerRolesInRoles(&quot;PARTY_ROLE_TYPE_BORROWER&quot;);
	 
List&lt;BureauReport> reports = new ArrayList&lt;BureauReport>();
int maxFicoScore = 0;
boolean noScore=false;
boolean invalidBureauExist = false;

for (FacilityCustomerRole role : borrowerRoles) {
	Customer customer = null;
	if (role.getCustomer() != null &amp;&amp; role.getCustomer().isIndividual()) {
		customer = role.getCustomer();
	} else if (role.getCustomer() != null &amp;&amp; role.getCustomer().isNonIndividual()){
		FacilityCustomerRole primaryContactRole = role.getPrimaryContactRole();
		if (primaryContactRole != null) {
			customer = primaryContactRole.getCustomer();
		}
	}
	if (customer != null &amp;&amp; customer.isIndividual()) {
		Map&lt;String,BureauReport> reportMap = request.getLatestBureauReports(customer);
		for (String reportName : reportMap.keySet()) {
			BureauReport report = reportMap.get(reportName);
			int ficoScore =0;
			// ignore statuses except hit/reused/nohit, these are expected to be taken care before hit this path
			if(report.getReportStatus() !=null &amp;&amp; (report.getReportStatus().getKey().equalsIgnoreCase(&quot;BUREAU_REPORT_STATUS_HIT&quot;) 
					|| report.getReportStatus().getKey().equalsIgnoreCase(&quot;BUREAU_REPORT_STATUS_REUSED&quot;)
					|| report.getReportStatus().getKey().equalsIgnoreCase(&quot;BUREAU_REPORT_STATUS_MISS&quot;)) 
					 &amp;&amp; (report.getFicoScore()==null || report.getFicoScore().equals(&quot;&quot;)) ) {
				// note expecting no fico score of status nohit.
				noScore = true;
			} else if (report.getReportStatus() ==null  || (!report.getReportStatus().getKey().equalsIgnoreCase(&quot;BUREAU_REPORT_STATUS_HIT&quot;) 
					&amp;&amp; !report.getReportStatus().getKey().equalsIgnoreCase(&quot;BUREAU_REPORT_STATUS_REUSED&quot;)
					&amp;&amp; !report.getReportStatus().getKey().equalsIgnoreCase(&quot;BUREAU_REPORT_STATUS_MISS&quot;))) {
				invalidBureauExist = true;
			}								  																		
			break;								  
		}
	}
	
}

String toStatus  = &quot;&quot;;
if (invalidBureauExist == true) {
	toStatus =&quot;PendingCreditReview&quot;;
} else if(noScore==true) {
	toStatus=&quot;DeclineNoScore&quot;;
} else {
	toStatus=&quot;DeclineScore&quot;;
}
context.setVariable(&quot;moveToStatus&quot;,toStatus);
</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:scriptTask id="_49" name="Manual Credit Decision" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_55-_49</bpmn2:incoming>
      <bpmn2:outgoing>_49-_61</bpmn2:outgoing>
      <bpmn2:script>// Manual Credit Decision</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:exclusiveGateway id="_55" name="Gateway" gatewayDirection="Converging">
      <bpmn2:incoming>_41-_55</bpmn2:incoming>
      <bpmn2:incoming>_45-_55</bpmn2:incoming>
      <bpmn2:incoming>_54-_55</bpmn2:incoming>
      <bpmn2:outgoing>_55-_49</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:exclusiveGateway id="_54" name="Gateway" gatewayDirection="Diverging">
      <bpmn2:incoming>_51-_54</bpmn2:incoming>
      <bpmn2:outgoing>_54-_55</bpmn2:outgoing>
      <bpmn2:outgoing>_54-_56</bpmn2:outgoing>
      <bpmn2:outgoing>_54-_71</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:scriptTask id="_58" name="Set Decline for No Score" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_71-_58</bpmn2:incoming>
      <bpmn2:outgoing>_58-_116</bpmn2:outgoing>
      <bpmn2:script>Request request=(Request)context.getVariable(&quot;contextEntity&quot;);
AttributeChoice reason =(AttributeChoice) LookupService.getResult(&quot;AttributeChoice.byKey&quot;, &quot;key&quot;,&quot;CREDIT_DENIAL_REASONS_NO_SCORE&quot;);

List&lt;Facility> activeFacilities=request.getAllActiveFacilities() ;
if(activeFacilities!=null &amp;&amp; activeFacilities.size()>0) {
	for(Facility facility:activeFacilities) {
		if(facility.getCreditDenialReason()!=null) {
			facility.getCreditDenialReason().clear();
		}
		facility.addToCreditDenialReason(reason);
	}
}
</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:scriptTask id="_56" name="Set Decline For Score" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_54-_56</bpmn2:incoming>
      <bpmn2:outgoing>_56-_107</bpmn2:outgoing>
      <bpmn2:script>Request request=(Request)context.getVariable(&quot;contextEntity&quot;);
AttributeChoice reason =(AttributeChoice) LookupService.getResult(&quot;AttributeChoice.byKey&quot;, &quot;key&quot;,&quot;CREDIT_DENIAL_REASONS_SCORE&quot;);

List&lt;Facility> activeFacilities=request.getAllActiveFacilities() ;
if(activeFacilities!=null &amp;&amp; activeFacilities.size()>0) {
	for(Facility facility:activeFacilities) {
		if(facility.getCreditDenialReason()!=null) {
			facility.getCreditDenialReason().clear();
		}
		facility.addToCreditDenialReason(reason);
	}
}
</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:callActivity id="_63" tns:waitForCompletion="true" tns:independent="false" name="UpdateRequestToSFDC" calledElement="UpdateRequestToSFDC">
      <bpmn2:incoming>_64-_63</bpmn2:incoming>
      <bpmn2:outgoing>_63-_65</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_13">
        <bpmn2:dataInput id="_63_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_13">
          <bpmn2:dataInputRefs>_63_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_13"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_25">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_63_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:callActivity id="_62" tns:waitForCompletion="true" tns:independent="false" name="Product Status to Pending" calledElement="UpdateProductStatus">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,&quot;FACILITY_STATUS_PENDING&quot;);</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_61-_62</bpmn2:incoming>
      <bpmn2:outgoing>_62-_64</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_14">
        <bpmn2:dataInput id="_62_facilityStatusInput" name="facilityStatus"/>
        <bpmn2:dataInput id="_62_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_14">
          <bpmn2:dataInputRefs>_62_facilityStatusInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_62_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_14"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_26">
        <bpmn2:sourceRef>nextFacilityStatus</bpmn2:sourceRef>
        <bpmn2:targetRef>_62_facilityStatusInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_27">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_62_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:task id="_61" tns:taskName="StatusUpdate" name="Pending Credit Review">
      <bpmn2:incoming>_49-_61</bpmn2:incoming>
      <bpmn2:outgoing>_61-_62</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_15">
        <bpmn2:dataInput id="_61_entityInput" name="entity"/>
        <bpmn2:dataInput id="_61_nextStatusKeyInput" name="nextStatusKey"/>
        <bpmn2:inputSet id="InputSet_15">
          <bpmn2:dataInputRefs>_61_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_61_nextStatusKeyInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_15"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_28">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_61_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_29">
        <bpmn2:targetRef>_61_nextStatusKeyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_10">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_19">REQUEST_STATUS_PENDING_CREDIT_REVIEW</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_20">_61_nextStatusKeyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:task id="_68" tns:taskName="LPUserTask" name="Credit Review">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>Team currentTeam = (Team) LookupService.getResult(&quot;Team.byName&quot;,&quot;name&quot;, &quot;Credit Queue Team&quot;); 
context.setVariable(&quot;team&quot;, currentTeam);</tns:script>
        </tns:onEntry-script>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>Request request=(Request)context.getVariable(&quot;contextEntity&quot;);

	   // Getting list of Borrowers
	   Set&lt;Customer> borrowerSet = request.getAllCustomersInRoles(&quot;PARTY_ROLE_TYPE_BORROWER&quot;);
		Customer borrower = null;
	   if(borrowerSet!=null &amp;&amp; borrowerSet.size()>0) {
		    List&lt;Customer> borrowerList=new ArrayList&lt;Customer>(borrowerSet);
		    borrower=borrowerList.get(0);
		    if(borrower!=null) {
			       	String cname =borrower.getCustomerName();
			       	context.setVariable(&quot;borrowerName&quot;,cname);
		      }
			
		}</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;team&quot;, null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_67-_68</bpmn2:incoming>
      <bpmn2:outgoing>_68-_126</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_16">
        <bpmn2:dataInput id="_68_entityInput" name="entity"/>
        <bpmn2:dataInput id="_68_borrowerNameInput" name="borrowerName"/>
        <bpmn2:dataInput id="_68_BodyInput" name="Body"/>
        <bpmn2:dataInput id="_68_SubjectInput" name="Subject"/>
        <bpmn2:dataInput id="_68_notifyInput" name="notify"/>
        <bpmn2:dataInput id="_68_ToInput" name="To"/>
        <bpmn2:dataInput id="_68_CommentInput" name="Comment"/>
        <bpmn2:dataInput id="_68_ActionsInput" name="Actions"/>
        <bpmn2:dataInput id="_68_ContentInput" name="Content"/>
        <bpmn2:dataInput id="_68_TaskNameInput" name="TaskName"/>
        <bpmn2:dataInput id="_68_GroupIdInput" name="GroupId"/>
        <bpmn2:dataInput id="_68_Reply-ToInput" name="Reply-To"/>
        <bpmn2:dataInput id="_68_FromInput" name="From"/>
        <bpmn2:dataOutput id="_68_ResultOutput" name="Result"/>
        <bpmn2:inputSet id="InputSet_16">
          <bpmn2:dataInputRefs>_68_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_68_borrowerNameInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_68_BodyInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_68_SubjectInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_68_notifyInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_68_ToInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_68_CommentInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_68_ActionsInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_68_ContentInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_68_TaskNameInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_68_GroupIdInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_68_Reply-ToInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_68_FromInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_16">
          <bpmn2:dataOutputRefs>_68_ResultOutput</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_30">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_68_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_31">
        <bpmn2:sourceRef>borrowerName</bpmn2:sourceRef>
        <bpmn2:targetRef>_68_borrowerNameInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_32">
        <bpmn2:targetRef>_68_BodyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_11">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_21">request_creditreview_task_email_body</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_22">_68_BodyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_33">
        <bpmn2:targetRef>_68_SubjectInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_12">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_23">#{contextEntity.account.customerName} :  Application #{contextEntity.refNumber} is Pending - Credit Review</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_24">_68_SubjectInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_34">
        <bpmn2:targetRef>_68_notifyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_13">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_25">true</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_26">_68_notifyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_35">
        <bpmn2:targetRef>_68_ToInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_14">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_27">#{team.emailAddressForAllUsers}</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_28">_68_ToInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_36">
        <bpmn2:targetRef>_68_CommentInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_15">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_29">#{contextEntity.account.customerName} : Application #{contextEntity.refNumber} is Pending Credit Review</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_30">_68_CommentInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_37">
        <bpmn2:targetRef>_68_ActionsInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_16">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_31">ReSubmit:ReSubmitAction,Approve:VerifiedForDeDup,Decline - No Score:SubmittedToCredit</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_32">_68_ActionsInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_38">
        <bpmn2:targetRef>_68_ContentInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_17">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_33">#{contextEntity.account.customerName} : Application #{contextEntity.refNumber} is Pending Credit Review</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_34">_68_ContentInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_39">
        <bpmn2:targetRef>_68_TaskNameInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_18">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_35">Credit Review</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_36">_68_TaskNameInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_40">
        <bpmn2:targetRef>_68_GroupIdInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_19">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_37">#{team.name}</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_38">_68_GroupIdInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_41">
        <bpmn2:targetRef>_68_Reply-ToInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_20">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_39">no-reply@thirdpillar.com</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_40">_68_Reply-ToInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_42">
        <bpmn2:targetRef>_68_FromInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_21">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_41">no-reply@thirdpillar.com</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_42">_68_FromInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="DataOutputAssociation_1">
        <bpmn2:sourceRef>_68_ResultOutput</bpmn2:sourceRef>
        <bpmn2:targetRef>taskAction</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:task>
    <bpmn2:exclusiveGateway id="_69" name="Credit Review Outcome" gatewayDirection="Diverging">
      <bpmn2:incoming>_126-_69</bpmn2:incoming>
      <bpmn2:outgoing>_69-_31</bpmn2:outgoing>
      <bpmn2:outgoing>_69-_70</bpmn2:outgoing>
      <bpmn2:outgoing>_69-_71</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:exclusiveGateway id="_70" name="Approve Gateway" gatewayDirection="Converging">
      <bpmn2:incoming>_45-_70</bpmn2:incoming>
      <bpmn2:incoming>_69-_70</bpmn2:incoming>
      <bpmn2:outgoing>_70-_101</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:exclusiveGateway id="_71" name="Decline No Score Gateway" gatewayDirection="Converging">
      <bpmn2:incoming>_54-_71</bpmn2:incoming>
      <bpmn2:incoming>_69-_71</bpmn2:incoming>
      <bpmn2:outgoing>_71-_58</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:task id="_64" tns:taskName="SaveEntity" name="Save Request">
      <bpmn2:incoming>_62-_64</bpmn2:incoming>
      <bpmn2:outgoing>_64-_63</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_17">
        <bpmn2:dataInput id="_64_entityInput" name="entity"/>
        <bpmn2:inputSet id="InputSet_17">
          <bpmn2:dataInputRefs>_64_entityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_17"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_43">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_64_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:scriptTask id="_65" name="Determine Frozen Reports" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_63-_65</bpmn2:incoming>
      <bpmn2:outgoing>_65-_67</bpmn2:outgoing>
      <bpmn2:script>Request request=(Request)context.getVariable(&quot;contextEntity&quot;);
List&lt;FacilityCustomerRole> borrowerRoles = request.getAllCustomerRolesInRoles(&quot;PARTY_ROLE_TYPE_BORROWER&quot;);
List&lt;BureauReport> fReports = new ArrayList&lt;BureauReport>();

for (FacilityCustomerRole role : borrowerRoles) {
	Customer customer = null;
	if (role.getCustomer() != null &amp;&amp; role.getCustomer().isIndividual()) {
		customer = role.getCustomer();
	} else if (role.getCustomer() != null &amp;&amp; role.getCustomer().isNonIndividual()){
		FacilityCustomerRole primaryContactRole = role.getPrimaryContactRole();
		if (primaryContactRole != null) {
			customer = primaryContactRole.getCustomer();
		}
	}
	if (customer != null &amp;&amp; customer.isIndividual()) {
		Map&lt;String,BureauReport> reportMap = request.getLatestBureauReports(customer);
		for (String reportName : reportMap.keySet()) {
			BureauReport report = reportMap.get(reportName);
			if(report.getReportStatus()!=null &amp;&amp; report.getReportStatus().getKey().equalsIgnoreCase(&quot;BUREAU_REPORT_STATUS_FROZEN&quot;)) {
				fReports.add(report);
			}
		}
	}
	
}
context.setVariable(&quot;frozenReports&quot;,fReports);
</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:scriptTask id="_67" name="Clear Frozen Reports Variable" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_65-_67</bpmn2:incoming>
      <bpmn2:outgoing>_67-_68</bpmn2:outgoing>
      <bpmn2:script>context.setVariable(&quot;frozenReports&quot;,null);</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:task id="_76" tns:taskName="SaveEntity" name="Save Request">
      <bpmn2:incoming>_74-_76</bpmn2:incoming>
      <bpmn2:outgoing>_76-_77</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_18">
        <bpmn2:dataInput id="_76_entityInput" name="entity"/>
        <bpmn2:inputSet id="InputSet_18">
          <bpmn2:dataInputRefs>_76_entityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_18"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_44">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_76_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:callActivity id="_77" tns:waitForCompletion="true" tns:independent="false" name="UpdateRequestToSFDC" calledElement="UpdateRequestToSFDC">
      <bpmn2:incoming>_76-_77</bpmn2:incoming>
      <bpmn2:outgoing>_77-_78</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_19">
        <bpmn2:dataInput id="_77_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_19">
          <bpmn2:dataInputRefs>_77_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_19"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_45">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_77_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:task id="_78" tns:taskName="LPUserTask" name="Assign Credit Analyst Task">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>Team currentTeam = (Team) LookupService.getResult(&quot;Team.byName&quot;,&quot;name&quot;, &quot;Credit Queue Team&quot;); 
context.setVariable(&quot;team&quot;, currentTeam);</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;team&quot;, null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_77-_78</bpmn2:incoming>
      <bpmn2:outgoing>_78-_150</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_20">
        <bpmn2:dataInput id="_78_entityInput" name="entity"/>
        <bpmn2:dataInput id="_78_BodyInput" name="Body"/>
        <bpmn2:dataInput id="_78_SubjectInput" name="Subject"/>
        <bpmn2:dataInput id="_78_notifyInput" name="notify"/>
        <bpmn2:dataInput id="_78_ToInput" name="To"/>
        <bpmn2:dataInput id="_78_CommentInput" name="Comment"/>
        <bpmn2:dataInput id="_78_ActionsInput" name="Actions"/>
        <bpmn2:dataInput id="_78_ContentInput" name="Content"/>
        <bpmn2:dataInput id="_78_TaskNameInput" name="TaskName"/>
        <bpmn2:dataInput id="_78_GroupIdInput" name="GroupId"/>
        <bpmn2:dataInput id="_78_Reply-ToInput" name="Reply-To"/>
        <bpmn2:dataInput id="_78_FromInput" name="From"/>
        <bpmn2:dataOutput id="_78_ResultOutput" name="Result"/>
        <bpmn2:inputSet id="InputSet_20">
          <bpmn2:dataInputRefs>_78_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_78_BodyInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_78_SubjectInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_78_notifyInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_78_ToInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_78_CommentInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_78_ActionsInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_78_ContentInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_78_TaskNameInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_78_GroupIdInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_78_Reply-ToInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_78_FromInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_20">
          <bpmn2:dataOutputRefs>_78_ResultOutput</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_46">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_78_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_47">
        <bpmn2:targetRef>_78_BodyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_22">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_43">request_assigncreditanalyst_task_email_body</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_44">_78_BodyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_48">
        <bpmn2:targetRef>_78_SubjectInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_23">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_45">#{contextEntity.account.customerName}: Application #{contextEntity.refNumber}  is  Pending - Submitted to Credit</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_46">_78_SubjectInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_49">
        <bpmn2:targetRef>_78_notifyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_24">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_47">true</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_48">_78_notifyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_50">
        <bpmn2:targetRef>_78_ToInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_25">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_49">#{team.emailAddressForAllUsers}</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_50">_78_ToInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_51">
        <bpmn2:targetRef>_78_CommentInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_26">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_51">#{contextEntity.account.customerName}: Application #{contextEntity.refNumber}  is  Pending - Submitted to Credit</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_52">_78_CommentInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_52">
        <bpmn2:targetRef>_78_ActionsInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_27">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_53">Complete:SubmittedToCredit</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_54">_78_ActionsInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_53">
        <bpmn2:targetRef>_78_ContentInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_28">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_55">#{contextEntity.account.customerName}: Application #{contextEntity.refNumber}  is  Pending - Submitted to Credit</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_56">_78_ContentInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_54">
        <bpmn2:targetRef>_78_TaskNameInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_29">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_57">Assign Credit Analyst</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_58">_78_TaskNameInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_55">
        <bpmn2:targetRef>_78_GroupIdInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_30">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_59">#{team.name}</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_60">_78_GroupIdInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_56">
        <bpmn2:targetRef>_78_Reply-ToInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_31">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_61">no-reply@thirdpillar.com</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_62">_78_Reply-ToInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_57">
        <bpmn2:targetRef>_78_FromInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_32">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_63">no-reply@thirdpillar.com</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_64">_78_FromInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="DataOutputAssociation_2">
        <bpmn2:sourceRef>_78_ResultOutput</bpmn2:sourceRef>
        <bpmn2:targetRef>taskAction</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:task>
    <bpmn2:callActivity id="_79" tns:waitForCompletion="true" tns:independent="false" name="Update Exposure" calledElement="UpdateExposureFlow">
      <bpmn2:incoming>_151-_79</bpmn2:incoming>
      <bpmn2:outgoing>_79-_80</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_21">
        <bpmn2:dataInput id="_79_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_21">
          <bpmn2:dataInputRefs>_79_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_21"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_58">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_79_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:task id="_72" tns:taskName="RuleServiceTask" name="Generate RAC Rule">
      <bpmn2:incoming>_149-_72</bpmn2:incoming>
      <bpmn2:outgoing>_72-_73</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_22">
        <bpmn2:dataInput id="_72_entityInput" name="entity"/>
        <bpmn2:dataInput id="_72_agendagroup-nameInput" name="agendagroup-name"/>
        <bpmn2:inputSet id="InputSet_22">
          <bpmn2:dataInputRefs>_72_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_72_agendagroup-nameInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_22"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_59">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_72_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_60">
        <bpmn2:targetRef>_72_agendagroup-nameInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_33">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_65">RACSetEvaluation</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_66">_72_agendagroup-nameInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:callActivity id="_73" tns:waitForCompletion="true" tns:independent="false" name="Update Exposure" calledElement="UpdateExposureFlow">
      <bpmn2:incoming>_72-_73</bpmn2:incoming>
      <bpmn2:outgoing>_73-_75</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_23">
        <bpmn2:dataInput id="_73_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_23">
          <bpmn2:dataInputRefs>_73_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_23"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_61">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_73_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:callActivity id="_74" tns:waitForCompletion="true" tns:independent="false" name="Product Status Pending" calledElement="UpdateProductStatus">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,&quot;FACILITY_STATUS_PENDING&quot;);</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_75-_74</bpmn2:incoming>
      <bpmn2:outgoing>_74-_76</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_24">
        <bpmn2:dataInput id="_74_facilityStatusInput" name="facilityStatus"/>
        <bpmn2:dataInput id="_74_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_24">
          <bpmn2:dataInputRefs>_74_facilityStatusInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_74_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_24"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_62">
        <bpmn2:sourceRef>nextFacilityStatus</bpmn2:sourceRef>
        <bpmn2:targetRef>_74_facilityStatusInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_63">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_74_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:task id="_75" tns:taskName="StatusUpdate" name="Pending - Submitted To Credit">
      <bpmn2:incoming>_73-_75</bpmn2:incoming>
      <bpmn2:outgoing>_75-_74</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_25">
        <bpmn2:dataInput id="_75_entityInput" name="entity"/>
        <bpmn2:dataInput id="_75_nextStatusKeyInput" name="nextStatusKey"/>
        <bpmn2:inputSet id="InputSet_25">
          <bpmn2:dataInputRefs>_75_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_75_nextStatusKeyInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_25"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_64">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_75_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_65">
        <bpmn2:targetRef>_75_nextStatusKeyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_34">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_67">REQUEST_STATUS_PENDING_SUBMITTED_TO_CREDIT</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_68">_75_nextStatusKeyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:exclusiveGateway id="_85" name="Gateway" gatewayDirection="Diverging">
      <bpmn2:incoming>_189-_85</bpmn2:incoming>
      <bpmn2:outgoing>_85-_86</bpmn2:outgoing>
      <bpmn2:outgoing>_85-_128</bpmn2:outgoing>
      <bpmn2:outgoing>_85-_133</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:task id="_84" tns:taskName="LPUserTask" name="Credit Analysis Task">
      <bpmn2:incoming>_83-_84</bpmn2:incoming>
      <bpmn2:outgoing>_84-_189</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_26">
        <bpmn2:dataInput id="_84_entityInput" name="entity"/>
        <bpmn2:dataInput id="_84_ActorIdInput" name="ActorId"/>
        <bpmn2:dataInput id="_84_BodyInput" name="Body"/>
        <bpmn2:dataInput id="_84_SubjectInput" name="Subject"/>
        <bpmn2:dataInput id="_84_notifyInput" name="notify"/>
        <bpmn2:dataInput id="_84_ToInput" name="To"/>
        <bpmn2:dataInput id="_84_CommentInput" name="Comment"/>
        <bpmn2:dataInput id="_84_ActionsInput" name="Actions"/>
        <bpmn2:dataInput id="_84_ContentInput" name="Content"/>
        <bpmn2:dataInput id="_84_TaskNameInput" name="TaskName"/>
        <bpmn2:dataInput id="_84_FromInput" name="From"/>
        <bpmn2:dataInput id="_84_Reply-ToInput" name="Reply-To"/>
        <bpmn2:dataOutput id="_84_ResultOutput" name="Result"/>
        <bpmn2:inputSet id="InputSet_26">
          <bpmn2:dataInputRefs>_84_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_84_ActorIdInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_84_BodyInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_84_SubjectInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_84_notifyInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_84_ToInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_84_CommentInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_84_ActionsInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_84_ContentInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_84_TaskNameInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_84_FromInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_84_Reply-ToInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_26">
          <bpmn2:dataOutputRefs>_84_ResultOutput</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_66">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_84_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_67">
        <bpmn2:targetRef>_84_ActorIdInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_35">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_69">#{contextEntity.creditAnalyst.username}</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_70">_84_ActorIdInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_68">
        <bpmn2:targetRef>_84_BodyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_36">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_71">request_creditanalysis_task_email_body</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_72">_84_BodyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_69">
        <bpmn2:targetRef>_84_SubjectInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_37">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_73">#{contextEntity.account.customerName}: Application #{contextEntity.refNumber} is Pending Analysis</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_74">_84_SubjectInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_70">
        <bpmn2:targetRef>_84_notifyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_38">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_75">true</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_76">_84_notifyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_71">
        <bpmn2:targetRef>_84_ToInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_39">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_77">#{contextEntity.creditAnalyst.contact.email}</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_78">_84_ToInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_72">
        <bpmn2:targetRef>_84_CommentInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_40">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_79">#{contextEntity.account.customerName}: Application #{contextEntity.refNumber} is Pending Analysis</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_80">_84_CommentInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_73">
        <bpmn2:targetRef>_84_ActionsInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_41">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_81">Submit For Decision:PreSubmitForDecision,NOIA:SubmitForNoia,Return To Sales</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_82">_84_ActionsInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_74">
        <bpmn2:targetRef>_84_ContentInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_42">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_83">#{contextEntity.account.customerName}: Application #{contextEntity.refNumber} is Pending Analysis</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_84">_84_ContentInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_75">
        <bpmn2:targetRef>_84_TaskNameInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_43">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_85">Credit Analysis</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_86">_84_TaskNameInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_76">
        <bpmn2:targetRef>_84_FromInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_44">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_87">no-reply@thirdpillar.com</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_88">_84_FromInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_77">
        <bpmn2:targetRef>_84_Reply-ToInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_45">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_89">no-reply@thirdpillar.com</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_90">_84_Reply-ToInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="DataOutputAssociation_3">
        <bpmn2:sourceRef>_84_ResultOutput</bpmn2:sourceRef>
        <bpmn2:targetRef>taskAction</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:task>
    <bpmn2:callActivity id="_87" tns:waitForCompletion="true" tns:independent="false" name="Product Status Pending" calledElement="UpdateProductStatus">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,&quot;FACILITY_STATUS_PENDING&quot;);</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_86-_87</bpmn2:incoming>
      <bpmn2:outgoing>_87-_88</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_27">
        <bpmn2:dataInput id="_87_facilityStatusInput" name="facilityStatus"/>
        <bpmn2:dataInput id="_87_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_27">
          <bpmn2:dataInputRefs>_87_facilityStatusInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_87_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_27"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_78">
        <bpmn2:sourceRef>nextFacilityStatus</bpmn2:sourceRef>
        <bpmn2:targetRef>_87_facilityStatusInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_79">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_87_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:task id="_86" tns:taskName="StatusUpdate" name="Pending - Decision">
      <bpmn2:incoming>_85-_86</bpmn2:incoming>
      <bpmn2:outgoing>_86-_87</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_28">
        <bpmn2:dataInput id="_86_entityInput" name="entity"/>
        <bpmn2:dataInput id="_86_nextStatusKeyInput" name="nextStatusKey"/>
        <bpmn2:inputSet id="InputSet_28">
          <bpmn2:dataInputRefs>_86_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_86_nextStatusKeyInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_28"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_80">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_86_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_81">
        <bpmn2:targetRef>_86_nextStatusKeyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_46">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_91">REQUEST_STATUS_PENDING_DECISION</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_92">_86_nextStatusKeyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:callActivity id="_81" tns:waitForCompletion="true" tns:independent="false" name="Product Status Pending" calledElement="UpdateProductStatus">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,&quot;FACILITY_STATUS_PENDING&quot;);</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_80-_81</bpmn2:incoming>
      <bpmn2:outgoing>_81-_82</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_29">
        <bpmn2:dataInput id="_81_nextFacilityStatusInput" name="nextFacilityStatus"/>
        <bpmn2:dataInput id="_81_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_29">
          <bpmn2:dataInputRefs>_81_nextFacilityStatusInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_81_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_29"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_82">
        <bpmn2:sourceRef>nextFacilityStatus</bpmn2:sourceRef>
        <bpmn2:targetRef>_81_nextFacilityStatusInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_83">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_81_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:task id="_80" tns:taskName="StatusUpdate" name="Pending Analysis">
      <bpmn2:incoming>_79-_80</bpmn2:incoming>
      <bpmn2:outgoing>_80-_81</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_30">
        <bpmn2:dataInput id="_80_entityInput" name="entity"/>
        <bpmn2:dataInput id="_80_nextStatusKeyInput" name="nextStatusKey"/>
        <bpmn2:inputSet id="InputSet_30">
          <bpmn2:dataInputRefs>_80_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_80_nextStatusKeyInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_30"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_84">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_80_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_85">
        <bpmn2:targetRef>_80_nextStatusKeyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_47">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_93">REQUEST_STATUS_PENDING_ANALYSIS</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_94">_80_nextStatusKeyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:callActivity id="_83" tns:waitForCompletion="true" tns:independent="false" name="UpdateRequestToSFDC" calledElement="UpdateRequestToSFDC">
      <bpmn2:incoming>_82-_83</bpmn2:incoming>
      <bpmn2:outgoing>_83-_84</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_31">
        <bpmn2:dataInput id="_83_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_31">
          <bpmn2:dataInputRefs>_83_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_31"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_86">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_83_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:task id="_82" tns:taskName="SaveEntity" name="Save Request">
      <bpmn2:incoming>_81-_82</bpmn2:incoming>
      <bpmn2:outgoing>_82-_83</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_32">
        <bpmn2:dataInput id="_82_entityInput" name="entity"/>
        <bpmn2:inputSet id="InputSet_32">
          <bpmn2:dataInputRefs>_82_entityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_32"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_87">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_82_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:task id="_93" tns:taskName="StatusUpdate" name="Approved">
      <bpmn2:incoming>_92-_93</bpmn2:incoming>
      <bpmn2:outgoing>_93-_95</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_33">
        <bpmn2:dataInput id="_93_entityInput" name="entity"/>
        <bpmn2:dataInput id="_93_nextStatusKeyInput" name="nextStatusKey"/>
        <bpmn2:inputSet id="InputSet_33">
          <bpmn2:dataInputRefs>_93_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_93_nextStatusKeyInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_33"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_88">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_93_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_89">
        <bpmn2:targetRef>_93_nextStatusKeyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_48">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_95">REQUEST_STATUS_APPROVED</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_96">_93_nextStatusKeyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:exclusiveGateway id="_92" name="Gateway" gatewayDirection="Diverging">
      <bpmn2:incoming>_91-_92</bpmn2:incoming>
      <bpmn2:outgoing>_92-_93</bpmn2:outgoing>
      <bpmn2:outgoing>_92-_94</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:callActivity id="_95" tns:waitForCompletion="true" tns:independent="false" name="Product Status - Approved" calledElement="UpdateProductStatus">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,&quot;FACILITY_STATUS_APPROVED&quot;);</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_93-_95</bpmn2:incoming>
      <bpmn2:outgoing>_95-_97</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_34">
        <bpmn2:dataInput id="_95_facilityStatusInput" name="facilityStatus"/>
        <bpmn2:dataInput id="_95_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_34">
          <bpmn2:dataInputRefs>_95_facilityStatusInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_95_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_34"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_90">
        <bpmn2:sourceRef>nextFacilityStatus</bpmn2:sourceRef>
        <bpmn2:targetRef>_95_facilityStatusInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_91">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_95_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:task id="_94" tns:taskName="StatusUpdate" name="Declined">
      <bpmn2:incoming>_92-_94</bpmn2:incoming>
      <bpmn2:outgoing>_94-_96</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_35">
        <bpmn2:dataInput id="_94_entityInput" name="entity"/>
        <bpmn2:dataInput id="_94_nextStatusKeyInput" name="nextStatusKey"/>
        <bpmn2:inputSet id="InputSet_35">
          <bpmn2:dataInputRefs>_94_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_94_nextStatusKeyInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_35"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_92">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_94_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_93">
        <bpmn2:targetRef>_94_nextStatusKeyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_49">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_97">REQUEST_STATUS_DECLINED</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_98">_94_nextStatusKeyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:callActivity id="_89" tns:waitForCompletion="true" tns:independent="false" name="UpdateRequestToSFDC" calledElement="UpdateRequestToSFDC">
      <bpmn2:incoming>_88-_89</bpmn2:incoming>
      <bpmn2:outgoing>_89-_90</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_36">
        <bpmn2:dataInput id="_89_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_36">
          <bpmn2:dataInputRefs>_89_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_36"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_94">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_89_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:task id="_88" tns:taskName="SaveEntity" name="Save Request">
      <bpmn2:incoming>_87-_88</bpmn2:incoming>
      <bpmn2:outgoing>_88-_89</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_37">
        <bpmn2:dataInput id="_88_entityInput" name="entity"/>
        <bpmn2:inputSet id="InputSet_37">
          <bpmn2:dataInputRefs>_88_entityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_37"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_95">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_88_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:callActivity id="_91" tns:waitForCompletion="true" tns:independent="false" name="Approval Sub-Process" calledElement="Approval">
      <bpmn2:incoming>_90-_91</bpmn2:incoming>
      <bpmn2:outgoing>_91-_92</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_38">
        <bpmn2:dataInput id="_91_entityInput" name="entity"/>
        <bpmn2:dataInput id="_91_approvalInput" name="approval"/>
        <bpmn2:inputSet id="InputSet_38">
          <bpmn2:dataInputRefs>_91_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_91_approvalInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_38"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_96">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_91_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_97">
        <bpmn2:sourceRef>approvalEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_91_approvalInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:scriptTask id="_90" name="Initialise Approval Sub Process Variables" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_89-_90</bpmn2:incoming>
      <bpmn2:outgoing>_90-_91</bpmn2:outgoing>
      <bpmn2:script>
Request reqObj = (Request) context.getVariable(&quot;contextEntity&quot;);
Approval approvalObj=reqObj.getApproval();
context.setVariable(&quot;approvalEntity&quot;, approvalObj);</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:exclusiveGateway id="_100" name="Gateway" gatewayDirection="Converging">
      <bpmn2:incoming>_139-_100</bpmn2:incoming>
      <bpmn2:incoming>_187-_100</bpmn2:incoming>
      <bpmn2:outgoing>_100-_98</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:task id="_101" tns:taskName="StatusUpdate" name="Approved">
      <bpmn2:incoming>_70-_101</bpmn2:incoming>
      <bpmn2:outgoing>_101-_102</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_40">
        <bpmn2:dataInput id="_101_entityInput" name="entity"/>
        <bpmn2:dataInput id="_101_nextStatusKeyInput" name="nextStatusKey"/>
        <bpmn2:inputSet id="InputSet_40">
          <bpmn2:dataInputRefs>_101_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_101_nextStatusKeyInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_40"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_100">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_101_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_101">
        <bpmn2:targetRef>_101_nextStatusKeyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_50">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_99">REQUEST_STATUS_APPROVED</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_100">_101_nextStatusKeyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:scriptTask id="_98" name="TODO Document Checklist Process" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_100-_98</bpmn2:incoming>
      <bpmn2:outgoing>_98-_99</bpmn2:outgoing>
      <bpmn2:script></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:scriptTask id="_99" name="Send Reg B Letters" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_98-_99</bpmn2:incoming>
      <bpmn2:outgoing>_99-_119</bpmn2:outgoing>
      <bpmn2:script></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:callActivity id="_96" tns:waitForCompletion="true" tns:independent="false" name="Product Status - Declined" calledElement="UpdateProductStatus">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,&quot;FACILITY_STATUS_DECLINED&quot;);</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_94-_96</bpmn2:incoming>
      <bpmn2:outgoing>_96-_137</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_41">
        <bpmn2:dataInput id="_96_facilityStatusInput" name="facilityStatus"/>
        <bpmn2:dataInput id="_96_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_41">
          <bpmn2:dataInputRefs>_96_facilityStatusInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_96_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_41"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_102">
        <bpmn2:sourceRef>nextFacilityStatus</bpmn2:sourceRef>
        <bpmn2:targetRef>_96_facilityStatusInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_103">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_96_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:scriptTask id="_97" name="Set Approval Expiration Date" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_95-_97</bpmn2:incoming>
      <bpmn2:outgoing>_97-_134</bpmn2:outgoing>
      <bpmn2:script>Request r = (Request) context.getVariable(&quot;contextEntity&quot;);
for (Facility f : r.getDecisionFacilities()) {
	if(f.getFacilityCategory()!=null &amp;&amp; f.getFacilityCategory().getKey().equals(&quot;PROJECT&quot;)) {
	    Calendar now = Calendar.getInstance();
    	now.add(Calendar.MONTH,9);
	    Date date=now.getTime();
    	f.setApprovalExpirationDate(date);
	} else if(f.getFacilityCategory()!=null &amp;&amp; f.getFacilityCategory().getKey().equals(&quot;NON_PROJECT&quot;)) {
    	Calendar now = Calendar.getInstance();
	    now.add(java.util.Calendar.MONTH,6);
    	Date date=now.getTime();
	    f.setApprovalExpirationDate(date);
	}	
}</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:scriptTask id="_110" name="Clear Customer email List" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_107-_110</bpmn2:incoming>
      <bpmn2:outgoing>_110-_111</bpmn2:outgoing>
      <bpmn2:script>context.setVariable(&quot;borrowers&quot;,null);
context.setVariable(&quot;coBorrowers&quot;,null);
context.setVariable(&quot;borrowerName&quot;,null);</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:exclusiveGateway id="_111" name="Gateway" gatewayDirection="Converging">
      <bpmn2:incoming>_110-_111</bpmn2:incoming>
      <bpmn2:incoming>_118-_111</bpmn2:incoming>
      <bpmn2:outgoing>_111-_112</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:scriptTask id="_107" name="Prepare Borrower and Co-borrower Email List" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_56-_107</bpmn2:incoming>
      <bpmn2:outgoing>_107-_110</bpmn2:outgoing>
      <bpmn2:script>Request request=(Request)context.getVariable(&quot;contextEntity&quot;);
  
// Getting list of Borrowers
Set&lt;Customer> borrowerSet = request.getAllCustomersInRoles(&quot;PARTY_ROLE_TYPE_BORROWER&quot;);
context.setVariable(&quot;borrower&quot;,borrowerSet); 

// Getting list of Borrowers roles
List&lt;FacilityCustomerRole> borrowerList = request.getAllCustomerRolesInRoles(&quot;PARTY_ROLE_TYPE_BORROWER&quot;);

Set&lt;Customer> coBorrowerSet = new HashSet();
if(borrowerList!=null &amp;&amp; borrowerList.size()>0) {
    for (FacilityCustomerRole borrower : borrowerList) {
		if(!borrower.getPrimaryBorrower()) {
			coBorrowerSet.add(borrower.getCustomer());
		}
	}
}

context.setVariable(&quot;coBorrowers&quot;,coBorrowerSet);

String customerName=&quot;&quot;;
if(borrowerList!=null &amp;&amp; borrowerList.size()>0) {
    for (FacilityCustomerRole borrower : borrowerList) {
		if(borrower!=null &amp;&amp; borrower.getPrimaryBorrower()) {
			customerName=borrower.getCustomer().getCustomerName();
			break;
		}
	}
}
context.setVariable(&quot;borrowerName&quot;,customerName);

</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:exclusiveGateway id="_119" name="Gateway" gatewayDirection="Converging">
      <bpmn2:incoming>_106-_119</bpmn2:incoming>
      <bpmn2:incoming>_115-_119</bpmn2:incoming>
      <bpmn2:incoming>_99-_119</bpmn2:incoming>
      <bpmn2:outgoing>_119-_121</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:scriptTask id="_118" name="Clear Customer email List" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_116-_118</bpmn2:incoming>
      <bpmn2:outgoing>_118-_111</bpmn2:outgoing>
      <bpmn2:script>context.setVariable(&quot;requestCustomers&quot;,null);
context.setVariable(&quot;borrowerName&quot;,null);</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:scriptTask id="_116" name="Prepare Customer email List" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_58-_116</bpmn2:incoming>
      <bpmn2:outgoing>_116-_118</bpmn2:outgoing>
      <bpmn2:script>Request request=(Request)context.getVariable(&quot;contextEntity&quot;);
Set&lt;Customer> customerList = request.getAllCustomersInRoles(&quot;PARTY_ROLE_TYPE_BORROWER&quot;);
context.setVariable(&quot;requestCustomers&quot;,customerList); 
   
// Getting list of Borrowers
List&lt;FacilityCustomerRole> borrowerList = request.getAllCustomerRolesInRoles(&quot;PARTY_ROLE_TYPE_BORROWER&quot;);

String customerName=&quot;&quot;;
if(borrowerList!=null &amp;&amp; borrowerList.size()>0) {
    for (FacilityCustomerRole borrower : borrowerList) {
		if(borrower.getPrimaryBorrower()) {
			customerName=borrower.getCustomer().getCustomerName();
			break;
		}
	}
}
context.setVariable(&quot;borrowerName&quot;,customerName);
</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:scriptTask id="_115" name="Setup Approval Level" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_114-_115</bpmn2:incoming>
      <bpmn2:outgoing>_115-_119</bpmn2:outgoing>
      <bpmn2:script>//System.out.println(&quot;*************************** Setting Decisions**************************************&quot;);

Request request=(Request)context.getVariable(&quot;contextEntity&quot;);

String decisionKey=&quot;APPROVAL_DECISION_DECLINED&quot;;
	
AttributeChoice decision =(AttributeChoice) LookupService.getResult(&quot;AttributeChoice.byKey&quot;, &quot;key&quot;,decisionKey);
Context ctx =ContextHolder.getContext();
String decisionFrmTask=(String) context.getVariable(&quot;manualDecision&quot;);
	
if( request.getApproval()!=null &amp;&amp; request.getApproval().getApprovalLevels()!=null &amp;&amp; request.getApproval().getApprovalLevels().size()>0) {
	User user= null;
	if(decisionFrmTask!=null &amp;&amp; decisionFrmTask.equals(&quot;true&quot;)) { 
		user=(User)ctx.getUser(); 
	} else {
		user=(User) LookupService.getResult(&quot;User.byUsername&quot;, &quot;username&quot;, &quot;SYSTEM&quot;);
	}
	
	if(user != null) {
		request.getApproval().getApprovalLevels().get(0).getApproverList().get(0).setUser(user);
	}
	
	//As per Requirement there will be only one ApprovalLevel and one Approver in the application.
    request.getApproval().getApprovalLevels().get(0).getApproverList().get(0).setDecision(decision);
    request.getApproval().getApprovalLevels().get(0).setDecision(decision);
	request.getApproval().getApprovalLevels().get(0).getMetaInfo().setLastModifiedAt(new java.util.Date());
} else {
	Approval requestApproval=request.getApproval();
	User user=null;
	EntityService es = new EntityService();		
	if(requestApproval==null) {
		requestApproval= (Approval) es.createNew(Approval.class);
	}

	ApprovalLevel level1= (ApprovalLevel) es.createNew(ApprovalLevel.class);
	        
	//Creating Approvers
	Approver approver=(Approver) es.createNew(Approver.class);
	if(decisionFrmTask!=null &amp;&amp; decisionFrmTask.equals(&quot;true&quot;))  {
		user=(User)ctx.getUser();
	} else {
		user=(User) LookupService.getResult(&quot;User.byUsername&quot;, &quot;username&quot;, &quot;SYSTEM&quot;);
	}
			
	if(user!=null) {
		approver.setUser(user);
		approver.setDecision(decision);
		approver.setApprovalLevel(level1);
	}

	//Seting Approval Level
	level1.addToApproverList(approver);
	level1.setApproval(requestApproval);
	level1.setDecision(decision);
	level1.setName(&quot;Level 1&quot;);
			 			 
	//System.out.println(&quot;***************************** Creating Approval *****************************************&quot;);
	requestApproval.addToApprovalLevels(level1);
	requestApproval.setDecision(decision);
	request.setApproval(requestApproval);
}
	
request.setFinalDecisionDate(new java.util.Date());
request.getApproval().setDecision(decision);
context.setVariable(&quot;requestDecision&quot;,decisionKey);

   //Clearing DecisionFromTask Variable .
	context.setVariable(&quot;decisionFromTask&quot;,null);
	
</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:callActivity id="_114" tns:waitForCompletion="true" tns:independent="false" name="Product Status - Declined" calledElement="UpdateProductStatus">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,&quot;FACILITY_STATUS_DECLINED&quot;);</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_113-_114</bpmn2:incoming>
      <bpmn2:outgoing>_114-_115</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_42">
        <bpmn2:dataInput id="_114_facilityStatusInput" name="facilityStatus"/>
        <bpmn2:dataInput id="_114_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_42">
          <bpmn2:dataInputRefs>_114_facilityStatusInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_114_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_42"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_104">
        <bpmn2:sourceRef>nextFacilityStatus</bpmn2:sourceRef>
        <bpmn2:targetRef>_114_facilityStatusInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_105">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_114_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:scriptTask id="_113" name="Set Product Decision" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_112-_113</bpmn2:incoming>
      <bpmn2:outgoing>_113-_114</bpmn2:outgoing>
      <bpmn2:script>Request r = (Request) context.getVariable(&quot;contextEntity&quot;);
for (Facility f : r.getDecisionFacilities()) {
	if(f.getFacilityCategory()!=null &amp;&amp; f.getFacilityCategory().getKey().equals(&quot;PROJECT&quot;)) {
	    Calendar now = Calendar.getInstance();
    	now.add(Calendar.MONTH,9);
	    Date date=now.getTime();
    	f.setApprovalExpirationDate(date);
	} else if(f.getFacilityCategory()!=null &amp;&amp; f.getFacilityCategory().getKey().equals(&quot;NON_PROJECT&quot;)) {
    	Calendar now = Calendar.getInstance();
	    now.add(java.util.Calendar.MONTH,6);
    	Date date=now.getTime();
	    f.setApprovalExpirationDate(date);
	}	
}</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:task id="_112" tns:taskName="StatusUpdate" name="Declined">
      <bpmn2:incoming>_111-_112</bpmn2:incoming>
      <bpmn2:outgoing>_112-_113</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_43">
        <bpmn2:dataInput id="_112_entityInput" name="entity"/>
        <bpmn2:dataInput id="_112_nextStatusKeyInput" name="nextStatusKey"/>
        <bpmn2:inputSet id="InputSet_43">
          <bpmn2:dataInputRefs>_112_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_112_nextStatusKeyInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_43"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_106">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_112_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_107">
        <bpmn2:targetRef>_112_nextStatusKeyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_51">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_101">REQUEST_STATUS_DECLINED</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_102">_112_nextStatusKeyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:scriptTask id="_126" name="Set Manual Decision Reason" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_68-_126</bpmn2:incoming>
      <bpmn2:outgoing>_126-_69</bpmn2:outgoing>
      <bpmn2:script>context.setVariable(&quot;manualDecision&quot;,&quot;true&quot;);</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:task id="_125" tns:taskName="IntegrationTask" name="Provision Customers Integration">
      <bpmn2:extensionElements>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;provisionCustomersMap&quot;,null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_123-_125</bpmn2:incoming>
      <bpmn2:outgoing>_125-_124</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_44">
        <bpmn2:dataInput id="_125_inputInput" name="input"/>
        <bpmn2:dataInput id="_125_entityInput" name="entity"/>
        <bpmn2:dataInput id="_125_ServiceNameInput" name="ServiceName"/>
        <bpmn2:inputSet id="InputSet_44">
          <bpmn2:dataInputRefs>_125_inputInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_125_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_125_ServiceNameInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_44"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_108">
        <bpmn2:sourceRef>provisionCustomersMap</bpmn2:sourceRef>
        <bpmn2:targetRef>_125_inputInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_109">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_125_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_110">
        <bpmn2:targetRef>_125_ServiceNameInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_52">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_103">provisionCustomerService</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_104">_125_ServiceNameInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:exclusiveGateway id="_124" name="Gateway" gatewayDirection="Converging">
      <bpmn2:incoming>_123-_124</bpmn2:incoming>
      <bpmn2:incoming>_125-_124</bpmn2:incoming>
      <bpmn2:outgoing>_124-_39</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:exclusiveGateway id="_123" name="Gateway" gatewayDirection="Diverging">
      <bpmn2:incoming>_122-_123</bpmn2:incoming>
      <bpmn2:outgoing>_123-_125</bpmn2:outgoing>
      <bpmn2:outgoing>_123-_124</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:scriptTask id="_122" name="Determine Customers To Provision" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_120-_122</bpmn2:incoming>
      <bpmn2:outgoing>_122-_123</bpmn2:outgoing>
      <bpmn2:script>Request request=(Request)context.getVariable(&quot;contextEntity&quot;);
List&lt;FacilityCustomerRole> borrowerRoles = request.getAllCustomerRolesInRoles(&quot;PARTY_ROLE_TYPE_BORROWER&quot;);
List&lt;Customer> porivisionCustomersList = new ArrayList&lt;Customer>();
Boolean callP = Boolean.FALSE;
for (FacilityCustomerRole role : borrowerRoles) {
	Customer customer = null;
	if (role.getPrimaryBorrower()) {
		if (role.getCustomer() != null &amp;&amp; role.getCustomer().isIndividual()) {
			customer = role.getCustomer();
		} else if (role.getCustomer() != null &amp;&amp; role.getCustomer().isNonIndividual()){
			FacilityCustomerRole primaryContactRole = role.getPrimaryContactRole();
			if (primaryContactRole != null) {
				customer = primaryContactRole.getCustomer();
			}
		}
		if (customer != null &amp;&amp; customer.isIndividual()) {
			if(customer.getProvisioned() == null || &quot;YES_OR_NO_NO&quot;.equals(customer.getProvisioned().getKey())) {
				porivisionCustomersList.add(customer);
				callP = Boolean.TRUE;
			}
		}
	}
	
}

if (callP == Boolean.TRUE) {
	Map&lt;String,Object> pCustomersMap = new HashMap&lt;String,Object>();
	pCustomersMap.put(&quot;contextEntity&quot;,contextEntity);
	pCustomersMap.put(&quot;provisionCustomers&quot;,porivisionCustomersList);

	context.setVariable(&quot;provisionCustomersMap&quot;,pCustomersMap);
}

context.setVariable(&quot;callProvision&quot;,callP.toString());
</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:task id="_121" tns:taskName="SaveEntity" name="Save Request">
      <bpmn2:incoming>_119-_121</bpmn2:incoming>
      <bpmn2:outgoing>_121-_120</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_45">
        <bpmn2:dataInput id="_121_entityInput" name="entity"/>
        <bpmn2:inputSet id="InputSet_45">
          <bpmn2:dataInputRefs>_121_entityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_45"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_111">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_121_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:callActivity id="_120" tns:waitForCompletion="true" tns:independent="false" name="UpdateRequestToSFDC" calledElement="UpdateRequestToSFDC">
      <bpmn2:incoming>_121-_120</bpmn2:incoming>
      <bpmn2:outgoing>_120-_122</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_46">
        <bpmn2:dataInput id="_120_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_46">
          <bpmn2:dataInputRefs>_120_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_46"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_112">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_120_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:scriptTask id="_137" name="Prepare Customer email List" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_96-_137</bpmn2:incoming>
      <bpmn2:outgoing>_137-_139</bpmn2:outgoing>
      <bpmn2:script>Request request=(Request)context.getVariable(&quot;contextEntity&quot;);
Set&lt;Customer> customerList = request.getAllCustomersInRoles(&quot;PARTY_ROLE_TYPE_BORROWER&quot;);
context.setVariable(&quot;requestCustomers&quot;,customerList); 
   
// Getting list of Borrowers
List&lt;FacilityCustomerRole> borrowerList = request.getAllCustomerRolesInRoles(&quot;PARTY_ROLE_TYPE_BORROWER&quot;);

String customerName=&quot;&quot;;
if(borrowerList!=null &amp;&amp; borrowerList.size()>0) {
    for (FacilityCustomerRole borrower : borrowerList) {
		if(borrower.getPrimaryBorrower()) {
			customerName=borrower.getCustomer().getCustomerName();
			break;
		}
	}
}
context.setVariable(&quot;borrowerName&quot;,customerName);
</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:scriptTask id="_136" name="Clear Customer email List" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_134-_136</bpmn2:incoming>
      <bpmn2:outgoing>_136-_187</bpmn2:outgoing>
      <bpmn2:script>context.setVariable(&quot;requestCustomers&quot;,null);
context.setVariable(&quot;borrowerName&quot;,null);</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:scriptTask id="_139" name="Clear Customer email List" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_137-_139</bpmn2:incoming>
      <bpmn2:outgoing>_139-_100</bpmn2:outgoing>
      <bpmn2:script>context.setVariable(&quot;requestCustomers&quot;,null);
context.setVariable(&quot;borrowerName&quot;,null);</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:task id="_141" tns:taskName="PdfMerge" name="Credit Writeup">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>Request req = (Request) contextEntity;
DocumentGroup dg =  (DocumentGroup) req.getDocumentGroup();
if (dg != null) {

	Document d = dg.getGeneratedDocument(&quot;DOCUMENT_CLASS_CREDIT&quot;,&quot;DOCUMENT_CATEGORY_CREDIT_WORKING_FILE&quot;,&quot;DOCUMENT_TYPE_CREDIT_WRITE_UP&quot;);
	if (d != null) {
		context.setVariable(&quot;writeupDoc&quot;,d);
	}
}</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;writeupDoc&quot;,null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_140-_141</bpmn2:incoming>
      <bpmn2:outgoing>_141-_142</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_47">
        <bpmn2:dataInput id="_141_documentInput" name="document"/>
        <bpmn2:dataInput id="_141_entityInput" name="entity"/>
        <bpmn2:dataInput id="_141_docClassInput" name="docClass"/>
        <bpmn2:dataInput id="_141_docTypeInput" name="docType"/>
        <bpmn2:dataInput id="_141_docCategoryInput" name="docCategory"/>
        <bpmn2:dataInput id="_141_docTemplateInput" name="docTemplate"/>
        <bpmn2:inputSet id="InputSet_47">
          <bpmn2:dataInputRefs>_141_documentInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_141_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_141_docClassInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_141_docTypeInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_141_docCategoryInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_141_docTemplateInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_47"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_113">
        <bpmn2:sourceRef>writeupDoc</bpmn2:sourceRef>
        <bpmn2:targetRef>_141_documentInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_114">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_141_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_115">
        <bpmn2:targetRef>_141_docClassInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_53">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_105">DOCUMENT_CLASS_CREDIT</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_106">_141_docClassInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_116">
        <bpmn2:targetRef>_141_docTypeInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_54">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_107">DOCUMENT_TYPE_CREDIT_WRITE_UP</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_108">_141_docTypeInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_117">
        <bpmn2:targetRef>_141_docCategoryInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_55">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_109">DOCUMENT_CATEGORY_CREDIT_WORKING_FILE</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_110">_141_docCategoryInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_118">
        <bpmn2:targetRef>_141_docTemplateInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_56">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_111">CreditWriteup</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_112">_141_docTemplateInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:intermediateCatchEvent id="_140" name="CreditWriteup">
      <bpmn2:outgoing>_140-_141</bpmn2:outgoing>
      <bpmn2:signalEventDefinition id="SignalEventDefinition_6" signalRef="CreditWriteup"/>
    </bpmn2:intermediateCatchEvent>
    <bpmn2:intermediateCatchEvent id="_143" name="Manual Bureau Pull">
      <bpmn2:outgoing>_143-_144</bpmn2:outgoing>
      <bpmn2:signalEventDefinition id="SignalEventDefinition_7" signalRef="ManualBureauPull"/>
    </bpmn2:intermediateCatchEvent>
    <bpmn2:endEvent id="_142" name="End">
      <bpmn2:incoming>_141-_142</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:exclusiveGateway id="_129" name="Gateway" gatewayDirection="Converging">
      <bpmn2:incoming>_128-_129</bpmn2:incoming>
      <bpmn2:incoming>_133-_129</bpmn2:incoming>
      <bpmn2:outgoing>_129-_130</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:task id="_128" tns:taskName="StatusUpdate" name="Pending - Return to Sales">
      <bpmn2:incoming>_85-_128</bpmn2:incoming>
      <bpmn2:outgoing>_128-_129</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_48">
        <bpmn2:dataInput id="_128_entityInput" name="entity"/>
        <bpmn2:dataInput id="_128_nextStatusKeyInput" name="nextStatusKey"/>
        <bpmn2:inputSet id="InputSet_48">
          <bpmn2:dataInputRefs>_128_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_128_nextStatusKeyInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_48"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_119">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_128_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_120">
        <bpmn2:targetRef>_128_nextStatusKeyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_57">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_113">REQUEST_STATUS_PENDING_RETURN_TO_SALES</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_114">_128_nextStatusKeyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:callActivity id="_131" tns:waitForCompletion="true" tns:independent="false" name="UpdateRequestToSFDC" calledElement="UpdateRequestToSFDC">
      <bpmn2:incoming>_130-_131</bpmn2:incoming>
      <bpmn2:outgoing>_131-_132</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_49">
        <bpmn2:dataInput id="_131_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_49">
          <bpmn2:dataInputRefs>_131_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_49"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_121">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_131_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:task id="_130" tns:taskName="SaveEntity" name="Save Request">
      <bpmn2:incoming>_129-_130</bpmn2:incoming>
      <bpmn2:outgoing>_130-_131</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_50">
        <bpmn2:dataInput id="_130_entityInput" name="entity"/>
        <bpmn2:inputSet id="InputSet_50">
          <bpmn2:dataInputRefs>_130_entityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_50"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_122">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_130_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:task id="_133" tns:taskName="StatusUpdate" name="Pending - NOIA">
      <bpmn2:incoming>_85-_133</bpmn2:incoming>
      <bpmn2:outgoing>_133-_129</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_51">
        <bpmn2:dataInput id="_133_entityInput" name="entity"/>
        <bpmn2:dataInput id="_133_nextStatusKeyInput" name="nextStatusKey"/>
        <bpmn2:inputSet id="InputSet_51">
          <bpmn2:dataInputRefs>_133_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_133_nextStatusKeyInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_51"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_123">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_133_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_124">
        <bpmn2:targetRef>_133_nextStatusKeyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_58">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_115">REQUEST_STATUS_PENDING_NOIA</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_116">_133_nextStatusKeyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:endEvent id="_132" name="End">
      <bpmn2:incoming>_131-_132</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:scriptTask id="_134" name="Prepare Customer email List" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_97-_134</bpmn2:incoming>
      <bpmn2:outgoing>_134-_136</bpmn2:outgoing>
      <bpmn2:script>Request request=(Request)context.getVariable(&quot;contextEntity&quot;);
Set&lt;Customer> customerList = request.getAllCustomersInRoles(&quot;PARTY_ROLE_TYPE_BORROWER&quot;);
context.setVariable(&quot;requestCustomers&quot;,customerList); 
   
// Getting list of Borrowers
List&lt;FacilityCustomerRole> borrowerList = request.getAllCustomerRolesInRoles(&quot;PARTY_ROLE_TYPE_BORROWER&quot;);

String customerName=&quot;&quot;;
if(borrowerList!=null &amp;&amp; borrowerList.size()>0) {
    for (FacilityCustomerRole borrower : borrowerList) {
		if(borrower.getPrimaryBorrower()) {
			customerName=borrower.getCustomer().getCustomerName();
			break;
		}
	}
}
context.setVariable(&quot;borrowerName&quot;,customerName);
</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:task id="_152" tns:taskName="StatusUpdate" name="Pending - Spreading">
      <bpmn2:incoming>_150-_152</bpmn2:incoming>
      <bpmn2:outgoing>_152-_153</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_52">
        <bpmn2:dataInput id="_152_entityInput" name="entity"/>
        <bpmn2:dataInput id="_152_nextStatusKeyInput" name="nextStatusKey"/>
        <bpmn2:inputSet id="InputSet_52">
          <bpmn2:dataInputRefs>_152_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_152_nextStatusKeyInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_52"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_125">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_152_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_126">
        <bpmn2:targetRef>_152_nextStatusKeyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_59">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_117">REQUEST_STATUS_PENDING_SPREADING</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_118">_152_nextStatusKeyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:callActivity id="_153" tns:waitForCompletion="true" tns:independent="false" name="Product Status Pending" calledElement="UpdateProductStatus">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,&quot;FACILITY_STATUS_PENDING&quot;);</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_152-_153</bpmn2:incoming>
      <bpmn2:outgoing>_153-_154</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_53">
        <bpmn2:dataInput id="_153_facilityStatusInput" name="facilityStatus"/>
        <bpmn2:dataInput id="_153_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_53">
          <bpmn2:dataInputRefs>_153_facilityStatusInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_153_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_53"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_127">
        <bpmn2:sourceRef>nextFacilityStatus</bpmn2:sourceRef>
        <bpmn2:targetRef>_153_facilityStatusInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_128">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_153_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:task id="_154" tns:taskName="SaveEntity" name="Save Request">
      <bpmn2:incoming>_153-_154</bpmn2:incoming>
      <bpmn2:outgoing>_154-_155</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_54">
        <bpmn2:dataInput id="_154_entityInput" name="entity"/>
        <bpmn2:inputSet id="InputSet_54">
          <bpmn2:dataInputRefs>_154_entityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_54"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_129">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_154_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:callActivity id="_155" tns:waitForCompletion="true" tns:independent="false" name="UpdateRequestToSFDC" calledElement="UpdateRequestToSFDC">
      <bpmn2:incoming>_154-_155</bpmn2:incoming>
      <bpmn2:outgoing>_155-_156</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_55">
        <bpmn2:dataInput id="_155_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_55">
          <bpmn2:dataInputRefs>_155_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_55"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_130">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_155_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:task id="_156" tns:taskName="LPUserTask" name="Pending Spreading Task">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>Team currentTeam = (Team) LookupService.getResult(&quot;Team.byName&quot;,&quot;name&quot;, &quot;Spreading Specialist Team&quot;); 
context.setVariable(&quot;team&quot;, currentTeam);</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;team&quot;, null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_155-_156</bpmn2:incoming>
      <bpmn2:outgoing>_156-_157</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_56">
        <bpmn2:dataInput id="_156_entityInput" name="entity"/>
        <bpmn2:dataInput id="_156_BodyInput" name="Body"/>
        <bpmn2:dataInput id="_156_SubjectInput" name="Subject"/>
        <bpmn2:dataInput id="_156_ToInput" name="To"/>
        <bpmn2:dataInput id="_156_notifyInput" name="notify"/>
        <bpmn2:dataInput id="_156_CommentInput" name="Comment"/>
        <bpmn2:dataInput id="_156_ActionsInput" name="Actions"/>
        <bpmn2:dataInput id="_156_TaskNameInput" name="TaskName"/>
        <bpmn2:dataInput id="_156_ContentInput" name="Content"/>
        <bpmn2:dataInput id="_156_GroupIdInput" name="GroupId"/>
        <bpmn2:dataInput id="_156_Reply-ToInput" name="Reply-To"/>
        <bpmn2:dataInput id="_156_FromInput" name="From"/>
        <bpmn2:dataOutput id="_156_ResultOutput" name="Result"/>
        <bpmn2:inputSet id="InputSet_56">
          <bpmn2:dataInputRefs>_156_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_156_BodyInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_156_SubjectInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_156_ToInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_156_notifyInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_156_CommentInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_156_ActionsInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_156_TaskNameInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_156_ContentInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_156_GroupIdInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_156_Reply-ToInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_156_FromInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_56">
          <bpmn2:dataOutputRefs>_156_ResultOutput</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_131">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_156_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_132">
        <bpmn2:targetRef>_156_BodyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_60">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_119">request_spreading_task_email_body</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_120">_156_BodyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_133">
        <bpmn2:targetRef>_156_SubjectInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_61">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_121">#{contextEntity.account.customerName}: Application #{contextEntity.refNumber}  is  Pending - Spreading</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_122">_156_SubjectInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_134">
        <bpmn2:targetRef>_156_ToInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_62">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_123">#{team.emailAddressForAllUsers}</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_124">_156_ToInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_135">
        <bpmn2:targetRef>_156_notifyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_63">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_125">true</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_126">_156_notifyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_136">
        <bpmn2:targetRef>_156_CommentInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_64">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_127">#{contextEntity.account.customerName}: Application #{contextEntity.refNumber}  is  Pending - Spreading</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_128">_156_CommentInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_137">
        <bpmn2:targetRef>_156_ActionsInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_65">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_129">Complete:Spreading</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_130">_156_ActionsInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_138">
        <bpmn2:targetRef>_156_TaskNameInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_66">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_131">Spreading Analysis</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_132">_156_TaskNameInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_139">
        <bpmn2:targetRef>_156_ContentInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_67">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_133">#{contextEntity.account.customerName}: Application #{contextEntity.refNumber}  is  Pending - Spreading</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_134">_156_ContentInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_140">
        <bpmn2:targetRef>_156_GroupIdInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_68">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_135">#{team.name}</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_136">_156_GroupIdInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_141">
        <bpmn2:targetRef>_156_Reply-ToInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_69">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_137">no-reply@thirdpillar.com</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_138">_156_Reply-ToInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_142">
        <bpmn2:targetRef>_156_FromInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_70">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_139">no-reply@thirdpillar.com</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_140">_156_FromInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="DataOutputAssociation_4">
        <bpmn2:sourceRef>_156_ResultOutput</bpmn2:sourceRef>
        <bpmn2:targetRef>taskAction</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:task>
    <bpmn2:task id="_157" tns:taskName="StatusUpdate" name="Pending - Pricing">
      <bpmn2:incoming>_156-_157</bpmn2:incoming>
      <bpmn2:outgoing>_157-_158</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_57">
        <bpmn2:dataInput id="_157_entityInput" name="entity"/>
        <bpmn2:dataInput id="_157_nextStatusKeyInput" name="nextStatusKey"/>
        <bpmn2:inputSet id="InputSet_57">
          <bpmn2:dataInputRefs>_157_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_157_nextStatusKeyInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_57"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_143">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_157_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_144">
        <bpmn2:targetRef>_157_nextStatusKeyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_71">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_141">REQUEST_STATUS_PENDING_PRICING</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_142">_157_nextStatusKeyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:callActivity id="_158" tns:waitForCompletion="true" tns:independent="false" name="Product Status Pending" calledElement="UpdateProductStatus">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,&quot;FACILITY_STATUS_PENDING&quot;);</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_157-_158</bpmn2:incoming>
      <bpmn2:outgoing>_158-_159</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_58">
        <bpmn2:dataInput id="_158_facilityStatusInput" name="facilityStatus"/>
        <bpmn2:dataInput id="_158_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_58">
          <bpmn2:dataInputRefs>_158_facilityStatusInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_158_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_58"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_145">
        <bpmn2:sourceRef>nextFacilityStatus</bpmn2:sourceRef>
        <bpmn2:targetRef>_158_facilityStatusInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_146">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_158_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:task id="_159" tns:taskName="SaveEntity" name="Save Request">
      <bpmn2:incoming>_158-_159</bpmn2:incoming>
      <bpmn2:outgoing>_159-_160</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_59">
        <bpmn2:dataInput id="_159_entityInput" name="entity"/>
        <bpmn2:inputSet id="InputSet_59">
          <bpmn2:dataInputRefs>_159_entityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_59"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_147">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_159_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:task id="_144" tns:taskName="IntegrationTask" name="Bureau Integration Call (Manual)">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>Request request = (Request) context.getVariable(&quot;contextEntity&quot;);
Customer customer = request.getPullReportCustomer();
List parties = new ArrayList();
parties.add(customer);

java.util.Map&lt;String,Object> bureauMap = new java.util.HashMap&lt;String,Object>();
        bureauMap.put(&quot;contextEntity&quot;,request);
        bureauMap.put(&quot;bureauPartyList&quot;, parties);
        if (request.getBureauName() != null) {
	        bureauMap.put(&quot;bureauName&quot;, request.getBureauName().getExternalIdentifier());        
	    }
        if (request.getPullNewReport() != null &amp;&amp; &quot;YES_OR_NO_YES&quot;.equals(request.getPullNewReport().getKey())) {
	        bureauMap.put(&quot;pullNewReport&quot;, Boolean.TRUE);                	
        } else {
	        bureauMap.put(&quot;pullNewReport&quot;, Boolean.FALSE);        
	    }
	    if (request.getFreezeCode() != null) {
        	bureauMap.put(&quot;freezeCode&quot;, request.getFreezeCode());            
        }
        
        Context _context = ContextHolder.getContext();
        if (_context != null) {
	        bureauMap.put(&quot;PulledBy&quot;,_context.getUsername());
	    }
                    
        context.setVariable(&quot;bureauInputMap&quot;, bureauMap);</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>// Clear context Variabla bureauInputMap
        context.setVariable(&quot;bureauInputMap&quot;, null);</tns:script>
        </tns:onExit-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>// Set PullReportCustomer to Nul
com.thirdpillar.codify.loanpath.model.Request request = (com.thirdpillar.codify.loanpath.model.Request) context.getVariable(&quot;contextEntity&quot;);
request.setPullReportCustomer(null);
request.setBureauName(null);
request.setFreezeCode(null);
AttributeChoice noChoice =(AttributeChoice) LookupService.getResult(&quot;AttributeChoice.byKey&quot;, &quot;key&quot;,&quot;YES_OR_NO_NO&quot;);
request.setPullNewReport(noChoice);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_143-_144</bpmn2:incoming>
      <bpmn2:outgoing>_144-_145</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_60">
        <bpmn2:dataInput id="_144_inputInput" name="input"/>
        <bpmn2:dataInput id="_144_entityInput" name="entity"/>
        <bpmn2:dataInput id="_144_ServiceNameInput" name="ServiceName"/>
        <bpmn2:inputSet id="InputSet_60">
          <bpmn2:dataInputRefs>_144_inputInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_144_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_144_ServiceNameInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_60"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_148">
        <bpmn2:sourceRef>bureauInputMap</bpmn2:sourceRef>
        <bpmn2:targetRef>_144_inputInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_149">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_144_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_150">
        <bpmn2:targetRef>_144_ServiceNameInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_72">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_143">bureauService</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_144">_144_ServiceNameInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:task id="_145" tns:taskName="SaveEntity" name="Save Request">
      <bpmn2:incoming>_144-_145</bpmn2:incoming>
      <bpmn2:outgoing>_145-_146</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_61">
        <bpmn2:dataInput id="_145_entityInput" name="entity"/>
        <bpmn2:inputSet id="InputSet_61">
          <bpmn2:dataInputRefs>_145_entityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_61"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_151">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_145_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:endEvent id="_146" name="End">
      <bpmn2:incoming>_145-_146</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:scriptTask id="_147" name="Determine CRE" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_35-_147</bpmn2:incoming>
      <bpmn2:outgoing>_147-_148</bpmn2:outgoing>
      <bpmn2:script>Request request = (Request) context.getVariable(&quot;contextEntity&quot;);

String creRequest = &quot;false&quot;;
for (Facility f : request.getAllActiveFacilities()) {
	if (f.getFacilityType() != null &amp;&amp; &quot;CREDIT_FACILITY_TYPE_COMMERCIAL_REAL_ESTATE&quot;.equals(f.getFacilityType().getKey()) ) {
		creRequest = &quot;true&quot;;
	}
}

context.setVariable(&quot;creFlow&quot;, creRequest);</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:exclusiveGateway id="_148" name="Gateway" gatewayDirection="Diverging">
      <bpmn2:incoming>_147-_148</bpmn2:incoming>
      <bpmn2:outgoing>_148-_37</bpmn2:outgoing>
      <bpmn2:outgoing>_148-_179</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:exclusiveGateway id="_149" name="Gateway" gatewayDirection="Converging">
      <bpmn2:incoming>_47-_149</bpmn2:incoming>
      <bpmn2:incoming>_184-_149</bpmn2:incoming>
      <bpmn2:outgoing>_149-_72</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:exclusiveGateway id="_150" name="Gateway" gatewayDirection="Diverging">
      <bpmn2:incoming>_78-_150</bpmn2:incoming>
      <bpmn2:outgoing>_150-_152</bpmn2:outgoing>
      <bpmn2:outgoing>_150-_151</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:exclusiveGateway id="_151" name="Gateway" gatewayDirection="Converging">
      <bpmn2:incoming>_150-_151</bpmn2:incoming>
      <bpmn2:incoming>_166-_151</bpmn2:incoming>
      <bpmn2:outgoing>_151-_79</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:task id="_171" tns:taskName="RuleServiceTask" name="Document Checklist rules">
      <bpmn2:incoming>_170-_171</bpmn2:incoming>
      <bpmn2:outgoing>_171-_172</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_62">
        <bpmn2:dataInput id="_171_entityInput" name="entity"/>
        <bpmn2:dataInput id="_171_agendagroup-nameInput" name="agendagroup-name"/>
        <bpmn2:inputSet id="InputSet_62">
          <bpmn2:dataInputRefs>_171_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_171_agendagroup-nameInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_62"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_152">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_171_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_153">
        <bpmn2:targetRef>_171_agendagroup-nameInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_73">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_145">DocumentChecklistRules</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_146">_171_agendagroup-nameInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:scriptTask id="_170" name="Set RegB Date" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_169-_170</bpmn2:incoming>
      <bpmn2:outgoing>_170-_171</bpmn2:outgoing>
      <bpmn2:script>Request request = (Request) context.getVariable(&quot;contextEntity&quot;);
request.setRegbDttm(request.getReceivedDate());</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:callActivity id="_169" tns:waitForCompletion="true" tns:independent="false" name="Product Status to Pending" calledElement="UpdateProductStatus">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,&quot;FACILITY_STATUS_PENDING&quot;);</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_168-_169</bpmn2:incoming>
      <bpmn2:outgoing>_169-_170</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_63">
        <bpmn2:dataInput id="_169_facilityStatusInput" name="facilityStatus"/>
        <bpmn2:dataInput id="_169_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_63">
          <bpmn2:dataInputRefs>_169_facilityStatusInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_169_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_63"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_154">
        <bpmn2:sourceRef>nextFacilityStatus</bpmn2:sourceRef>
        <bpmn2:targetRef>_169_facilityStatusInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_155">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_169_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:task id="_168" tns:taskName="StatusUpdate" name="Pending - Sales">
      <bpmn2:incoming>_167-_168</bpmn2:incoming>
      <bpmn2:outgoing>_168-_169</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_64">
        <bpmn2:dataInput id="_168_entityInput" name="entity"/>
        <bpmn2:dataInput id="_168_nextStatusKeyInput" name="nextStatusKey"/>
        <bpmn2:inputSet id="InputSet_64">
          <bpmn2:dataInputRefs>_168_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_168_nextStatusKeyInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_64"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_156">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_168_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_157">
        <bpmn2:targetRef>_168_nextStatusKeyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_74">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_147">REQUEST_STATUS_PENDING_SALES</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_148">_168_nextStatusKeyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:intermediateCatchEvent id="_175" name="RequestDisclosureHelp">
      <bpmn2:outgoing>_175-_176</bpmn2:outgoing>
      <bpmn2:signalEventDefinition id="SignalEventDefinition_8" signalRef="RequestDisclosureHelp"/>
    </bpmn2:intermediateCatchEvent>
    <bpmn2:endEvent id="_174" name="End">
      <bpmn2:incoming>_173-_174</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:callActivity id="_173" tns:waitForCompletion="true" tns:independent="false" name="UpdateRequestToSFDC" calledElement="UpdateRequestToSFDC">
      <bpmn2:incoming>_172-_173</bpmn2:incoming>
      <bpmn2:outgoing>_173-_174</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_65">
        <bpmn2:dataInput id="_173_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_65">
          <bpmn2:dataInputRefs>_173_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_65"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_158">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_173_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:task id="_172" tns:taskName="SaveEntity" name="Save Request">
      <bpmn2:incoming>_171-_172</bpmn2:incoming>
      <bpmn2:outgoing>_172-_173</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_66">
        <bpmn2:dataInput id="_172_entityInput" name="entity"/>
        <bpmn2:inputSet id="InputSet_66">
          <bpmn2:dataInputRefs>_172_entityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_66"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_159">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_172_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:callActivity id="_163" tns:waitForCompletion="true" tns:independent="false" name="Product Status Pending" calledElement="UpdateProductStatus">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,&quot;FACILITY_STATUS_PENDING&quot;);</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_162-_163</bpmn2:incoming>
      <bpmn2:outgoing>_163-_164</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_67">
        <bpmn2:dataInput id="_163_facilityStatusInput" name="facilityStatus"/>
        <bpmn2:dataInput id="_163_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_67">
          <bpmn2:dataInputRefs>_163_facilityStatusInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_163_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_67"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_160">
        <bpmn2:sourceRef>nextFacilityStatus</bpmn2:sourceRef>
        <bpmn2:targetRef>_163_facilityStatusInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_161">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_163_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:task id="_162" tns:taskName="StatusUpdate" name="Pending - Appraisal">
      <bpmn2:incoming>_161-_162</bpmn2:incoming>
      <bpmn2:outgoing>_162-_163</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_68">
        <bpmn2:dataInput id="_162_entityInput" name="entity"/>
        <bpmn2:dataInput id="_162_nextStatusKeyInput" name="nextStatusKey"/>
        <bpmn2:inputSet id="InputSet_68">
          <bpmn2:dataInputRefs>_162_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_162_nextStatusKeyInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_68"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_162">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_162_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_163">
        <bpmn2:targetRef>_162_nextStatusKeyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_75">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_149">REQUEST_STATUS_PENDING_APPRAISAL</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_150">_162_nextStatusKeyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:task id="_161" tns:taskName="LPUserTask" name="Pending Pricing Task">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>Team currentTeam = (Team) LookupService.getResult(&quot;Team.byName&quot;,&quot;name&quot;, &quot;Pricing Specialist Team&quot;); 
context.setVariable(&quot;team&quot;, currentTeam);</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;team&quot;, null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_160-_161</bpmn2:incoming>
      <bpmn2:outgoing>_161-_162</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_69">
        <bpmn2:dataInput id="_161_entityInput" name="entity"/>
        <bpmn2:dataInput id="_161_BodyInput" name="Body"/>
        <bpmn2:dataInput id="_161_SubjectInput" name="Subject"/>
        <bpmn2:dataInput id="_161_ToInput" name="To"/>
        <bpmn2:dataInput id="_161_notifyInput" name="notify"/>
        <bpmn2:dataInput id="_161_CommentInput" name="Comment"/>
        <bpmn2:dataInput id="_161_ActionsInput" name="Actions"/>
        <bpmn2:dataInput id="_161_TaskNameInput" name="TaskName"/>
        <bpmn2:dataInput id="_161_ContentInput" name="Content"/>
        <bpmn2:dataInput id="_161_GroupIdInput" name="GroupId"/>
        <bpmn2:dataInput id="_161_Reply-ToInput" name="Reply-To"/>
        <bpmn2:dataInput id="_161_FromInput" name="From"/>
        <bpmn2:dataOutput id="_161_ResultOutput" name="Result"/>
        <bpmn2:inputSet id="InputSet_69">
          <bpmn2:dataInputRefs>_161_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_161_BodyInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_161_SubjectInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_161_ToInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_161_notifyInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_161_CommentInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_161_ActionsInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_161_TaskNameInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_161_ContentInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_161_GroupIdInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_161_Reply-ToInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_161_FromInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_69">
          <bpmn2:dataOutputRefs>_161_ResultOutput</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_164">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_161_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_165">
        <bpmn2:targetRef>_161_BodyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_76">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_151">request_pricing_task_email_body</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_152">_161_BodyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_166">
        <bpmn2:targetRef>_161_SubjectInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_77">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_153">#{contextEntity.account.customerName}: Application #{contextEntity.refNumber}  is  Pending - Pricing</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_154">_161_SubjectInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_167">
        <bpmn2:targetRef>_161_ToInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_78">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_155">#{team.emailAddressForAllUsers}</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_156">_161_ToInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_168">
        <bpmn2:targetRef>_161_notifyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_79">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_157">true</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_158">_161_notifyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_169">
        <bpmn2:targetRef>_161_CommentInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_80">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_159">#{contextEntity.account.customerName}: Application #{contextEntity.refNumber}  is  Pending - Pricing</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_160">_161_CommentInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_170">
        <bpmn2:targetRef>_161_ActionsInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_81">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_161">Complete:Pricing</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_162">_161_ActionsInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_171">
        <bpmn2:targetRef>_161_TaskNameInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_82">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_163">Pricing Analysis</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_164">_161_TaskNameInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_172">
        <bpmn2:targetRef>_161_ContentInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_83">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_165">#{contextEntity.account.customerName}: Application #{contextEntity.refNumber}  is  Pending - Pricing</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_166">_161_ContentInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_173">
        <bpmn2:targetRef>_161_GroupIdInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_84">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_167">#{team.name}</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_168">_161_GroupIdInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_174">
        <bpmn2:targetRef>_161_Reply-ToInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_85">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_169">no-reply@thirdpillar.com</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_170">_161_Reply-ToInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_175">
        <bpmn2:targetRef>_161_FromInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_86">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_171">no-reply@thirdpillar.com</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_172">_161_FromInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="DataOutputAssociation_5">
        <bpmn2:sourceRef>_161_ResultOutput</bpmn2:sourceRef>
        <bpmn2:targetRef>taskAction</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:task>
    <bpmn2:callActivity id="_160" tns:waitForCompletion="true" tns:independent="false" name="Update Request To SFDC" calledElement="UpdateRequestToSFDC">
      <bpmn2:incoming>_159-_160</bpmn2:incoming>
      <bpmn2:outgoing>_160-_161</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_70">
        <bpmn2:dataInput id="_160_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_70">
          <bpmn2:dataInputRefs>_160_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_70"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_176">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_160_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:intermediateCatchEvent id="_167" name="CreateDocumentChecklist">
      <bpmn2:outgoing>_167-_168</bpmn2:outgoing>
      <bpmn2:signalEventDefinition id="SignalEventDefinition_9" signalRef="CreateDocumentChecklist"/>
    </bpmn2:intermediateCatchEvent>
    <bpmn2:task id="_166" tns:taskName="LPUserTask" name="Pending Appraisal Task">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>Team currentTeam = (Team) LookupService.getResult(&quot;Team.byName&quot;,&quot;name&quot;, &quot;Appraisal Specialist Team&quot;); 
context.setVariable(&quot;team&quot;, currentTeam);</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;team&quot;, null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_165-_166</bpmn2:incoming>
      <bpmn2:outgoing>_166-_151</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_71">
        <bpmn2:dataInput id="_166_entityInput" name="entity"/>
        <bpmn2:dataInput id="_166_SwimlaneInput" name="Swimlane"/>
        <bpmn2:dataInput id="_166_BodyInput" name="Body"/>
        <bpmn2:dataInput id="_166_SubjectInput" name="Subject"/>
        <bpmn2:dataInput id="_166_notifyInput" name="notify"/>
        <bpmn2:dataInput id="_166_ToInput" name="To"/>
        <bpmn2:dataInput id="_166_CommentInput" name="Comment"/>
        <bpmn2:dataInput id="_166_ActionsInput" name="Actions"/>
        <bpmn2:dataInput id="_166_ContentInput" name="Content"/>
        <bpmn2:dataInput id="_166_TaskNameInput" name="TaskName"/>
        <bpmn2:dataInput id="_166_GroupIdInput" name="GroupId"/>
        <bpmn2:dataInput id="_166_Reply-ToInput" name="Reply-To"/>
        <bpmn2:dataInput id="_166_FromInput" name="From"/>
        <bpmn2:dataOutput id="_166_ResultOutput" name="Result"/>
        <bpmn2:inputSet id="InputSet_71">
          <bpmn2:dataInputRefs>_166_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_166_SwimlaneInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_166_BodyInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_166_SubjectInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_166_notifyInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_166_ToInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_166_CommentInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_166_ActionsInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_166_ContentInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_166_TaskNameInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_166_GroupIdInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_166_Reply-ToInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_166_FromInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_71">
          <bpmn2:dataOutputRefs>_166_ResultOutput</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_177">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_166_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_178">
        <bpmn2:targetRef>_166_SwimlaneInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_179">
        <bpmn2:targetRef>_166_BodyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_88">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_175">request_appraisal_task_email_body</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_176">_166_BodyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_180">
        <bpmn2:targetRef>_166_SubjectInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_89">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_177">#{contextEntity.account.customerName}: Application #{contextEntity.refNumber}  is  Pending - Appraisal</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_178">_166_SubjectInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_181">
        <bpmn2:targetRef>_166_notifyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_90">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_179">true</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_180">_166_notifyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_182">
        <bpmn2:targetRef>_166_ToInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_91">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_181">#{team.emailAddressForAllUsers}</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_182">_166_ToInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_183">
        <bpmn2:targetRef>_166_CommentInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_92">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_183">#{contextEntity.account.customerName}: Application #{contextEntity.refNumber}  is  Pending - Appraisal</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_184">_166_CommentInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_184">
        <bpmn2:targetRef>_166_ActionsInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_93">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_185">Complete:Appraisal</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_186">_166_ActionsInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_185">
        <bpmn2:targetRef>_166_ContentInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_94">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_187">#{contextEntity.account.customerName}: Application #{contextEntity.refNumber}  is  Pending - Appraisal</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_188">_166_ContentInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_186">
        <bpmn2:targetRef>_166_TaskNameInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_95">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_189">Appraisal Analysis</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_190">_166_TaskNameInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_187">
        <bpmn2:targetRef>_166_GroupIdInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_96">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_191">#{team.name}</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_192">_166_GroupIdInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_188">
        <bpmn2:targetRef>_166_Reply-ToInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_97">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_193">no-reply@thirdpillar.com</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_194">_166_Reply-ToInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_189">
        <bpmn2:targetRef>_166_FromInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_98">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_195">no-reply@thirdpillar.com</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_196">_166_FromInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="DataOutputAssociation_6">
        <bpmn2:sourceRef>_166_ResultOutput</bpmn2:sourceRef>
        <bpmn2:targetRef>taskAction</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:task>
    <bpmn2:callActivity id="_165" tns:waitForCompletion="true" tns:independent="false" name="Update Request To SFDC" calledElement="UpdateRequestToSFDC">
      <bpmn2:incoming>_164-_165</bpmn2:incoming>
      <bpmn2:outgoing>_165-_166</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_72">
        <bpmn2:dataInput id="_165_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_72">
          <bpmn2:dataInputRefs>_165_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_72"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_190">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_165_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:task id="_164" tns:taskName="SaveEntity" name="Save Request">
      <bpmn2:incoming>_163-_164</bpmn2:incoming>
      <bpmn2:outgoing>_164-_165</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_73">
        <bpmn2:dataInput id="_164_entityInput" name="entity"/>
        <bpmn2:inputSet id="InputSet_73">
          <bpmn2:dataInputRefs>_164_entityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_73"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_191">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_164_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:parallelGateway id="_187" name="Gateway" gatewayDirection="Diverging">
      <bpmn2:incoming>_136-_187</bpmn2:incoming>
      <bpmn2:outgoing>_187-_100</bpmn2:outgoing>
      <bpmn2:outgoing>_187-_188</bpmn2:outgoing>
    </bpmn2:parallelGateway>
    <bpmn2:task id="_184" tns:taskName="LPUserTask" name="Sales Support Task">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>Team currentTeam = (Team) LookupService.getResult(&quot;Team.byName&quot;,&quot;name&quot;, &quot;Sales Support Team&quot;); 
context.setVariable(&quot;team&quot;, currentTeam);</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;team&quot;, null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_183-_184</bpmn2:incoming>
      <bpmn2:outgoing>_184-_149</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_74">
        <bpmn2:dataInput id="_184_entityInput" name="entity"/>
        <bpmn2:dataInput id="_184_BodyInput" name="Body"/>
        <bpmn2:dataInput id="_184_SubjectInput" name="Subject"/>
        <bpmn2:dataInput id="_184_ToInput" name="To"/>
        <bpmn2:dataInput id="_184_notifyInput" name="notify"/>
        <bpmn2:dataInput id="_184_CommentInput" name="Comment"/>
        <bpmn2:dataInput id="_184_ActionsInput" name="Actions"/>
        <bpmn2:dataInput id="_184_TaskNameInput" name="TaskName"/>
        <bpmn2:dataInput id="_184_ContentInput" name="Content"/>
        <bpmn2:dataInput id="_184_GroupIdInput" name="GroupId"/>
        <bpmn2:dataInput id="_184_FromInput" name="From"/>
        <bpmn2:dataInput id="_184_Reply-ToInput" name="Reply-To"/>
        <bpmn2:dataOutput id="_184_ResultOutput" name="Result"/>
        <bpmn2:inputSet id="InputSet_74">
          <bpmn2:dataInputRefs>_184_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_184_BodyInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_184_SubjectInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_184_ToInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_184_notifyInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_184_CommentInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_184_ActionsInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_184_TaskNameInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_184_ContentInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_184_GroupIdInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_184_FromInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_184_Reply-ToInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_74">
          <bpmn2:dataOutputRefs>_184_ResultOutput</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_192">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_184_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_193">
        <bpmn2:targetRef>_184_BodyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_99">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_197">request_salesupport_task_email_body</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_198">_184_BodyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_194">
        <bpmn2:targetRef>_184_SubjectInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_100">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_199">#{contextEntity.account.customerName}: Application #{contextEntity.refNumber}  is  Pending - Sales Support</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_200">_184_SubjectInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_195">
        <bpmn2:targetRef>_184_ToInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_101">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_201">#{team.emailAddressForAllUsers}</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_202">_184_ToInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_196">
        <bpmn2:targetRef>_184_notifyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_102">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_203">true</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_204">_184_notifyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_197">
        <bpmn2:targetRef>_184_CommentInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_103">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_205">#{contextEntity.account.customerName}: Application #{contextEntity.refNumber}  is  Pending - Sales Support</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_206">_184_CommentInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_198">
        <bpmn2:targetRef>_184_ActionsInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_104">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_207">Complete:SalesSupport</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_208">_184_ActionsInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_199">
        <bpmn2:targetRef>_184_TaskNameInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_105">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_209">Sales Support Task</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_210">_184_TaskNameInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_200">
        <bpmn2:targetRef>_184_ContentInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_106">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_211">#{contextEntity.account.customerName}: Application #{contextEntity.refNumber}  is  Pending - Sales Support</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_212">_184_ContentInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_201">
        <bpmn2:targetRef>_184_GroupIdInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_107">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_213">#{team.name}</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_214">_184_GroupIdInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_202">
        <bpmn2:targetRef>_184_FromInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_108">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_215">no-reply@thirdpillar.com</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_216">_184_FromInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_203">
        <bpmn2:targetRef>_184_Reply-ToInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_109">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_217">no-reply@thirdpillar.com</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_218">_184_Reply-ToInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="DataOutputAssociation_7">
        <bpmn2:sourceRef>_184_ResultOutput</bpmn2:sourceRef>
        <bpmn2:targetRef>taskAction</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:task>
    <bpmn2:task id="_190" tns:taskName="IntegrationTask" name="Commercial Bureau Integration Call">
      <bpmn2:extensionElements>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;commercialBureauInputMap&quot;, null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_192-_190</bpmn2:incoming>
      <bpmn2:outgoing>_190-_35</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_75">
        <bpmn2:dataInput id="_190_inputInput" name="input"/>
        <bpmn2:dataInput id="_190_entityInput" name="entity"/>
        <bpmn2:dataInput id="_190_ServiceNameInput" name="ServiceName"/>
        <bpmn2:inputSet id="InputSet_75">
          <bpmn2:dataInputRefs>_190_inputInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_190_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_190_ServiceNameInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_75"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_204">
        <bpmn2:sourceRef>commercialBureauInputMap</bpmn2:sourceRef>
        <bpmn2:targetRef>_190_inputInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_205">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_190_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_206">
        <bpmn2:targetRef>_190_ServiceNameInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_110">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_219">bureauService</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_220">_190_ServiceNameInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:exclusiveGateway id="_191" name="Gateway" gatewayDirection="Converging">
      <bpmn2:incoming>_34-_191</bpmn2:incoming>
      <bpmn2:incoming>_36-_191</bpmn2:incoming>
      <bpmn2:outgoing>_191-_192</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:endEvent id="_188" name="End">
      <bpmn2:incoming>_187-_188</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:task id="_189" tns:taskName="RuleServiceTask" name="Covenant Setup">
      <bpmn2:incoming>_84-_189</bpmn2:incoming>
      <bpmn2:outgoing>_189-_85</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_76">
        <bpmn2:dataInput id="_189_entityInput" name="entity"/>
        <bpmn2:dataInput id="_189_agendagroup-nameInput" name="agendagroup-name"/>
        <bpmn2:inputSet id="InputSet_76">
          <bpmn2:dataInputRefs>_189_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_189_agendagroup-nameInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_76"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_207">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_189_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_208">
        <bpmn2:targetRef>_189_agendagroup-nameInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_111">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_221">CovenantAssignmentRules</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_222">_189_agendagroup-nameInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:task id="_178" tns:taskName="RuleServiceTask" name="Document Checklist rules">
      <bpmn2:incoming>_7-_178</bpmn2:incoming>
      <bpmn2:outgoing>_178-_31</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_77">
        <bpmn2:dataInput id="_178_entityInput" name="entity"/>
        <bpmn2:dataInput id="_178_agendagroup-nameInput" name="agendagroup-name"/>
        <bpmn2:inputSet id="InputSet_77">
          <bpmn2:dataInputRefs>_178_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_178_agendagroup-nameInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_77"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_209">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_178_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_210">
        <bpmn2:targetRef>_178_agendagroup-nameInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_112">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_223">DocumentChecklistRules</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_224">_178_agendagroup-nameInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:scriptTask id="_179" name="CRE Flow" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_148-_179</bpmn2:incoming>
      <bpmn2:outgoing>_179-_180</bpmn2:outgoing>
      <bpmn2:script></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:task id="_176" tns:taskName="LPUserTask" name="Disclosure Specialist Task">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>Team currentTeam = (Team) LookupService.getResult(&quot;Team.byName&quot;,&quot;name&quot;, &quot;Disclosures Team&quot;); 
context.setVariable(&quot;team&quot;, currentTeam);</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;team&quot;, null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_175-_176</bpmn2:incoming>
      <bpmn2:outgoing>_176-_177</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_78">
        <bpmn2:dataInput id="_176_entityInput" name="entity"/>
        <bpmn2:dataInput id="_176_BodyInput" name="Body"/>
        <bpmn2:dataInput id="_176_SubjectInput" name="Subject"/>
        <bpmn2:dataInput id="_176_ToInput" name="To"/>
        <bpmn2:dataInput id="_176_notifyInput" name="notify"/>
        <bpmn2:dataInput id="_176_CommentInput" name="Comment"/>
        <bpmn2:dataInput id="_176_ActionsInput" name="Actions"/>
        <bpmn2:dataInput id="_176_ContentInput" name="Content"/>
        <bpmn2:dataInput id="_176_TaskNameInput" name="TaskName"/>
        <bpmn2:dataInput id="_176_GroupIdInput" name="GroupId"/>
        <bpmn2:dataInput id="_176_Reply-ToInput" name="Reply-To"/>
        <bpmn2:dataInput id="_176_FromInput" name="From"/>
        <bpmn2:dataOutput id="_176_ResultOutput" name="Result"/>
        <bpmn2:inputSet id="InputSet_78">
          <bpmn2:dataInputRefs>_176_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_176_BodyInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_176_SubjectInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_176_ToInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_176_notifyInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_176_CommentInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_176_ActionsInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_176_ContentInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_176_TaskNameInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_176_GroupIdInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_176_Reply-ToInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_176_FromInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_78">
          <bpmn2:dataOutputRefs>_176_ResultOutput</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_211">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_176_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_212">
        <bpmn2:targetRef>_176_BodyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_113">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_225">request_disclosurehelp_task_email_body</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_226">_176_BodyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_213">
        <bpmn2:targetRef>_176_SubjectInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_114">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_227">#{contextEntity.account.customerName}: Application #{contextEntity.refNumber} Disclosures Support Request</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_228">_176_SubjectInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_214">
        <bpmn2:targetRef>_176_ToInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_115">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_229">#{team.emailAddressForAllUsers}</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_230">_176_ToInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_215">
        <bpmn2:targetRef>_176_notifyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_116">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_231">true</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_232">_176_notifyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_216">
        <bpmn2:targetRef>_176_CommentInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_117">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_233">#{contextEntity.account.customerName}: Application #{contextEntity.refNumber} Disclosures Support Request</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_234">_176_CommentInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_217">
        <bpmn2:targetRef>_176_ActionsInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_118">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_235">Complete</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_236">_176_ActionsInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_218">
        <bpmn2:targetRef>_176_ContentInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_119">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_237">#{contextEntity.account.customerName}: Application #{contextEntity.refNumber} Disclosures Support Request</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_238">_176_ContentInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_219">
        <bpmn2:targetRef>_176_TaskNameInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_120">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_239">Disclosure Specialist</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_240">_176_TaskNameInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_220">
        <bpmn2:targetRef>_176_GroupIdInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_121">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_241">#{team.name}</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_242">_176_GroupIdInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_221">
        <bpmn2:targetRef>_176_Reply-ToInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_122">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_243">no-reply@thirdpillar.com</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_244">_176_Reply-ToInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_222">
        <bpmn2:targetRef>_176_FromInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_123">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_245">no-reply@thirdpillar.com</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_246">_176_FromInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="DataOutputAssociation_8">
        <bpmn2:sourceRef>_176_ResultOutput</bpmn2:sourceRef>
        <bpmn2:targetRef>taskAction</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:task>
    <bpmn2:endEvent id="_177" name="End">
      <bpmn2:incoming>_176-_177</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:task id="_182" tns:taskName="SaveEntity" name="Save Request">
      <bpmn2:incoming>_181-_182</bpmn2:incoming>
      <bpmn2:outgoing>_182-_183</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_79">
        <bpmn2:dataInput id="_182_entityInput" name="entity"/>
        <bpmn2:inputSet id="InputSet_79">
          <bpmn2:dataInputRefs>_182_entityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_79"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_223">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_182_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:callActivity id="_183" tns:waitForCompletion="true" tns:independent="false" name="UpdateRequestToSFDC" calledElement="UpdateRequestToSFDC">
      <bpmn2:incoming>_182-_183</bpmn2:incoming>
      <bpmn2:outgoing>_183-_184</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_80">
        <bpmn2:dataInput id="_183_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_80">
          <bpmn2:dataInputRefs>_183_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_80"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_224">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_183_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:task id="_180" tns:taskName="StatusUpdate" name="Pending - Sales Support">
      <bpmn2:incoming>_179-_180</bpmn2:incoming>
      <bpmn2:outgoing>_180-_181</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_81">
        <bpmn2:dataInput id="_180_entityInput" name="entity"/>
        <bpmn2:dataInput id="_180_nextStatusKeyInput" name="nextStatusKey"/>
        <bpmn2:inputSet id="InputSet_81">
          <bpmn2:dataInputRefs>_180_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_180_nextStatusKeyInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_81"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_225">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_180_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_226">
        <bpmn2:targetRef>_180_nextStatusKeyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_124">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_247">REQUEST_STATUS_PENDING_SALES_SUPPORT</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_248">_180_nextStatusKeyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:callActivity id="_181" tns:waitForCompletion="true" tns:independent="false" name="Product Status to Pending" calledElement="UpdateProductStatus">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,&quot;FACILITY_STATUS_PENDING&quot;);</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_180-_181</bpmn2:incoming>
      <bpmn2:outgoing>_181-_182</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_82">
        <bpmn2:dataInput id="_181_facilityStatusInput" name="facilityStatus"/>
        <bpmn2:dataInput id="_181_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_82">
          <bpmn2:dataInputRefs>_181_facilityStatusInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_181_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_82"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_227">
        <bpmn2:sourceRef>nextFacilityStatus</bpmn2:sourceRef>
        <bpmn2:targetRef>_181_facilityStatusInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_228">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_181_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:exclusiveGateway id="_192" name="Gateway" gatewayDirection="Diverging">
      <bpmn2:incoming>_191-_192</bpmn2:incoming>
      <bpmn2:outgoing>_192-_35</bpmn2:outgoing>
      <bpmn2:outgoing>_192-_190</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="_5-_7" tns:priority="1" sourceRef="_5" targetRef="_7"/>
    <bpmn2:sequenceFlow id="_46-_12" tns:priority="1" sourceRef="_46" targetRef="_12"/>
    <bpmn2:sequenceFlow id="_21-_16" tns:priority="1" sourceRef="_21" targetRef="_16"/>
    <bpmn2:sequenceFlow id="_22-_21" tns:priority="1" sourceRef="_22" targetRef="_21"/>
    <bpmn2:sequenceFlow id="_12-_21" tns:priority="1" sourceRef="_12" targetRef="_21"/>
    <bpmn2:sequenceFlow id="_26-_25" tns:priority="1" sourceRef="_26" targetRef="_25"/>
    <bpmn2:sequenceFlow id="_23-_24" tns:priority="1" sourceRef="_23" targetRef="_24"/>
    <bpmn2:sequenceFlow id="_25-_27" tns:priority="1" sourceRef="_25" targetRef="_27"/>
    <bpmn2:sequenceFlow id="_24-_26" tns:priority="1" sourceRef="_24" targetRef="_26"/>
    <bpmn2:sequenceFlow id="_30-_31" tns:priority="1" sourceRef="_30" targetRef="_31"/>
    <bpmn2:sequenceFlow id="_69-_31" tns:priority="1" name="Resubmit" sourceRef="_69" targetRef="_31">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_249" language="http://www.java.com/java">String userAction = (String) context.getVariable(&quot;taskAction&quot;);
if (&quot;ReSubmit&quot;.equals(userAction))  {
    return true;
} else {
    return false;
}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_178-_31" tns:priority="1" sourceRef="_178" targetRef="_31"/>
    <bpmn2:sequenceFlow id="_28-_30" tns:priority="1" sourceRef="_28" targetRef="_30"/>
    <bpmn2:sequenceFlow id="_36-_34" tns:priority="1" name="Call Consumer Bureau" sourceRef="_36" targetRef="_34">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_250" language="http://www.java.com/java">java.lang.String callConsumerBureauFlag =(String)(context.getVariable(&quot;callConsumerBureau&quot;));

if(callConsumerBureauFlag.equals(&quot;true&quot;)) {
	return true;
} else {
	return false;
}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_190-_35" tns:priority="1" sourceRef="_190" targetRef="_35"/>
    <bpmn2:sequenceFlow id="_192-_35" tns:priority="1" name="No Commercial Bureau Call " sourceRef="_192" targetRef="_35">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_251" language="http://www.java.com/java">java.lang.String callCommercialBureauFlag =(String)(context.getVariable(&quot;callCommercialBureau&quot;));

if(callCommercialBureauFlag.equals(&quot;true&quot;)) {
	return false;
} else {
	return true;
}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_31-_32" tns:priority="1" sourceRef="_31" targetRef="_32"/>
    <bpmn2:sequenceFlow id="_32-_33" tns:priority="1" sourceRef="_32" targetRef="_33"/>
    <bpmn2:sequenceFlow id="_37-_38" tns:priority="1" sourceRef="_37" targetRef="_38"/>
    <bpmn2:sequenceFlow id="_124-_39" tns:priority="1" sourceRef="_124" targetRef="_39"/>
    <bpmn2:sequenceFlow id="_33-_36" tns:priority="1" sourceRef="_33" targetRef="_36"/>
    <bpmn2:sequenceFlow id="_148-_37" tns:priority="1" name="Non-CRE Flow" sourceRef="_148" targetRef="_37">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_252" language="http://www.java.com/java">String cre = (String) context.getVariable(&quot;creFlow&quot;);
if (&quot;true&quot;.equals(cre)) {
    return false;
} else {
    return true;
}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_41-_42" tns:priority="1" name="Bureau Success" sourceRef="_41" targetRef="_42">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_253" language="http://www.java.com/java">java.lang.String bureauHit=(String)(context.getVariable(&quot;bureauSuccess&quot;));

	if(bureauHit.equals(&quot;true&quot;))
		{
			 return true;
		}
		 else
		{
			 return false;
		}
</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_42-_43" tns:priority="1" sourceRef="_42" targetRef="_43"/>
    <bpmn2:sequenceFlow id="_38-_40" tns:priority="1" name="LessThan 250K" sourceRef="_38" targetRef="_40">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_254" language="http://www.java.com/java">String mcd = (String) context.getVariable(&quot;mcdForLargeLoan&quot;);
if (!&quot;true&quot;.equals(mcd)) {
    return true;
} else {
    return false;
}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_40-_41" tns:priority="1" sourceRef="_40" targetRef="_41"/>
    <bpmn2:sequenceFlow id="_10-_46" tns:priority="1" sourceRef="_10" targetRef="_46"/>
    <bpmn2:sequenceFlow id="_38-_47" tns:priority="1" name="GreaterThan 250K" sourceRef="_38" targetRef="_47">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_255" language="http://www.java.com/java">String mcd = (String) context.getVariable(&quot;mcdForLargeLoan&quot;);
if (&quot;true&quot;.equals(mcd)) {
    return true;
} else {
    return false;
}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_43-_44" tns:priority="1" name="Valid Score" sourceRef="_43" targetRef="_44">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_256" language="http://www.java.com/java">java.lang.String validScore=(String)(context.getVariable(&quot;isValidFicoScore&quot;));

	if(validScore.equals(&quot;true&quot;))
		{
			 return true;
		}
		 else
		{
			 return false;
		}
</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_44-_45" tns:priority="1" sourceRef="_44" targetRef="_45"/>
    <bpmn2:sequenceFlow id="_43-_51" tns:priority="1" name="Invalid Score" sourceRef="_43" targetRef="_51">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_257" language="http://www.java.com/java">java.lang.String validScore=(String)(context.getVariable(&quot;isValidFicoScore&quot;));

	if(!validScore.equals(&quot;true&quot;))
		{
			 return true;
		}
		 else
		{
			 return false;
		}
</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_55-_49" tns:priority="1" sourceRef="_55" targetRef="_49"/>
    <bpmn2:sequenceFlow id="_41-_55" tns:priority="1" name="Bureau Failure" sourceRef="_41" targetRef="_55">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_258" language="http://www.java.com/java">java.lang.String bureauHit=(String)(context.getVariable(&quot;bureauSuccess&quot;));

	if(!bureauHit.equals(&quot;true&quot;))
		{
			 return true;
		}
		 else
		{
			 return false;
		}
</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_45-_55" tns:priority="1" name="Compliance Failed" sourceRef="_45" targetRef="_55">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_259" language="http://www.java.com/java">java.lang.String complianceCheck=(String)(context.getVariable(&quot;complianceSuccess&quot;));

	if(&quot;true&quot;.equals(complianceCheck))
		{
			 return false;
		}
		 else
		{
			 return true;
		}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_54-_55" tns:priority="1" name="Pending Credit Review" sourceRef="_54" targetRef="_55">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_260" language="http://www.java.com/java">String toStatus=(String)(context.getVariable(&quot;moveToStatus&quot;));

	if(toStatus.equals(&quot;PendingCreditReview&quot;))
		{
			 return true;
		}
		 else
		{
			 return false;
		}
</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_51-_54" tns:priority="1" sourceRef="_51" targetRef="_54"/>
    <bpmn2:sequenceFlow id="_71-_58" tns:priority="1" sourceRef="_71" targetRef="_58"/>
    <bpmn2:sequenceFlow id="_54-_56" tns:priority="1" name="Decline Score" sourceRef="_54" targetRef="_56">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_261" language="http://www.java.com/java">String toStatus=(String)(context.getVariable(&quot;moveToStatus&quot;));

	if(toStatus.equals(&quot;DeclineScore&quot;))
		{
			 return true;
		}
		 else
		{
			 return false;
		}
</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_64-_63" tns:priority="1" sourceRef="_64" targetRef="_63"/>
    <bpmn2:sequenceFlow id="_61-_62" tns:priority="1" sourceRef="_61" targetRef="_62"/>
    <bpmn2:sequenceFlow id="_49-_61" tns:priority="1" sourceRef="_49" targetRef="_61"/>
    <bpmn2:sequenceFlow id="_67-_68" tns:priority="1" sourceRef="_67" targetRef="_68"/>
    <bpmn2:sequenceFlow id="_126-_69" tns:priority="1" sourceRef="_126" targetRef="_69"/>
    <bpmn2:sequenceFlow id="_45-_70" tns:priority="1" name="Compliance Success" sourceRef="_45" targetRef="_70">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_262" language="http://www.java.com/java">java.lang.String complianceCheck=(String)(context.getVariable(&quot;complianceSuccess&quot;));

	if(&quot;true&quot;.equals(complianceCheck))
		{
			 return true;
		}
		 else
		{
			 return false;
		}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_69-_70" tns:priority="1" name="Approve" sourceRef="_69" targetRef="_70">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_263" language="http://www.java.com/java">String userAction = (String) context.getVariable(&quot;taskAction&quot;);

if (&quot;Approve&quot;.equals(userAction)) 
{
    return true;
}else{
    return false;
}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_54-_71" tns:priority="1" name="Decline No Score" sourceRef="_54" targetRef="_71">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_264" language="http://www.java.com/java">String toStatus=(String)(context.getVariable(&quot;moveToStatus&quot;));

	if(toStatus.equals(&quot;DeclineNoScore&quot;))
		{
			 return true;
		}
		 else
		{
			 return false;
		}
</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_69-_71" tns:priority="1" name="Decline No Score" sourceRef="_69" targetRef="_71">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_265" language="http://www.java.com/java">String userAction = (String) context.getVariable(&quot;taskAction&quot;);

if (&quot;Decline - No Score&quot;.equals(userAction)) 
{
    return true;
}else{
    return false;
}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_62-_64" tns:priority="1" sourceRef="_62" targetRef="_64"/>
    <bpmn2:sequenceFlow id="_63-_65" tns:priority="1" sourceRef="_63" targetRef="_65"/>
    <bpmn2:sequenceFlow id="_65-_67" tns:priority="1" sourceRef="_65" targetRef="_67"/>
    <bpmn2:sequenceFlow id="_74-_76" tns:priority="1" sourceRef="_74" targetRef="_76"/>
    <bpmn2:sequenceFlow id="_76-_77" tns:priority="1" sourceRef="_76" targetRef="_77"/>
    <bpmn2:sequenceFlow id="_77-_78" tns:priority="1" sourceRef="_77" targetRef="_78"/>
    <bpmn2:sequenceFlow id="_151-_79" tns:priority="1" sourceRef="_151" targetRef="_79"/>
    <bpmn2:sequenceFlow id="_149-_72" tns:priority="1" sourceRef="_149" targetRef="_72"/>
    <bpmn2:sequenceFlow id="_72-_73" tns:priority="1" sourceRef="_72" targetRef="_73"/>
    <bpmn2:sequenceFlow id="_75-_74" tns:priority="1" sourceRef="_75" targetRef="_74"/>
    <bpmn2:sequenceFlow id="_73-_75" tns:priority="1" sourceRef="_73" targetRef="_75"/>
    <bpmn2:sequenceFlow id="_189-_85" tns:priority="1" sourceRef="_189" targetRef="_85"/>
    <bpmn2:sequenceFlow id="_83-_84" tns:priority="1" sourceRef="_83" targetRef="_84"/>
    <bpmn2:sequenceFlow id="_86-_87" tns:priority="1" sourceRef="_86" targetRef="_87"/>
    <bpmn2:sequenceFlow id="_85-_86" tns:priority="1" name="Submit For Decision" sourceRef="_85" targetRef="_86">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_266" language="http://www.java.com/java">String userAction = (String) context.getVariable(&quot;taskAction&quot;);

if (&quot;Submit For Decision&quot;.equals(userAction)) {
    return true;
}else{
    return false;
}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_80-_81" tns:priority="1" sourceRef="_80" targetRef="_81"/>
    <bpmn2:sequenceFlow id="_79-_80" tns:priority="1" sourceRef="_79" targetRef="_80"/>
    <bpmn2:sequenceFlow id="_82-_83" tns:priority="1" sourceRef="_82" targetRef="_83"/>
    <bpmn2:sequenceFlow id="_81-_82" tns:priority="1" sourceRef="_81" targetRef="_82"/>
    <bpmn2:sequenceFlow id="_92-_93" tns:priority="1" name="Approved" sourceRef="_92" targetRef="_93">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_267" language="http://www.java.com/java">com.thirdpillar.codify.loanpath.model.Request reqObj = (com.thirdpillar.codify.loanpath.model.Request) context.getVariable(&quot;contextEntity&quot;);
com.thirdpillar.codify.loanpath.model.Approval approvalObj=reqObj.getApproval();
if(approvalObj.getDecision().getKey().equals(&quot;APPROVAL_DECISION_APPROVED&quot;))
{
    return true;
}
else
{
    return false;
}

</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_91-_92" tns:priority="1" sourceRef="_91" targetRef="_92"/>
    <bpmn2:sequenceFlow id="_93-_95" tns:priority="1" sourceRef="_93" targetRef="_95"/>
    <bpmn2:sequenceFlow id="_92-_94" tns:priority="1" name="Declined" sourceRef="_92" targetRef="_94">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_268" language="http://www.java.com/java">com.thirdpillar.codify.loanpath.model.Request reqObj = (com.thirdpillar.codify.loanpath.model.Request) context.getVariable(&quot;contextEntity&quot;);
com.thirdpillar.codify.loanpath.model.Approval approvalObj=reqObj.getApproval();
if(approvalObj.getDecision().getKey().equals(&quot;APPROVAL_DECISION_APPROVED&quot;))
{
    return false;
}
else
{
    return true;
}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_88-_89" tns:priority="1" sourceRef="_88" targetRef="_89"/>
    <bpmn2:sequenceFlow id="_87-_88" tns:priority="1" sourceRef="_87" targetRef="_88"/>
    <bpmn2:sequenceFlow id="_90-_91" tns:priority="1" sourceRef="_90" targetRef="_91"/>
    <bpmn2:sequenceFlow id="_89-_90" tns:priority="1" sourceRef="_89" targetRef="_90"/>
    <bpmn2:sequenceFlow id="_101-_102" tns:priority="1" sourceRef="_101" targetRef="_102"/>
    <bpmn2:sequenceFlow id="_139-_100" tns:priority="1" sourceRef="_139" targetRef="_100"/>
    <bpmn2:sequenceFlow id="_187-_100" tns:priority="1" sourceRef="_187" targetRef="_100"/>
    <bpmn2:sequenceFlow id="_70-_101" tns:priority="1" sourceRef="_70" targetRef="_101"/>
    <bpmn2:sequenceFlow id="_100-_98" tns:priority="1" sourceRef="_100" targetRef="_98"/>
    <bpmn2:sequenceFlow id="_98-_99" tns:priority="1" sourceRef="_98" targetRef="_99"/>
    <bpmn2:sequenceFlow id="_94-_96" tns:priority="1" sourceRef="_94" targetRef="_96"/>
    <bpmn2:sequenceFlow id="_95-_97" tns:priority="1" sourceRef="_95" targetRef="_97"/>
    <bpmn2:sequenceFlow id="_107-_110" tns:priority="1" sourceRef="_107" targetRef="_110"/>
    <bpmn2:sequenceFlow id="_110-_111" tns:priority="1" sourceRef="_110" targetRef="_111"/>
    <bpmn2:sequenceFlow id="_118-_111" tns:priority="1" sourceRef="_118" targetRef="_111"/>
    <bpmn2:sequenceFlow id="_56-_107" tns:priority="1" sourceRef="_56" targetRef="_107"/>
    <bpmn2:sequenceFlow id="_115-_119" tns:priority="1" sourceRef="_115" targetRef="_119"/>
    <bpmn2:sequenceFlow id="_99-_119" tns:priority="1" sourceRef="_99" targetRef="_119"/>
    <bpmn2:sequenceFlow id="_116-_118" tns:priority="1" sourceRef="_116" targetRef="_118"/>
    <bpmn2:sequenceFlow id="_58-_116" tns:priority="1" sourceRef="_58" targetRef="_116"/>
    <bpmn2:sequenceFlow id="_114-_115" tns:priority="1" sourceRef="_114" targetRef="_115"/>
    <bpmn2:sequenceFlow id="_113-_114" tns:priority="1" sourceRef="_113" targetRef="_114"/>
    <bpmn2:sequenceFlow id="_112-_113" tns:priority="1" sourceRef="_112" targetRef="_113"/>
    <bpmn2:sequenceFlow id="_111-_112" tns:priority="1" sourceRef="_111" targetRef="_112"/>
    <bpmn2:sequenceFlow id="_68-_126" tns:priority="1" sourceRef="_68" targetRef="_126"/>
    <bpmn2:sequenceFlow id="_123-_125" tns:priority="1" name="Call Provision Customer Integration" sourceRef="_123" targetRef="_125">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_269" language="http://www.java.com/java">String  call = (String ) context.getVariable(&quot;callProvision&quot;);

if (&quot;true&quot;.equals(call)) {
	return true;
} else {
	return false;
}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_123-_124" tns:priority="1" name="Skip Provision Call" sourceRef="_123" targetRef="_124">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_270" language="http://www.java.com/java">String call = (String) context.getVariable(&quot;callProvision&quot;);

if (&quot;true&quot;.equals(call)) {
	return false;
} else {
	return true;
}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_125-_124" tns:priority="1" sourceRef="_125" targetRef="_124"/>
    <bpmn2:sequenceFlow id="_122-_123" tns:priority="1" sourceRef="_122" targetRef="_123"/>
    <bpmn2:sequenceFlow id="_120-_122" tns:priority="1" sourceRef="_120" targetRef="_122"/>
    <bpmn2:sequenceFlow id="_119-_121" tns:priority="1" sourceRef="_119" targetRef="_121"/>
    <bpmn2:sequenceFlow id="_121-_120" tns:priority="1" sourceRef="_121" targetRef="_120"/>
    <bpmn2:sequenceFlow id="_96-_137" tns:priority="1" sourceRef="_96" targetRef="_137"/>
    <bpmn2:sequenceFlow id="_134-_136" tns:priority="1" sourceRef="_134" targetRef="_136"/>
    <bpmn2:sequenceFlow id="_137-_139" tns:priority="1" sourceRef="_137" targetRef="_139"/>
    <bpmn2:sequenceFlow id="_140-_141" tns:priority="1" sourceRef="_140" targetRef="_141"/>
    <bpmn2:sequenceFlow id="_141-_142" tns:priority="1" sourceRef="_141" targetRef="_142"/>
    <bpmn2:sequenceFlow id="_128-_129" tns:priority="1" sourceRef="_128" targetRef="_129"/>
    <bpmn2:sequenceFlow id="_133-_129" tns:priority="1" sourceRef="_133" targetRef="_129"/>
    <bpmn2:sequenceFlow id="_85-_128" tns:priority="1" name="Return to Sales" sourceRef="_85" targetRef="_128">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_271" language="http://www.java.com/java">String userAction = (String) context.getVariable(&quot;taskAction&quot;);

if (&quot;Return To Sales&quot;.equals(userAction)) {
    return true;
}else{
    return false;
}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_130-_131" tns:priority="1" sourceRef="_130" targetRef="_131"/>
    <bpmn2:sequenceFlow id="_129-_130" tns:priority="1" sourceRef="_129" targetRef="_130"/>
    <bpmn2:sequenceFlow id="_85-_133" tns:priority="1" name="NOIA" sourceRef="_85" targetRef="_133">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_272" language="http://www.java.com/java">String userAction = (String) context.getVariable(&quot;taskAction&quot;);
if (&quot;NOIA&quot;.equals(userAction)) {
    return true;
}else{
    return false;
}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_131-_132" tns:priority="1" sourceRef="_131" targetRef="_132"/>
    <bpmn2:sequenceFlow id="_97-_134" tns:priority="1" sourceRef="_97" targetRef="_134"/>
    <bpmn2:sequenceFlow id="_150-_152" tns:priority="1" name="CRE - Flow" sourceRef="_150" targetRef="_152">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_273" language="http://www.java.com/java">String cre = (String) context.getVariable(&quot;creFlow&quot;);
if (&quot;true&quot;.equals(cre)) {
    return true;
} else {
    return false;
}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_152-_153" tns:priority="1" sourceRef="_152" targetRef="_153"/>
    <bpmn2:sequenceFlow id="_153-_154" tns:priority="1" sourceRef="_153" targetRef="_154"/>
    <bpmn2:sequenceFlow id="_154-_155" tns:priority="1" sourceRef="_154" targetRef="_155"/>
    <bpmn2:sequenceFlow id="_155-_156" tns:priority="1" sourceRef="_155" targetRef="_156"/>
    <bpmn2:sequenceFlow id="_156-_157" tns:priority="1" sourceRef="_156" targetRef="_157"/>
    <bpmn2:sequenceFlow id="_157-_158" tns:priority="1" sourceRef="_157" targetRef="_158"/>
    <bpmn2:sequenceFlow id="_158-_159" tns:priority="1" sourceRef="_158" targetRef="_159"/>
    <bpmn2:sequenceFlow id="_143-_144" tns:priority="1" sourceRef="_143" targetRef="_144"/>
    <bpmn2:sequenceFlow id="_144-_145" tns:priority="1" sourceRef="_144" targetRef="_145"/>
    <bpmn2:sequenceFlow id="_145-_146" tns:priority="1" sourceRef="_145" targetRef="_146"/>
    <bpmn2:sequenceFlow id="_35-_147" tns:priority="1" sourceRef="_35" targetRef="_147"/>
    <bpmn2:sequenceFlow id="_147-_148" tns:priority="1" sourceRef="_147" targetRef="_148"/>
    <bpmn2:sequenceFlow id="_47-_149" tns:priority="1" sourceRef="_47" targetRef="_149"/>
    <bpmn2:sequenceFlow id="_184-_149" tns:priority="1" sourceRef="_184" targetRef="_149"/>
    <bpmn2:sequenceFlow id="_78-_150" tns:priority="1" sourceRef="_78" targetRef="_150"/>
    <bpmn2:sequenceFlow id="_150-_151" tns:priority="1" name="Non-CRE Flow" sourceRef="_150" targetRef="_151">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_274" language="http://www.java.com/java">String cre = (String) context.getVariable(&quot;creFlow&quot;);
if (&quot;true&quot;.equals(cre)) {
    return false;
} else {
    return true;
}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_166-_151" tns:priority="1" sourceRef="_166" targetRef="_151"/>
    <bpmn2:sequenceFlow id="_170-_171" tns:priority="1" sourceRef="_170" targetRef="_171"/>
    <bpmn2:sequenceFlow id="_169-_170" tns:priority="1" sourceRef="_169" targetRef="_170"/>
    <bpmn2:sequenceFlow id="_168-_169" tns:priority="1" sourceRef="_168" targetRef="_169"/>
    <bpmn2:sequenceFlow id="_167-_168" tns:priority="1" sourceRef="_167" targetRef="_168"/>
    <bpmn2:sequenceFlow id="_173-_174" tns:priority="1" sourceRef="_173" targetRef="_174"/>
    <bpmn2:sequenceFlow id="_172-_173" tns:priority="1" sourceRef="_172" targetRef="_173"/>
    <bpmn2:sequenceFlow id="_171-_172" tns:priority="1" sourceRef="_171" targetRef="_172"/>
    <bpmn2:sequenceFlow id="_162-_163" tns:priority="1" sourceRef="_162" targetRef="_163"/>
    <bpmn2:sequenceFlow id="_161-_162" tns:priority="1" sourceRef="_161" targetRef="_162"/>
    <bpmn2:sequenceFlow id="_160-_161" tns:priority="1" sourceRef="_160" targetRef="_161"/>
    <bpmn2:sequenceFlow id="_159-_160" tns:priority="1" sourceRef="_159" targetRef="_160"/>
    <bpmn2:sequenceFlow id="_165-_166" tns:priority="1" sourceRef="_165" targetRef="_166"/>
    <bpmn2:sequenceFlow id="_164-_165" tns:priority="1" sourceRef="_164" targetRef="_165"/>
    <bpmn2:sequenceFlow id="_163-_164" tns:priority="1" sourceRef="_163" targetRef="_164"/>
    <bpmn2:sequenceFlow id="_136-_187" tns:priority="1" sourceRef="_136" targetRef="_187"/>
    <bpmn2:sequenceFlow id="_183-_184" tns:priority="1" sourceRef="_183" targetRef="_184"/>
    <bpmn2:sequenceFlow id="_192-_190" tns:priority="1" name="Commercial Bureau Call" sourceRef="_192" targetRef="_190">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_275" language="http://www.java.com/java">java.lang.String callCommercialBureauFlag =(String)(context.getVariable(&quot;callCommercialBureau&quot;));

if(callCommercialBureauFlag.equals(&quot;true&quot;)) {
	return true;
} else {
	return false;
}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_36-_191" tns:priority="1" name="No Consumer Bureau Call" sourceRef="_36" targetRef="_191">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_276" language="http://www.java.com/java">java.lang.String callConsumerBureauFlag =(String)(context.getVariable(&quot;callConsumerBureau&quot;));

if(callConsumerBureauFlag.equals(&quot;true&quot;)) {
	return false;
} else {
	return true;
}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_187-_188" tns:priority="1" sourceRef="_187" targetRef="_188"/>
    <bpmn2:sequenceFlow id="_84-_189" tns:priority="1" sourceRef="_84" targetRef="_189"/>
    <bpmn2:sequenceFlow id="_7-_178" tns:priority="1" sourceRef="_7" targetRef="_178"/>
    <bpmn2:sequenceFlow id="_148-_179" tns:priority="1" name="CRE Flow" sourceRef="_148" targetRef="_179">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_277" language="http://www.java.com/java">String cre = (String) context.getVariable(&quot;creFlow&quot;);
if (&quot;true&quot;.equals(cre)) {
    return true;
} else {
    return false;
}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_175-_176" tns:priority="1" sourceRef="_175" targetRef="_176"/>
    <bpmn2:sequenceFlow id="_176-_177" tns:priority="1" sourceRef="_176" targetRef="_177"/>
    <bpmn2:sequenceFlow id="_181-_182" tns:priority="1" sourceRef="_181" targetRef="_182"/>
    <bpmn2:sequenceFlow id="_182-_183" tns:priority="1" sourceRef="_182" targetRef="_183"/>
    <bpmn2:sequenceFlow id="_179-_180" tns:priority="1" sourceRef="_179" targetRef="_180"/>
    <bpmn2:sequenceFlow id="_180-_181" tns:priority="1" sourceRef="_180" targetRef="_181"/>
    <bpmn2:sequenceFlow id="_191-_192" tns:priority="1" sourceRef="_191" targetRef="_192"/>
    <bpmn2:scriptTask id="_102" name="Set Product Decision" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_101-_102</bpmn2:incoming>
      <bpmn2:outgoing>_102-_103</bpmn2:outgoing>
      <bpmn2:script>Request r = (Request) context.getVariable(&quot;contextEntity&quot;);
for (Facility f : r.getDecisionFacilities()) {
	if(f.getFacilityCategory()!=null &amp;&amp; f.getFacilityCategory().getKey().equals(&quot;PROJECT&quot;)) {
	    Calendar now = Calendar.getInstance();
    	now.add(Calendar.MONTH,9);
	    Date date=now.getTime();
    	f.setApprovalExpirationDate(date);
	} else if(f.getFacilityCategory()!=null &amp;&amp; f.getFacilityCategory().getKey().equals(&quot;NON_PROJECT&quot;)) {
    	Calendar now = Calendar.getInstance();
	    now.add(java.util.Calendar.MONTH,6);
    	Date date=now.getTime();
	    f.setApprovalExpirationDate(date);
	}	
	
	f.setApprovedLoanAmt(f.getRequestedLoanAmt());
}</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="_102-_103" tns:priority="1" sourceRef="_102" targetRef="_103"/>
    <bpmn2:callActivity id="_103" tns:waitForCompletion="true" tns:independent="false" name="Product Status - Approved" calledElement="UpdateProductStatus">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,&quot;FACILITY_STATUS_APPROVED&quot;);</tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;nextFacilityStatus&quot;,null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_102-_103</bpmn2:incoming>
      <bpmn2:outgoing>_103-_57</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_39">
        <bpmn2:dataInput id="_103_facilityStatusInput" name="facilityStatus"/>
        <bpmn2:dataInput id="_103_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_39">
          <bpmn2:dataInputRefs>_103_facilityStatusInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_103_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_39"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_98">
        <bpmn2:sourceRef>nextFacilityStatus</bpmn2:sourceRef>
        <bpmn2:targetRef>_103_facilityStatusInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_99">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_103_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:sequenceFlow id="_103-_57" tns:priority="1" sourceRef="_103" targetRef="_57"/>
    <bpmn2:scriptTask id="_57" name="Setup Approval Level" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_103-_57</bpmn2:incoming>
      <bpmn2:outgoing>_57-_104</bpmn2:outgoing>
      <bpmn2:script>//System.out.println(&quot;*************************** Setting Decisions**************************************&quot;);

Request request=(Request)context.getVariable(&quot;contextEntity&quot;);

String decisionKey=&quot;APPROVAL_DECISION_APPROVED&quot;;
	
AttributeChoice decision =(AttributeChoice) LookupService.getResult(&quot;AttributeChoice.byKey&quot;, &quot;key&quot;,decisionKey);
Context ctx =ContextHolder.getContext();
String decisionFrmTask=(String) context.getVariable(&quot;manualDecision&quot;);
	
if( request.getApproval()!=null &amp;&amp; request.getApproval().getApprovalLevels()!=null &amp;&amp; request.getApproval().getApprovalLevels().size()>0) {
	User user= null;
	if(decisionFrmTask!=null &amp;&amp; decisionFrmTask.equals(&quot;true&quot;)) { 
		user=(User)ctx.getUser(); 
	} else {
		user=(User) LookupService.getResult(&quot;User.byUsername&quot;, &quot;username&quot;, &quot;SYSTEM&quot;);
	}
	
	if(user != null) {
		request.getApproval().getApprovalLevels().get(0).getApproverList().get(0).setUser(user);
	}
	
	//As per Requirement there will be only one ApprovalLevel and one Approver in the application.
    request.getApproval().getApprovalLevels().get(0).getApproverList().get(0).setDecision(decision);
    request.getApproval().getApprovalLevels().get(0).setDecision(decision);
	request.getApproval().getApprovalLevels().get(0).getMetaInfo().setLastModifiedAt(new java.util.Date());
} else {
	Approval requestApproval=request.getApproval();
	User user=null;
	EntityService es = new EntityService();		
	if(requestApproval==null) {
		requestApproval= (Approval) es.createNew(Approval.class);
	}

	ApprovalLevel level1= (ApprovalLevel) es.createNew(ApprovalLevel.class);
	        
	//Creating Approvers
	Approver approver=(Approver) es.createNew(Approver.class);
	if(decisionFrmTask!=null &amp;&amp; decisionFrmTask.equals(&quot;true&quot;))  {
		user=(User)ctx.getUser();
	} else {
		user=(User) LookupService.getResult(&quot;User.byUsername&quot;, &quot;username&quot;, &quot;SYSTEM&quot;);
	}
			
	if(user!=null) {
		approver.setUser(user);
		approver.setDecision(decision);
		approver.setApprovalLevel(level1);
	}

	//Seting Approval Level
	level1.addToApproverList(approver);
	level1.setApproval(requestApproval);
	level1.setDecision(decision);
	level1.setName(&quot;Level 1&quot;);
			 			 
	//System.out.println(&quot;***************************** Creating Approval *****************************************&quot;);
	requestApproval.addToApprovalLevels(level1);
	requestApproval.setDecision(decision);
	request.setApproval(requestApproval);
}
	
request.setFinalDecisionDate(new java.util.Date());
request.getApproval().setDecision(decision);
context.setVariable(&quot;requestDecision&quot;,decisionKey);

   //Clearing DecisionFromTask Variable .
	context.setVariable(&quot;decisionFromTask&quot;,null);
	
</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="_57-_104" tns:priority="1" sourceRef="_57" targetRef="_104"/>
    <bpmn2:scriptTask id="_104" name="Prepare Customer email List" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_57-_104</bpmn2:incoming>
      <bpmn2:outgoing>_104-_106</bpmn2:outgoing>
      <bpmn2:script>Request request=(Request)context.getVariable(&quot;contextEntity&quot;);
Set&lt;Customer> customerList = request.getAllCustomersInRoles(&quot;PARTY_ROLE_TYPE_BORROWER&quot;);
context.setVariable(&quot;requestCustomers&quot;,customerList); 
   
// Getting list of Borrowers
List&lt;FacilityCustomerRole> borrowerList = request.getAllCustomerRolesInRoles(&quot;PARTY_ROLE_TYPE_BORROWER&quot;);

String customerName=&quot;&quot;;
if(borrowerList!=null &amp;&amp; borrowerList.size()>0) {
    for (FacilityCustomerRole borrower : borrowerList) {
		if(borrower.getPrimaryBorrower()) {
			customerName=borrower.getCustomer().getCustomerName();
			break;
		}
	}
}
context.setVariable(&quot;borrowerName&quot;,customerName);
</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="_104-_106" tns:priority="1" sourceRef="_104" targetRef="_106"/>
    <bpmn2:scriptTask id="_106" name="Clear Customer email List" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_104-_106</bpmn2:incoming>
      <bpmn2:outgoing>_106-_119</bpmn2:outgoing>
      <bpmn2:script>context.setVariable(&quot;requestCustomers&quot;,null);
context.setVariable(&quot;borrowerName&quot;,null);</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="_106-_119" tns:priority="1" sourceRef="_106" targetRef="_119"/>
    <bpmn2:task id="_3" tns:taskName="WaitState" name="Request Flow Wait">
      <bpmn2:incoming>_1-_3</bpmn2:incoming>
      <bpmn2:outgoing>_3-_4</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_1">
        <bpmn2:inputSet id="InputSet_1"/>
        <bpmn2:outputSet id="OutputSet_1"/>
      </bpmn2:ioSpecification>
    </bpmn2:task>
    <bpmn2:sequenceFlow id="_3-_4" tns:priority="1" sourceRef="_3" targetRef="_4"/>
    <bpmn2:startEvent id="_1" name="Start">
      <bpmn2:outgoing>_1-_3</bpmn2:outgoing>
    </bpmn2:startEvent>
    <bpmn2:sequenceFlow id="_1-_3" tns:priority="1" sourceRef="_1" targetRef="_3"/>
    <bpmn2:endEvent id="_4" name="End">
      <bpmn2:incoming>_3-_4</bpmn2:incoming>
      <bpmn2:terminateEventDefinition id="TerminateEventDefinition_1"/>
    </bpmn2:endEvent>
    <bpmn2:scriptTask id="_16" name="Set Portal Access Key" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_21-_16</bpmn2:incoming>
      <bpmn2:outgoing>_16-_17</bpmn2:outgoing>
      <bpmn2:script>//setting portalAccessKey
Request request=(Request)context.getVariable(&quot;contextEntity&quot;);
request.setPortalAccessKey(org.apache.commons.lang.RandomStringUtils.randomAlphanumeric(16));</bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="_16-_17" tns:priority="1" sourceRef="_16" targetRef="_17"/>
    <bpmn2:scriptTask id="_17" name="Prepare Customer Email List" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_16-_17</bpmn2:incoming>
      <bpmn2:outgoing>_17-_18</bpmn2:outgoing>
      <bpmn2:script>Request request=(Request)context.getVariable(&quot;contextEntity&quot;);
List&lt;FacilityCustomerRole> borrowerRoles = request.getAllCustomerRolesInRoles(&quot;PARTY_ROLE_TYPE_BORROWER&quot;);
       
StringBuilder buffer=new StringBuilder();
Customer customer = null;
if(borrowerRoles!=null &amp;&amp; borrowerRoles.size()>0) {
	for(FacilityCustomerRole role : borrowerRoles) {
    	if(role.getCustomer().isIndividual()) {
        	customer = role.getCustomer();
		} else {
        	FacilityCustomerRole contactRole = role.getPrimaryContactRole();
            if (contactRole != null) {
	        	customer = contactRole.getCustomer();
			}
		}
                    
        if (customer != null &amp;&amp; customer.getPrimarySite()!=null 
					&amp;&amp; customer.getPrimarySite().getSiteDetails()!=null 
                	&amp;&amp; customer.getPrimarySite().getSiteDetails().getEmail()!=null 
                	&amp;&amp; customer.getPrimarySite().getSiteDetails().getEmail() != &quot;&quot;) {
			String email=customer.getPrimarySite().getSiteDetails().getEmail();
            buffer = buffer.append(email).append(&quot;;&quot;);
		}
	}
}
       
context.setVariable(&quot;customersEmailList&quot;,buffer.toString());
       
// Getting list of Borrowers
Set&lt;Customer> borrowerSet = request.getAllCustomersInRoles(&quot;PARTY_ROLE_TYPE_BORROWER&quot;);
       
String customerName=&quot;&quot;;
String customerFirstName=&quot;&quot;;
StringBuffer borrowerBuffer=new StringBuffer();
if(customer !=null) {
	customerName=customer.getCustomerName();
    customerFirstName=customer.getFirstName();
}
context.setVariable(&quot;borrowerName&quot;,customerName);
context.setVariable(&quot;borrowerFirstName&quot;,customerFirstName);
       </bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="_17-_18" tns:priority="1" sourceRef="_17" targetRef="_18"/>
    <bpmn2:task id="_18" tns:taskName="NotificationTask" name="Welcome Email">
      <bpmn2:extensionElements>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;customersEmailList&quot;,null);
context.setVariable(&quot;borrowerFirstName&quot;,null);
context.setVariable(&quot;borrowerName&quot;,null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_17-_18</bpmn2:incoming>
      <bpmn2:outgoing>_18-_15</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_6">
        <bpmn2:dataInput id="_18_entityInput" name="entity"/>
        <bpmn2:dataInput id="_18_firstNameInput" name="firstName"/>
        <bpmn2:dataInput id="_18_BodyInput" name="Body"/>
        <bpmn2:dataInput id="_18_SubjectInput" name="Subject"/>
        <bpmn2:dataInput id="_18_ToInput" name="To"/>
        <bpmn2:dataInput id="_18_Reply-ToInput" name="Reply-To"/>
        <bpmn2:dataInput id="_18_FromInput" name="From"/>
        <bpmn2:inputSet id="InputSet_6">
          <bpmn2:dataInputRefs>_18_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_18_firstNameInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_18_BodyInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_18_SubjectInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_18_ToInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_18_Reply-ToInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_18_FromInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_6"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_7">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_18_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_8">
        <bpmn2:sourceRef>borrowerFirstName</bpmn2:sourceRef>
        <bpmn2:targetRef>_18_firstNameInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_9">
        <bpmn2:targetRef>_18_BodyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_1">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_1">request_login_email_body</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_2">_18_BodyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_10">
        <bpmn2:targetRef>_18_SubjectInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_2">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_3">Credit Request #{contextEntity.refNumber}</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_4">_18_SubjectInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_11">
        <bpmn2:targetRef>_18_ToInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_3">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_5">#{customersEmailList}</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_6">_18_ToInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_12">
        <bpmn2:targetRef>_18_Reply-ToInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_4">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_7">no-reply@thirdpillar.com</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_8">_18_Reply-ToInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_13">
        <bpmn2:targetRef>_18_FromInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_5">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_9">no-reply@thirdpillar.com</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_10">_18_FromInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:sequenceFlow id="_18-_15" tns:priority="1" sourceRef="_18" targetRef="_15"/>
    <bpmn2:task id="_15" tns:taskName="SaveEntity" name="Save Request">
      <bpmn2:incoming>_18-_15</bpmn2:incoming>
      <bpmn2:outgoing>_15-_19</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_4">
        <bpmn2:dataInput id="_15_entityInput" name="entity"/>
        <bpmn2:inputSet id="InputSet_4">
          <bpmn2:dataInputRefs>_15_entityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_4"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_5">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_15_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:sequenceFlow id="_15-_19" tns:priority="1" sourceRef="_15" targetRef="_19"/>
    <bpmn2:callActivity id="_19" tns:waitForCompletion="true" tns:independent="false" name="UpdateRequestToSFDC" calledElement="UpdateRequestToSFDC">
      <bpmn2:incoming>_15-_19</bpmn2:incoming>
      <bpmn2:outgoing>_19-_20</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_5">
        <bpmn2:dataInput id="_19_contextEntityInput" name="contextEntity"/>
        <bpmn2:inputSet id="InputSet_5">
          <bpmn2:dataInputRefs>_19_contextEntityInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_5"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_6">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_19_contextEntityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:callActivity>
    <bpmn2:sequenceFlow id="_19-_20" tns:priority="1" sourceRef="_19" targetRef="_20"/>
    <bpmn2:task id="_34" tns:taskName="IntegrationTask" name="Consumer Bureau Integration Call">
      <bpmn2:extensionElements>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script>context.setVariable(&quot;consumerBureauInputMap&quot;, null);</tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_36-_34</bpmn2:incoming>
      <bpmn2:outgoing>_34-_191</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_10">
        <bpmn2:dataInput id="_34_inputInput" name="input"/>
        <bpmn2:dataInput id="_34_entityInput" name="entity"/>
        <bpmn2:dataInput id="_34_ServiceNameInput" name="ServiceName"/>
        <bpmn2:inputSet id="InputSet_10">
          <bpmn2:dataInputRefs>_34_inputInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_34_entityInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_34_ServiceNameInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_10"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_18">
        <bpmn2:sourceRef>consumerBureauInputMap</bpmn2:sourceRef>
        <bpmn2:targetRef>_34_inputInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_19">
        <bpmn2:sourceRef>contextEntity</bpmn2:sourceRef>
        <bpmn2:targetRef>_34_entityInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_20">
        <bpmn2:targetRef>_34_ServiceNameInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_7">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_13">bureauService</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_14">_34_ServiceNameInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:sequenceFlow id="_34-_191" tns:priority="1" sourceRef="_34" targetRef="_191"/>
  </bpmn2:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_Process_1" bpmnElement="RequestFlow">
      <bpmndi:BPMNShape id="BPMNShape_StartEvent_1" bpmnElement="_1">
        <dc:Bounds height="48.0" width="48.0" x="64.0" y="31.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_1" bpmnElement="_3">
        <dc:Bounds height="48.0" width="148.0" x="14.0" y="115.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_EndEvent_1" bpmnElement="_4">
        <dc:Bounds height="48.0" width="48.0" x="64.0" y="210.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_IntermediateCatchEvent_1" bpmnElement="_5">
        <dc:Bounds height="48.0" width="48.0" x="248.0" y="30.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_1" bpmnElement="_7" isExpanded="true">
        <dc:Bounds height="48.0" width="187.0" x="176.0" y="147.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_IntermediateCatchEvent_2" bpmnElement="_10">
        <dc:Bounds height="48.0" width="48.0" x="500.0" y="23.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_2" bpmnElement="_12" isExpanded="true">
        <dc:Bounds height="48.0" width="177.0" x="439.0" y="209.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_2" bpmnElement="_15">
        <dc:Bounds height="48.0" width="153.0" x="457.0" y="729.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_1" bpmnElement="_17">
        <dc:Bounds height="48.0" width="153.0" x="457.0" y="556.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_2" bpmnElement="_16">
        <dc:Bounds height="48.0" width="153.0" x="457.0" y="462.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_3" bpmnElement="_19" isExpanded="true">
        <dc:Bounds height="48.0" width="153.0" x="457.0" y="814.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_3" bpmnElement="_18">
        <dc:Bounds height="48.0" width="153.0" x="457.0" y="638.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_1" bpmnElement="_21" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="506.0" y="382.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_EndEvent_2" bpmnElement="_20">
        <dc:Bounds height="48.0" width="48.0" x="512.0" y="907.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_IntermediateCatchEvent_3" bpmnElement="_23">
        <dc:Bounds height="48.0" width="48.0" x="816.0" y="22.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_IntermediateCatchEvent_4" bpmnElement="_22">
        <dc:Bounds height="48.0" width="48.0" x="687.0" y="28.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_4" bpmnElement="_25" isExpanded="true">
        <dc:Bounds height="48.0" width="160.0" x="761.0" y="300.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_4" bpmnElement="_24">
        <dc:Bounds height="48.0" width="216.0" x="735.0" y="112.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_EndEvent_3" bpmnElement="_27">
        <dc:Bounds height="48.0" width="48.0" x="822.0" y="387.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_5" bpmnElement="_26">
        <dc:Bounds height="48.0" width="100.0" x="794.0" y="195.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_IntermediateCatchEvent_5" bpmnElement="_28">
        <dc:Bounds height="48.0" width="48.0" x="1078.0" y="1.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_2" bpmnElement="_31" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="1073.0" y="250.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_3" bpmnElement="_30">
        <dc:Bounds height="48.0" width="161.0" x="1022.0" y="166.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_6" bpmnElement="_34">
        <dc:Bounds height="48.0" width="241.0" x="680.0" y="469.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_3" bpmnElement="_35" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="1167.0" y="585.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_7" bpmnElement="_32">
        <dc:Bounds height="48.0" width="160.0" x="1024.0" y="327.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_4" bpmnElement="_33">
        <dc:Bounds height="48.0" width="223.0" x="997.0" y="408.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_4" bpmnElement="_38" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="1075.0" y="916.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_EndEvent_4" bpmnElement="_39">
        <dc:Bounds height="48.0" width="48.0" x="1732.0" y="3466.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_5" bpmnElement="_36" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="1084.0" y="484.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_5" bpmnElement="_37">
        <dc:Bounds height="48.0" width="178.0" x="1012.0" y="844.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_6" bpmnElement="_42">
        <dc:Bounds height="48.0" width="270.0" x="967.0" y="1136.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_6" bpmnElement="_43" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="1070.0" y="1211.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_7" bpmnElement="_40">
        <dc:Bounds height="48.0" width="167.0" x="1020.0" y="991.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_7" bpmnElement="_41" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="1072.0" y="1059.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_8" bpmnElement="_46">
        <dc:Bounds height="48.0" width="198.0" x="425.0" y="122.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_8" bpmnElement="_47">
        <dc:Bounds height="48.0" width="236.0" x="1328.0" y="914.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_9" bpmnElement="_44">
        <dc:Bounds height="48.0" width="270.0" x="954.0" y="1290.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_8" bpmnElement="_45" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="1065.0" y="1376.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_10" bpmnElement="_51">
        <dc:Bounds height="51.0" width="361.0" x="1198.0" y="1217.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_11" bpmnElement="_49">
        <dc:Bounds height="48.0" width="156.0" x="1926.0" y="339.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_9" bpmnElement="_55" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="1670.0" y="1184.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_10" bpmnElement="_54" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="1362.0" y="1303.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_12" bpmnElement="_58">
        <dc:Bounds height="48.0" width="173.0" x="1950.0" y="1542.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_13" bpmnElement="_57">
        <dc:Bounds height="48.0" width="178.0" x="988.0" y="1832.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_14" bpmnElement="_56">
        <dc:Bounds height="48.0" width="187.0" x="1293.0" y="1522.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_5" bpmnElement="_63" isExpanded="true">
        <dc:Bounds height="48.0" width="212.0" x="1915.0" y="666.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_6" bpmnElement="_62" isExpanded="true">
        <dc:Bounds height="48.0" width="194.0" x="1912.0" y="504.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_9" bpmnElement="_61">
        <dc:Bounds height="48.0" width="203.0" x="1908.0" y="418.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_10" bpmnElement="_68">
        <dc:Bounds height="48.0" width="145.0" x="1959.0" y="1263.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_11" bpmnElement="_69" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="2006.0" y="1381.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_12" bpmnElement="_70" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="1062.0" y="1461.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_13" bpmnElement="_71" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="2010.0" y="1453.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_11" bpmnElement="_64">
        <dc:Bounds height="48.0" width="100.0" x="1964.0" y="588.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_15" bpmnElement="_65">
        <dc:Bounds height="48.0" width="198.0" x="1926.0" y="746.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_16" bpmnElement="_67">
        <dc:Bounds height="48.0" width="230.0" x="1920.0" y="1186.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_12" bpmnElement="_76">
        <dc:Bounds height="48.0" width="100.0" x="2364.0" y="562.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_7" bpmnElement="_77" isExpanded="true">
        <dc:Bounds height="48.0" width="157.0" x="2342.0" y="641.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_13" bpmnElement="_78">
        <dc:Bounds height="48.0" width="177.0" x="2329.0" y="728.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_8" bpmnElement="_79" isExpanded="true">
        <dc:Bounds height="48.0" width="122.0" x="2361.0" y="961.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_14" bpmnElement="_72">
        <dc:Bounds height="48.0" width="154.0" x="2323.0" y="247.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_9" bpmnElement="_73" isExpanded="true">
        <dc:Bounds height="48.0" width="155.0" x="2325.0" y="334.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_10" bpmnElement="_74" isExpanded="true">
        <dc:Bounds height="49.0" width="178.0" x="2320.0" y="485.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_15" bpmnElement="_75">
        <dc:Bounds height="48.0" width="214.0" x="2295.0" y="414.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_14" bpmnElement="_85" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="2413.0" y="1508.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_16" bpmnElement="_84">
        <dc:Bounds height="48.0" width="136.0" x="2366.0" y="1354.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_11" bpmnElement="_87" isExpanded="true">
        <dc:Bounds height="48.0" width="162.0" x="2216.0" y="1703.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_17" bpmnElement="_86">
        <dc:Bounds height="48.0" width="129.0" x="2234.0" y="1610.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_12" bpmnElement="_81" isExpanded="true">
        <dc:Bounds height="48.0" width="179.0" x="2338.0" y="1117.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_18" bpmnElement="_80">
        <dc:Bounds height="48.0" width="137.0" x="2356.0" y="1038.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_13" bpmnElement="_83" isExpanded="true">
        <dc:Bounds height="48.0" width="175.0" x="2345.0" y="1278.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_19" bpmnElement="_82">
        <dc:Bounds height="48.0" width="100.0" x="2381.0" y="1195.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_20" bpmnElement="_93">
        <dc:Bounds height="48.0" width="100.0" x="2124.0" y="2239.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_15" bpmnElement="_92" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="2272.0" y="2132.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_14" bpmnElement="_95" isExpanded="true">
        <dc:Bounds height="48.0" width="188.0" x="2086.0" y="2309.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_21" bpmnElement="_94">
        <dc:Bounds height="48.0" width="100.0" x="2412.0" y="2239.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_15" bpmnElement="_89" isExpanded="true">
        <dc:Bounds height="48.0" width="151.0" x="2220.0" y="1876.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_22" bpmnElement="_88">
        <dc:Bounds height="48.0" width="100.0" x="2253.0" y="1785.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_16" bpmnElement="_91" isExpanded="true">
        <dc:Bounds height="48.0" width="162.0" x="2218.0" y="2048.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_17" bpmnElement="_90">
        <dc:Bounds height="48.0" width="288.0" x="2149.0" y="1959.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_18" bpmnElement="_102">
        <dc:Bounds height="48.0" width="181.0" x="986.0" y="1657.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_17" bpmnElement="_103" isExpanded="true">
        <dc:Bounds height="48.0" width="163.0" x="995.0" y="1745.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_16" bpmnElement="_100" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="2483.0" y="3118.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_23" bpmnElement="_101">
        <dc:Bounds height="48.0" width="100.0" x="1037.0" y="1563.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_19" bpmnElement="_98">
        <dc:Bounds height="48.0" width="223.0" x="2399.0" y="3226.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_20" bpmnElement="_99">
        <dc:Bounds height="48.0" width="178.0" x="2421.0" y="3324.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_18" bpmnElement="_96" isExpanded="true">
        <dc:Bounds height="48.0" width="179.0" x="2384.0" y="2321.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_21" bpmnElement="_97">
        <dc:Bounds height="48.0" width="200.0" x="2079.0" y="2396.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_22" bpmnElement="_110">
        <dc:Bounds height="48.0" width="178.0" x="1327.0" y="2345.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_17" bpmnElement="_111" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="1712.0" y="2401.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_23" bpmnElement="_106">
        <dc:Bounds height="48.0" width="221.0" x="966.0" y="2067.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_24" bpmnElement="_107">
        <dc:Bounds height="48.0" width="260.0" x="1251.0" y="1624.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_25" bpmnElement="_104">
        <dc:Bounds height="48.0" width="180.0" x="987.0" y="1965.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_18" bpmnElement="_119" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="1724.0" y="2843.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_26" bpmnElement="_118">
        <dc:Bounds height="48.0" width="182.0" x="1908.0" y="2108.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_27" bpmnElement="_116">
        <dc:Bounds height="48.0" width="185.0" x="1952.0" y="1640.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_28" bpmnElement="_115">
        <dc:Bounds height="48.0" width="162.0" x="1663.0" y="2768.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_19" bpmnElement="_114" isExpanded="true">
        <dc:Bounds height="48.0" width="186.0" x="1649.0" y="2675.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_29" bpmnElement="_113">
        <dc:Bounds height="48.0" width="166.0" x="1657.0" y="2586.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_24" bpmnElement="_112">
        <dc:Bounds height="48.0" width="121.0" x="1675.0" y="2498.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_30" bpmnElement="_126">
        <dc:Bounds height="48.0" width="178.0" x="2106.0" y="1325.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_25" bpmnElement="_125">
        <dc:Bounds height="48.0" width="212.0" x="1886.0" y="3266.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_19" bpmnElement="_124" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="1731.0" y="3336.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_20" bpmnElement="_123" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="1733.0" y="3210.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_31" bpmnElement="_122">
        <dc:Bounds height="48.0" width="242.0" x="1634.0" y="3132.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_26" bpmnElement="_121">
        <dc:Bounds height="48.0" width="100.0" x="1701.0" y="2942.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_20" bpmnElement="_120" isExpanded="true">
        <dc:Bounds height="48.0" width="205.0" x="1647.0" y="3034.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_32" bpmnElement="_137">
        <dc:Bounds height="48.0" width="193.0" x="2399.0" y="2428.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_33" bpmnElement="_136">
        <dc:Bounds height="48.0" width="258.0" x="2061.0" y="2873.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_34" bpmnElement="_139">
        <dc:Bounds height="48.0" width="227.0" x="2393.0" y="2854.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_27" bpmnElement="_141">
        <dc:Bounds height="48.0" width="137.0" x="2879.0" y="187.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_IntermediateCatchEvent_6" bpmnElement="_140">
        <dc:Bounds height="48.0" width="48.0" x="2924.0" y="49.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_IntermediateCatchEvent_7" bpmnElement="_143">
        <dc:Bounds height="48.0" width="48.0" x="2677.0" y="35.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_EndEvent_5" bpmnElement="_142">
        <dc:Bounds height="48.0" width="48.0" x="2924.0" y="301.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_21" bpmnElement="_129" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="2497.0" y="1728.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_28" bpmnElement="_128">
        <dc:Bounds height="48.0" width="167.0" x="2429.0" y="1612.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_21" bpmnElement="_131" isExpanded="true">
        <dc:Bounds height="48.0" width="165.0" x="2444.0" y="1898.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_29" bpmnElement="_130">
        <dc:Bounds height="48.0" width="100.0" x="2478.0" y="1812.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_30" bpmnElement="_133">
        <dc:Bounds height="48.0" width="149.0" x="2608.0" y="1544.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_EndEvent_6" bpmnElement="_132">
        <dc:Bounds height="48.0" width="48.0" x="2503.0" y="1983.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_35" bpmnElement="_134">
        <dc:Bounds height="48.0" width="219.0" x="2062.0" y="2487.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_31" bpmnElement="_152">
        <dc:Bounds height="48.0" width="193.0" x="2587.0" y="481.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_22" bpmnElement="_153" isExpanded="true">
        <dc:Bounds height="48.0" width="158.0" x="2610.0" y="566.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_32" bpmnElement="_154">
        <dc:Bounds height="48.0" width="100.0" x="2644.0" y="652.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_23" bpmnElement="_155" isExpanded="true">
        <dc:Bounds height="48.0" width="170.0" x="2613.0" y="729.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_33" bpmnElement="_156">
        <dc:Bounds height="48.0" width="154.0" x="2620.0" y="813.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_34" bpmnElement="_157">
        <dc:Bounds height="48.0" width="183.0" x="2869.0" y="703.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_24" bpmnElement="_158" isExpanded="true">
        <dc:Bounds height="48.0" width="163.0" x="2883.0" y="788.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_35" bpmnElement="_159">
        <dc:Bounds height="48.0" width="100.0" x="2911.0" y="872.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_36" bpmnElement="_144">
        <dc:Bounds height="48.0" width="217.0" x="2592.0" y="151.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_37" bpmnElement="_145">
        <dc:Bounds height="48.0" width="100.0" x="2653.0" y="249.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_EndEvent_7" bpmnElement="_146">
        <dc:Bounds height="48.0" width="48.0" x="2684.0" y="354.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_36" bpmnElement="_147">
        <dc:Bounds height="48.0" width="180.0" x="1101.0" y="700.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_22" bpmnElement="_148" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="1085.0" y="773.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_23" bpmnElement="_149" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="2376.0" y="161.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_24" bpmnElement="_150" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="2395.0" y="809.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_25" bpmnElement="_151" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="2395.0" y="892.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_38" bpmnElement="_171">
        <dc:Bounds height="48.0" width="167.0" x="156.0" y="758.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_37" bpmnElement="_170">
        <dc:Bounds height="48.0" width="124.0" x="179.0" y="667.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_25" bpmnElement="_169" isExpanded="true">
        <dc:Bounds height="48.0" width="170.0" x="157.0" y="577.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_39" bpmnElement="_168">
        <dc:Bounds height="48.0" width="159.0" x="164.0" y="488.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_IntermediateCatchEvent_8" bpmnElement="_175">
        <dc:Bounds height="48.0" width="48.0" x="1317.0" y="8.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_EndEvent_8" bpmnElement="_174">
        <dc:Bounds height="48.0" width="48.0" x="213.0" y="1349.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_26" bpmnElement="_173" isExpanded="true">
        <dc:Bounds height="48.0" width="194.0" x="146.0" y="1255.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_40" bpmnElement="_172">
        <dc:Bounds height="48.0" width="100.0" x="189.0" y="838.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_27" bpmnElement="_163" isExpanded="true">
        <dc:Bounds height="48.0" width="174.0" x="2630.0" y="1050.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_41" bpmnElement="_162">
        <dc:Bounds height="48.0" width="174.0" x="2614.0" y="951.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_42" bpmnElement="_161">
        <dc:Bounds height="48.0" width="164.0" x="2894.0" y="1024.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_28" bpmnElement="_160" isExpanded="true">
        <dc:Bounds height="48.0" width="211.0" x="2875.0" y="943.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_IntermediateCatchEvent_9" bpmnElement="_167">
        <dc:Bounds height="48.0" width="48.0" x="221.0" y="400.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_43" bpmnElement="_166">
        <dc:Bounds height="48.0" width="166.0" x="2633.0" y="1312.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_29" bpmnElement="_165" isExpanded="true">
        <dc:Bounds height="48.0" width="156.0" x="2652.0" y="1221.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_44" bpmnElement="_164">
        <dc:Bounds height="48.0" width="100.0" x="2672.0" y="1141.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ParallelGateway_1" bpmnElement="_187">
        <dc:Bounds height="48.0" width="48.0" x="2169.0" y="3008.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_45" bpmnElement="_184">
        <dc:Bounds height="48.0" width="156.0" x="1502.0" y="172.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_46" bpmnElement="_190">
        <dc:Bounds height="48.0" width="243.0" x="742.0" y="666.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_26" bpmnElement="_191" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="961.0" y="546.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_EndEvent_9" bpmnElement="_188">
        <dc:Bounds height="48.0" width="48.0" x="2877.0" y="3179.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_47" bpmnElement="_189">
        <dc:Bounds height="48.0" width="182.0" x="2347.0" y="1435.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_48" bpmnElement="_178">
        <dc:Bounds height="48.0" width="160.0" x="190.0" y="260.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ScriptTask_38" bpmnElement="_179">
        <dc:Bounds height="48.0" width="166.0" x="1317.0" y="773.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_49" bpmnElement="_176">
        <dc:Bounds height="48.0" width="198.0" x="1245.0" y="85.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_EndEvent_10" bpmnElement="_177">
        <dc:Bounds height="48.0" width="48.0" x="1326.0" y="160.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_50" bpmnElement="_182">
        <dc:Bounds height="48.0" width="130.0" x="1514.0" y="384.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_30" bpmnElement="_183" isExpanded="true">
        <dc:Bounds height="48.0" width="159.0" x="1501.0" y="292.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_51" bpmnElement="_180">
        <dc:Bounds height="48.0" width="183.0" x="1490.0" y="588.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_CallActivity_31" bpmnElement="_181" isExpanded="true">
        <dc:Bounds height="48.0" width="171.0" x="1494.0" y="481.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_27" bpmnElement="_192" isMarkerVisible="true">
        <dc:Bounds height="48.0" width="48.0" x="839.0" y="572.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_1" bpmnElement="_1-_3">
        <di:waypoint xsi:type="dc:Point" x="88.0" y="79.0"/>
        <di:waypoint xsi:type="dc:Point" x="88.0" y="115.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_2" bpmnElement="_3-_4">
        <di:waypoint xsi:type="dc:Point" x="88.0" y="163.0"/>
        <di:waypoint xsi:type="dc:Point" x="88.0" y="210.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_3" bpmnElement="_5-_7">
        <di:waypoint xsi:type="dc:Point" x="272.0" y="54.0"/>
        <di:waypoint xsi:type="dc:Point" x="269.0" y="171.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_4" bpmnElement="_46-_12">
        <di:waypoint xsi:type="dc:Point" x="524.0" y="146.0"/>
        <di:waypoint xsi:type="dc:Point" x="527.0" y="233.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_5" bpmnElement="_18-_15">
        <di:waypoint xsi:type="dc:Point" x="533.0" y="686.0"/>
        <di:waypoint xsi:type="dc:Point" x="533.0" y="729.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_6" bpmnElement="_16-_17">
        <di:waypoint xsi:type="dc:Point" x="533.0" y="510.0"/>
        <di:waypoint xsi:type="dc:Point" x="533.0" y="556.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_7" bpmnElement="_21-_16">
        <di:waypoint xsi:type="dc:Point" x="530.0" y="431.0"/>
        <di:waypoint xsi:type="dc:Point" x="533.0" y="462.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_8" bpmnElement="_15-_19">
        <di:waypoint xsi:type="dc:Point" x="533.0" y="777.0"/>
        <di:waypoint xsi:type="dc:Point" x="533.0" y="814.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_9" bpmnElement="_17-_18">
        <di:waypoint xsi:type="dc:Point" x="533.0" y="604.0"/>
        <di:waypoint xsi:type="dc:Point" x="533.0" y="638.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_10" bpmnElement="_22-_21">
        <di:waypoint xsi:type="dc:Point" x="711.0" y="52.0"/>
        <di:waypoint xsi:type="dc:Point" x="715.0" y="397.0"/>
        <di:waypoint xsi:type="dc:Point" x="530.0" y="406.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_11" bpmnElement="_12-_21">
        <di:waypoint xsi:type="dc:Point" x="527.0" y="233.0"/>
        <di:waypoint xsi:type="dc:Point" x="530.0" y="406.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_12" bpmnElement="_19-_20">
        <di:waypoint xsi:type="dc:Point" x="533.0" y="862.0"/>
        <di:waypoint xsi:type="dc:Point" x="536.0" y="907.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_13" bpmnElement="_26-_25">
        <di:waypoint xsi:type="dc:Point" x="844.0" y="219.0"/>
        <di:waypoint xsi:type="dc:Point" x="841.0" y="324.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_14" bpmnElement="_23-_24">
        <di:waypoint xsi:type="dc:Point" x="840.0" y="46.0"/>
        <di:waypoint xsi:type="dc:Point" x="843.0" y="136.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_15" bpmnElement="_25-_27">
        <di:waypoint xsi:type="dc:Point" x="841.0" y="324.0"/>
        <di:waypoint xsi:type="dc:Point" x="846.0" y="411.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_16" bpmnElement="_24-_26">
        <di:waypoint xsi:type="dc:Point" x="843.0" y="136.0"/>
        <di:waypoint xsi:type="dc:Point" x="844.0" y="219.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_17" bpmnElement="_30-_31">
        <di:waypoint xsi:type="dc:Point" x="1102.0" y="190.0"/>
        <di:waypoint xsi:type="dc:Point" x="1097.0" y="274.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_18" bpmnElement="_69-_31">
        <di:waypoint xsi:type="dc:Point" x="2030.0" y="1405.0"/>
        <di:waypoint xsi:type="dc:Point" x="1874.0" y="1360.0"/>
        <di:waypoint xsi:type="dc:Point" x="1858.0" y="269.0"/>
        <di:waypoint xsi:type="dc:Point" x="1097.0" y="274.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_19" bpmnElement="_178-_31">
        <di:waypoint xsi:type="dc:Point" x="270.0" y="284.0"/>
        <di:waypoint xsi:type="dc:Point" x="1097.0" y="274.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_20" bpmnElement="_28-_30">
        <di:waypoint xsi:type="dc:Point" x="1102.0" y="25.0"/>
        <di:waypoint xsi:type="dc:Point" x="1102.0" y="190.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_21" bpmnElement="_36-_34">
        <di:waypoint xsi:type="dc:Point" x="1084.0" y="508.0"/>
        <di:waypoint xsi:type="dc:Point" x="921.0" y="493.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_22" bpmnElement="_190-_35">
        <di:waypoint xsi:type="dc:Point" x="863.0" y="690.0"/>
        <di:waypoint xsi:type="dc:Point" x="1191.0" y="609.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_23" bpmnElement="_192-_35">
        <di:waypoint xsi:type="dc:Point" x="863.0" y="596.0"/>
        <di:waypoint xsi:type="dc:Point" x="1191.0" y="609.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_24" bpmnElement="_31-_32">
        <di:waypoint xsi:type="dc:Point" x="1097.0" y="274.0"/>
        <di:waypoint xsi:type="dc:Point" x="1104.0" y="351.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_25" bpmnElement="_32-_33">
        <di:waypoint xsi:type="dc:Point" x="1104.0" y="351.0"/>
        <di:waypoint xsi:type="dc:Point" x="1108.0" y="432.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_26" bpmnElement="_37-_38">
        <di:waypoint xsi:type="dc:Point" x="1101.0" y="868.0"/>
        <di:waypoint xsi:type="dc:Point" x="1099.0" y="940.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_27" bpmnElement="_124-_39">
        <di:waypoint xsi:type="dc:Point" x="1755.0" y="3360.0"/>
        <di:waypoint xsi:type="dc:Point" x="1756.0" y="3490.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_28" bpmnElement="_33-_36">
        <di:waypoint xsi:type="dc:Point" x="1108.0" y="432.0"/>
        <di:waypoint xsi:type="dc:Point" x="1108.0" y="508.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_29" bpmnElement="_148-_37">
        <di:waypoint xsi:type="dc:Point" x="1109.0" y="797.0"/>
        <di:waypoint xsi:type="dc:Point" x="1101.0" y="868.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_30" bpmnElement="_41-_42">
        <di:waypoint xsi:type="dc:Point" x="1096.0" y="1083.0"/>
        <di:waypoint xsi:type="dc:Point" x="1102.0" y="1160.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_31" bpmnElement="_42-_43">
        <di:waypoint xsi:type="dc:Point" x="1102.0" y="1160.0"/>
        <di:waypoint xsi:type="dc:Point" x="1094.0" y="1235.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_32" bpmnElement="_38-_40">
        <di:waypoint xsi:type="dc:Point" x="1099.0" y="940.0"/>
        <di:waypoint xsi:type="dc:Point" x="1103.0" y="1015.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_33" bpmnElement="_40-_41">
        <di:waypoint xsi:type="dc:Point" x="1103.0" y="1015.0"/>
        <di:waypoint xsi:type="dc:Point" x="1096.0" y="1083.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_34" bpmnElement="_10-_46">
        <di:waypoint xsi:type="dc:Point" x="524.0" y="47.0"/>
        <di:waypoint xsi:type="dc:Point" x="524.0" y="146.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_35" bpmnElement="_38-_47">
        <di:waypoint xsi:type="dc:Point" x="1099.0" y="940.0"/>
        <di:waypoint xsi:type="dc:Point" x="1240.0" y="939.0"/>
        <di:waypoint xsi:type="dc:Point" x="1446.0" y="938.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_36" bpmnElement="_43-_44">
        <di:waypoint xsi:type="dc:Point" x="1094.0" y="1235.0"/>
        <di:waypoint xsi:type="dc:Point" x="1089.0" y="1314.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_37" bpmnElement="_44-_45">
        <di:waypoint xsi:type="dc:Point" x="1089.0" y="1314.0"/>
        <di:waypoint xsi:type="dc:Point" x="1089.0" y="1400.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_38" bpmnElement="_43-_51">
        <di:waypoint xsi:type="dc:Point" x="1094.0" y="1235.0"/>
        <di:waypoint xsi:type="dc:Point" x="1378.0" y="1242.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_39" bpmnElement="_55-_49">
        <di:waypoint xsi:type="dc:Point" x="1694.0" y="1208.0"/>
        <di:waypoint xsi:type="dc:Point" x="1807.0" y="1205.0"/>
        <di:waypoint xsi:type="dc:Point" x="1776.0" y="366.0"/>
        <di:waypoint xsi:type="dc:Point" x="2004.0" y="363.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_40" bpmnElement="_41-_55">
        <di:waypoint xsi:type="dc:Point" x="1096.0" y="1083.0"/>
        <di:waypoint xsi:type="dc:Point" x="1694.0" y="1070.0"/>
        <di:waypoint xsi:type="dc:Point" x="1694.0" y="1208.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_41" bpmnElement="_45-_55">
        <di:waypoint xsi:type="dc:Point" x="1089.0" y="1400.0"/>
        <di:waypoint xsi:type="dc:Point" x="1697.0" y="1389.0"/>
        <di:waypoint xsi:type="dc:Point" x="1694.0" y="1208.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_42" bpmnElement="_54-_55">
        <di:waypoint xsi:type="dc:Point" x="1386.0" y="1327.0"/>
        <di:waypoint xsi:type="dc:Point" x="1585.0" y="1319.0"/>
        <di:waypoint xsi:type="dc:Point" x="1694.0" y="1208.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_43" bpmnElement="_51-_54">
        <di:waypoint xsi:type="dc:Point" x="1378.0" y="1242.0"/>
        <di:waypoint xsi:type="dc:Point" x="1386.0" y="1327.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_44" bpmnElement="_71-_58">
        <di:waypoint xsi:type="dc:Point" x="2034.0" y="1477.0"/>
        <di:waypoint xsi:type="dc:Point" x="2036.0" y="1566.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_45" bpmnElement="_103-_57">
        <di:waypoint xsi:type="dc:Point" x="1076.0" y="1793.0"/>
        <di:waypoint xsi:type="dc:Point" x="1077.0" y="1832.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_46" bpmnElement="_54-_56">
        <di:waypoint xsi:type="dc:Point" x="1386.0" y="1327.0"/>
        <di:waypoint xsi:type="dc:Point" x="1386.0" y="1546.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_47" bpmnElement="_64-_63">
        <di:waypoint xsi:type="dc:Point" x="2014.0" y="612.0"/>
        <di:waypoint xsi:type="dc:Point" x="2021.0" y="690.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_48" bpmnElement="_61-_62">
        <di:waypoint xsi:type="dc:Point" x="2009.0" y="442.0"/>
        <di:waypoint xsi:type="dc:Point" x="2009.0" y="528.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_49" bpmnElement="_49-_61">
        <di:waypoint xsi:type="dc:Point" x="2004.0" y="363.0"/>
        <di:waypoint xsi:type="dc:Point" x="2009.0" y="442.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_50" bpmnElement="_67-_68">
        <di:waypoint xsi:type="dc:Point" x="2035.0" y="1210.0"/>
        <di:waypoint xsi:type="dc:Point" x="2031.0" y="1287.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_51" bpmnElement="_126-_69">
        <di:waypoint xsi:type="dc:Point" x="2195.0" y="1349.0"/>
        <di:waypoint xsi:type="dc:Point" x="2030.0" y="1405.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_52" bpmnElement="_45-_70">
        <di:waypoint xsi:type="dc:Point" x="1089.0" y="1400.0"/>
        <di:waypoint xsi:type="dc:Point" x="1086.0" y="1485.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_53" bpmnElement="_69-_70">
        <di:waypoint xsi:type="dc:Point" x="2030.0" y="1405.0"/>
        <di:waypoint xsi:type="dc:Point" x="1086.0" y="1485.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_54" bpmnElement="_54-_71">
        <di:waypoint xsi:type="dc:Point" x="1386.0" y="1327.0"/>
        <di:waypoint xsi:type="dc:Point" x="1579.0" y="1477.0"/>
        <di:waypoint xsi:type="dc:Point" x="2034.0" y="1477.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_55" bpmnElement="_69-_71">
        <di:waypoint xsi:type="dc:Point" x="2030.0" y="1405.0"/>
        <di:waypoint xsi:type="dc:Point" x="2034.0" y="1477.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_56" bpmnElement="_62-_64">
        <di:waypoint xsi:type="dc:Point" x="2009.0" y="528.0"/>
        <di:waypoint xsi:type="dc:Point" x="2014.0" y="612.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_57" bpmnElement="_63-_65">
        <di:waypoint xsi:type="dc:Point" x="2021.0" y="690.0"/>
        <di:waypoint xsi:type="dc:Point" x="2025.0" y="770.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_58" bpmnElement="_65-_67">
        <di:waypoint xsi:type="dc:Point" x="2025.0" y="770.0"/>
        <di:waypoint xsi:type="dc:Point" x="2035.0" y="1210.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_59" bpmnElement="_74-_76">
        <di:waypoint xsi:type="dc:Point" x="2409.0" y="509.0"/>
        <di:waypoint xsi:type="dc:Point" x="2414.0" y="586.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_60" bpmnElement="_76-_77">
        <di:waypoint xsi:type="dc:Point" x="2414.0" y="586.0"/>
        <di:waypoint xsi:type="dc:Point" x="2420.0" y="665.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_61" bpmnElement="_77-_78">
        <di:waypoint xsi:type="dc:Point" x="2420.0" y="665.0"/>
        <di:waypoint xsi:type="dc:Point" x="2417.0" y="752.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_62" bpmnElement="_151-_79">
        <di:waypoint xsi:type="dc:Point" x="2419.0" y="916.0"/>
        <di:waypoint xsi:type="dc:Point" x="2422.0" y="985.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_63" bpmnElement="_149-_72">
        <di:waypoint xsi:type="dc:Point" x="2400.0" y="185.0"/>
        <di:waypoint xsi:type="dc:Point" x="2400.0" y="271.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_64" bpmnElement="_72-_73">
        <di:waypoint xsi:type="dc:Point" x="2400.0" y="271.0"/>
        <di:waypoint xsi:type="dc:Point" x="2402.0" y="358.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_65" bpmnElement="_75-_74">
        <di:waypoint xsi:type="dc:Point" x="2402.0" y="438.0"/>
        <di:waypoint xsi:type="dc:Point" x="2409.0" y="509.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_66" bpmnElement="_73-_75">
        <di:waypoint xsi:type="dc:Point" x="2402.0" y="358.0"/>
        <di:waypoint xsi:type="dc:Point" x="2402.0" y="438.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_67" bpmnElement="_189-_85">
        <di:waypoint xsi:type="dc:Point" x="2438.0" y="1459.0"/>
        <di:waypoint xsi:type="dc:Point" x="2437.0" y="1532.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_68" bpmnElement="_83-_84">
        <di:waypoint xsi:type="dc:Point" x="2432.0" y="1302.0"/>
        <di:waypoint xsi:type="dc:Point" x="2434.0" y="1378.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_69" bpmnElement="_86-_87">
        <di:waypoint xsi:type="dc:Point" x="2298.0" y="1634.0"/>
        <di:waypoint xsi:type="dc:Point" x="2297.0" y="1727.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_70" bpmnElement="_85-_86">
        <di:waypoint xsi:type="dc:Point" x="2437.0" y="1532.0"/>
        <di:waypoint xsi:type="dc:Point" x="2298.0" y="1634.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_71" bpmnElement="_80-_81">
        <di:waypoint xsi:type="dc:Point" x="2424.0" y="1062.0"/>
        <di:waypoint xsi:type="dc:Point" x="2427.0" y="1141.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_72" bpmnElement="_79-_80">
        <di:waypoint xsi:type="dc:Point" x="2422.0" y="985.0"/>
        <di:waypoint xsi:type="dc:Point" x="2424.0" y="1062.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_73" bpmnElement="_82-_83">
        <di:waypoint xsi:type="dc:Point" x="2431.0" y="1219.0"/>
        <di:waypoint xsi:type="dc:Point" x="2432.0" y="1302.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_74" bpmnElement="_81-_82">
        <di:waypoint xsi:type="dc:Point" x="2427.0" y="1141.0"/>
        <di:waypoint xsi:type="dc:Point" x="2431.0" y="1219.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_75" bpmnElement="_92-_93">
        <di:waypoint xsi:type="dc:Point" x="2296.0" y="2156.0"/>
        <di:waypoint xsi:type="dc:Point" x="2174.0" y="2263.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_76" bpmnElement="_91-_92">
        <di:waypoint xsi:type="dc:Point" x="2299.0" y="2072.0"/>
        <di:waypoint xsi:type="dc:Point" x="2296.0" y="2156.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_77" bpmnElement="_93-_95">
        <di:waypoint xsi:type="dc:Point" x="2174.0" y="2263.0"/>
        <di:waypoint xsi:type="dc:Point" x="2180.0" y="2333.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_78" bpmnElement="_92-_94">
        <di:waypoint xsi:type="dc:Point" x="2296.0" y="2156.0"/>
        <di:waypoint xsi:type="dc:Point" x="2462.0" y="2263.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_79" bpmnElement="_88-_89">
        <di:waypoint xsi:type="dc:Point" x="2303.0" y="1809.0"/>
        <di:waypoint xsi:type="dc:Point" x="2295.0" y="1900.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_80" bpmnElement="_87-_88">
        <di:waypoint xsi:type="dc:Point" x="2297.0" y="1727.0"/>
        <di:waypoint xsi:type="dc:Point" x="2303.0" y="1809.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_81" bpmnElement="_90-_91">
        <di:waypoint xsi:type="dc:Point" x="2293.0" y="1983.0"/>
        <di:waypoint xsi:type="dc:Point" x="2299.0" y="2072.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_82" bpmnElement="_89-_90">
        <di:waypoint xsi:type="dc:Point" x="2295.0" y="1900.0"/>
        <di:waypoint xsi:type="dc:Point" x="2293.0" y="1983.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_83" bpmnElement="_101-_102">
        <di:waypoint xsi:type="dc:Point" x="1087.0" y="1611.0"/>
        <di:waypoint xsi:type="dc:Point" x="1076.0" y="1657.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_84" bpmnElement="_102-_103">
        <di:waypoint xsi:type="dc:Point" x="1076.0" y="1705.0"/>
        <di:waypoint xsi:type="dc:Point" x="1076.0" y="1745.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_85" bpmnElement="_139-_100">
        <di:waypoint xsi:type="dc:Point" x="2506.0" y="2878.0"/>
        <di:waypoint xsi:type="dc:Point" x="2507.0" y="3142.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_86" bpmnElement="_187-_100">
        <di:waypoint xsi:type="dc:Point" x="2193.0" y="3032.0"/>
        <di:waypoint xsi:type="dc:Point" x="2507.0" y="3142.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_87" bpmnElement="_70-_101">
        <di:waypoint xsi:type="dc:Point" x="1086.0" y="1485.0"/>
        <di:waypoint xsi:type="dc:Point" x="1087.0" y="1587.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_88" bpmnElement="_100-_98">
        <di:waypoint xsi:type="dc:Point" x="2507.0" y="3142.0"/>
        <di:waypoint xsi:type="dc:Point" x="2510.0" y="3250.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_89" bpmnElement="_98-_99">
        <di:waypoint xsi:type="dc:Point" x="2510.0" y="3250.0"/>
        <di:waypoint xsi:type="dc:Point" x="2510.0" y="3348.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_90" bpmnElement="_94-_96">
        <di:waypoint xsi:type="dc:Point" x="2462.0" y="2263.0"/>
        <di:waypoint xsi:type="dc:Point" x="2473.0" y="2345.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_91" bpmnElement="_95-_97">
        <di:waypoint xsi:type="dc:Point" x="2180.0" y="2333.0"/>
        <di:waypoint xsi:type="dc:Point" x="2179.0" y="2420.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_92" bpmnElement="_107-_110">
        <di:waypoint xsi:type="dc:Point" x="1381.0" y="1648.0"/>
        <di:waypoint xsi:type="dc:Point" x="1416.0" y="2369.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_93" bpmnElement="_110-_111">
        <di:waypoint xsi:type="dc:Point" x="1416.0" y="2369.0"/>
        <di:waypoint xsi:type="dc:Point" x="1419.0" y="2432.0"/>
        <di:waypoint xsi:type="dc:Point" x="1736.0" y="2425.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_94" bpmnElement="_118-_111">
        <di:waypoint xsi:type="dc:Point" x="1999.0" y="2132.0"/>
        <di:waypoint xsi:type="dc:Point" x="2008.0" y="2427.0"/>
        <di:waypoint xsi:type="dc:Point" x="1736.0" y="2425.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_95" bpmnElement="_104-_106">
        <di:waypoint xsi:type="dc:Point" x="1077.0" y="2013.0"/>
        <di:waypoint xsi:type="dc:Point" x="1076.0" y="2067.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_96" bpmnElement="_56-_107">
        <di:waypoint xsi:type="dc:Point" x="1386.0" y="1546.0"/>
        <di:waypoint xsi:type="dc:Point" x="1381.0" y="1648.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_97" bpmnElement="_57-_104">
        <di:waypoint xsi:type="dc:Point" x="1077.0" y="1880.0"/>
        <di:waypoint xsi:type="dc:Point" x="1077.0" y="1965.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_98" bpmnElement="_106-_119">
        <di:waypoint xsi:type="dc:Point" x="1076.0" y="2115.0"/>
        <di:waypoint xsi:type="dc:Point" x="1073.0" y="2865.0"/>
        <di:waypoint xsi:type="dc:Point" x="1724.0" y="2867.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_99" bpmnElement="_115-_119">
        <di:waypoint xsi:type="dc:Point" x="1744.0" y="2792.0"/>
        <di:waypoint xsi:type="dc:Point" x="1748.0" y="2867.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_100" bpmnElement="_99-_119">
        <di:waypoint xsi:type="dc:Point" x="2510.0" y="3348.0"/>
        <di:waypoint xsi:type="dc:Point" x="2275.0" y="3284.0"/>
        <di:waypoint xsi:type="dc:Point" x="1748.0" y="2867.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_101" bpmnElement="_116-_118">
        <di:waypoint xsi:type="dc:Point" x="2044.0" y="1664.0"/>
        <di:waypoint xsi:type="dc:Point" x="1999.0" y="2132.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_102" bpmnElement="_58-_116">
        <di:waypoint xsi:type="dc:Point" x="2036.0" y="1566.0"/>
        <di:waypoint xsi:type="dc:Point" x="2044.0" y="1664.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_103" bpmnElement="_114-_115">
        <di:waypoint xsi:type="dc:Point" x="1742.0" y="2699.0"/>
        <di:waypoint xsi:type="dc:Point" x="1744.0" y="2792.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_104" bpmnElement="_113-_114">
        <di:waypoint xsi:type="dc:Point" x="1740.0" y="2610.0"/>
        <di:waypoint xsi:type="dc:Point" x="1742.0" y="2699.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_105" bpmnElement="_112-_113">
        <di:waypoint xsi:type="dc:Point" x="1735.0" y="2522.0"/>
        <di:waypoint xsi:type="dc:Point" x="1740.0" y="2610.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_106" bpmnElement="_111-_112">
        <di:waypoint xsi:type="dc:Point" x="1736.0" y="2425.0"/>
        <di:waypoint xsi:type="dc:Point" x="1735.0" y="2522.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_107" bpmnElement="_68-_126">
        <di:waypoint xsi:type="dc:Point" x="2031.0" y="1287.0"/>
        <di:waypoint xsi:type="dc:Point" x="2195.0" y="1349.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_108" bpmnElement="_123-_125">
        <di:waypoint xsi:type="dc:Point" x="1757.0" y="3234.0"/>
        <di:waypoint xsi:type="dc:Point" x="1995.0" y="3231.0"/>
        <di:waypoint xsi:type="dc:Point" x="1992.0" y="3290.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_109" bpmnElement="_123-_124">
        <di:waypoint xsi:type="dc:Point" x="1757.0" y="3234.0"/>
        <di:waypoint xsi:type="dc:Point" x="1755.0" y="3360.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_110" bpmnElement="_125-_124">
        <di:waypoint xsi:type="dc:Point" x="1992.0" y="3290.0"/>
        <di:waypoint xsi:type="dc:Point" x="1996.0" y="3358.0"/>
        <di:waypoint xsi:type="dc:Point" x="1755.0" y="3360.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_111" bpmnElement="_122-_123">
        <di:waypoint xsi:type="dc:Point" x="1755.0" y="3156.0"/>
        <di:waypoint xsi:type="dc:Point" x="1757.0" y="3234.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_112" bpmnElement="_120-_122">
        <di:waypoint xsi:type="dc:Point" x="1749.0" y="3058.0"/>
        <di:waypoint xsi:type="dc:Point" x="1755.0" y="3156.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_113" bpmnElement="_119-_121">
        <di:waypoint xsi:type="dc:Point" x="1748.0" y="2867.0"/>
        <di:waypoint xsi:type="dc:Point" x="1751.0" y="2966.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_114" bpmnElement="_121-_120">
        <di:waypoint xsi:type="dc:Point" x="1751.0" y="2966.0"/>
        <di:waypoint xsi:type="dc:Point" x="1749.0" y="3058.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_115" bpmnElement="_96-_137">
        <di:waypoint xsi:type="dc:Point" x="2473.0" y="2345.0"/>
        <di:waypoint xsi:type="dc:Point" x="2495.0" y="2452.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_116" bpmnElement="_134-_136">
        <di:waypoint xsi:type="dc:Point" x="2171.0" y="2511.0"/>
        <di:waypoint xsi:type="dc:Point" x="2190.0" y="2897.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_117" bpmnElement="_137-_139">
        <di:waypoint xsi:type="dc:Point" x="2495.0" y="2452.0"/>
        <di:waypoint xsi:type="dc:Point" x="2506.0" y="2878.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_118" bpmnElement="_140-_141">
        <di:waypoint xsi:type="dc:Point" x="2948.0" y="73.0"/>
        <di:waypoint xsi:type="dc:Point" x="2947.0" y="211.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_119" bpmnElement="_141-_142">
        <di:waypoint xsi:type="dc:Point" x="2947.0" y="211.0"/>
        <di:waypoint xsi:type="dc:Point" x="2948.0" y="325.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_120" bpmnElement="_128-_129">
        <di:waypoint xsi:type="dc:Point" x="2512.0" y="1636.0"/>
        <di:waypoint xsi:type="dc:Point" x="2521.0" y="1752.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_121" bpmnElement="_133-_129">
        <di:waypoint xsi:type="dc:Point" x="2682.0" y="1568.0"/>
        <di:waypoint xsi:type="dc:Point" x="2688.0" y="1751.0"/>
        <di:waypoint xsi:type="dc:Point" x="2521.0" y="1752.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_122" bpmnElement="_85-_128">
        <di:waypoint xsi:type="dc:Point" x="2437.0" y="1532.0"/>
        <di:waypoint xsi:type="dc:Point" x="2512.0" y="1636.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_123" bpmnElement="_130-_131">
        <di:waypoint xsi:type="dc:Point" x="2528.0" y="1836.0"/>
        <di:waypoint xsi:type="dc:Point" x="2526.0" y="1922.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_124" bpmnElement="_129-_130">
        <di:waypoint xsi:type="dc:Point" x="2521.0" y="1752.0"/>
        <di:waypoint xsi:type="dc:Point" x="2528.0" y="1836.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_125" bpmnElement="_85-_133">
        <di:waypoint xsi:type="dc:Point" x="2437.0" y="1532.0"/>
        <di:waypoint xsi:type="dc:Point" x="2682.0" y="1568.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_126" bpmnElement="_131-_132">
        <di:waypoint xsi:type="dc:Point" x="2526.0" y="1922.0"/>
        <di:waypoint xsi:type="dc:Point" x="2527.0" y="2007.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_127" bpmnElement="_97-_134">
        <di:waypoint xsi:type="dc:Point" x="2179.0" y="2420.0"/>
        <di:waypoint xsi:type="dc:Point" x="2171.0" y="2511.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_128" bpmnElement="_150-_152">
        <di:waypoint xsi:type="dc:Point" x="2419.0" y="833.0"/>
        <di:waypoint xsi:type="dc:Point" x="2561.0" y="830.0"/>
        <di:waypoint xsi:type="dc:Point" x="2553.0" y="508.0"/>
        <di:waypoint xsi:type="dc:Point" x="2683.0" y="505.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_129" bpmnElement="_152-_153">
        <di:waypoint xsi:type="dc:Point" x="2683.0" y="505.0"/>
        <di:waypoint xsi:type="dc:Point" x="2689.0" y="590.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_130" bpmnElement="_153-_154">
        <di:waypoint xsi:type="dc:Point" x="2689.0" y="590.0"/>
        <di:waypoint xsi:type="dc:Point" x="2694.0" y="676.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_131" bpmnElement="_154-_155">
        <di:waypoint xsi:type="dc:Point" x="2694.0" y="676.0"/>
        <di:waypoint xsi:type="dc:Point" x="2698.0" y="753.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_132" bpmnElement="_155-_156">
        <di:waypoint xsi:type="dc:Point" x="2698.0" y="753.0"/>
        <di:waypoint xsi:type="dc:Point" x="2697.0" y="837.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_133" bpmnElement="_156-_157">
        <di:waypoint xsi:type="dc:Point" x="2697.0" y="837.0"/>
        <di:waypoint xsi:type="dc:Point" x="2819.0" y="827.0"/>
        <di:waypoint xsi:type="dc:Point" x="2817.0" y="728.0"/>
        <di:waypoint xsi:type="dc:Point" x="2960.0" y="727.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_134" bpmnElement="_157-_158">
        <di:waypoint xsi:type="dc:Point" x="2960.0" y="727.0"/>
        <di:waypoint xsi:type="dc:Point" x="2964.0" y="812.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_135" bpmnElement="_158-_159">
        <di:waypoint xsi:type="dc:Point" x="2964.0" y="812.0"/>
        <di:waypoint xsi:type="dc:Point" x="2961.0" y="896.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_136" bpmnElement="_143-_144">
        <di:waypoint xsi:type="dc:Point" x="2701.0" y="59.0"/>
        <di:waypoint xsi:type="dc:Point" x="2700.0" y="175.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_137" bpmnElement="_144-_145">
        <di:waypoint xsi:type="dc:Point" x="2700.0" y="175.0"/>
        <di:waypoint xsi:type="dc:Point" x="2703.0" y="273.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_138" bpmnElement="_145-_146">
        <di:waypoint xsi:type="dc:Point" x="2703.0" y="273.0"/>
        <di:waypoint xsi:type="dc:Point" x="2708.0" y="378.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_139" bpmnElement="_35-_147">
        <di:waypoint xsi:type="dc:Point" x="1191.0" y="609.0"/>
        <di:waypoint xsi:type="dc:Point" x="1191.0" y="724.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_140" bpmnElement="_147-_148">
        <di:waypoint xsi:type="dc:Point" x="1191.0" y="724.0"/>
        <di:waypoint xsi:type="dc:Point" x="1109.0" y="797.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_141" bpmnElement="_47-_149">
        <di:waypoint xsi:type="dc:Point" x="1446.0" y="938.0"/>
        <di:waypoint xsi:type="dc:Point" x="1725.0" y="933.0"/>
        <di:waypoint xsi:type="dc:Point" x="1719.0" y="32.0"/>
        <di:waypoint xsi:type="dc:Point" x="2396.0" y="27.0"/>
        <di:waypoint xsi:type="dc:Point" x="2400.0" y="185.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_142" bpmnElement="_184-_149">
        <di:waypoint xsi:type="dc:Point" x="1580.0" y="196.0"/>
        <di:waypoint xsi:type="dc:Point" x="2400.0" y="185.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_143" bpmnElement="_78-_150">
        <di:waypoint xsi:type="dc:Point" x="2417.0" y="752.0"/>
        <di:waypoint xsi:type="dc:Point" x="2419.0" y="833.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_144" bpmnElement="_150-_151">
        <di:waypoint xsi:type="dc:Point" x="2419.0" y="833.0"/>
        <di:waypoint xsi:type="dc:Point" x="2419.0" y="916.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_145" bpmnElement="_166-_151">
        <di:waypoint xsi:type="dc:Point" x="2716.0" y="1336.0"/>
        <di:waypoint xsi:type="dc:Point" x="2552.0" y="1336.0"/>
        <di:waypoint xsi:type="dc:Point" x="2539.0" y="915.0"/>
        <di:waypoint xsi:type="dc:Point" x="2419.0" y="916.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_146" bpmnElement="_170-_171">
        <di:waypoint xsi:type="dc:Point" x="241.0" y="691.0"/>
        <di:waypoint xsi:type="dc:Point" x="239.0" y="782.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_147" bpmnElement="_169-_170">
        <di:waypoint xsi:type="dc:Point" x="242.0" y="601.0"/>
        <di:waypoint xsi:type="dc:Point" x="241.0" y="691.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_148" bpmnElement="_168-_169">
        <di:waypoint xsi:type="dc:Point" x="243.0" y="512.0"/>
        <di:waypoint xsi:type="dc:Point" x="242.0" y="601.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_149" bpmnElement="_167-_168">
        <di:waypoint xsi:type="dc:Point" x="245.0" y="424.0"/>
        <di:waypoint xsi:type="dc:Point" x="243.0" y="512.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_150" bpmnElement="_173-_174">
        <di:waypoint xsi:type="dc:Point" x="243.0" y="1279.0"/>
        <di:waypoint xsi:type="dc:Point" x="237.0" y="1373.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_151" bpmnElement="_172-_173">
        <di:waypoint xsi:type="dc:Point" x="239.0" y="862.0"/>
        <di:waypoint xsi:type="dc:Point" x="243.0" y="1279.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_152" bpmnElement="_171-_172">
        <di:waypoint xsi:type="dc:Point" x="239.0" y="782.0"/>
        <di:waypoint xsi:type="dc:Point" x="239.0" y="862.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_153" bpmnElement="_162-_163">
        <di:waypoint xsi:type="dc:Point" x="2701.0" y="975.0"/>
        <di:waypoint xsi:type="dc:Point" x="2717.0" y="1074.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_154" bpmnElement="_161-_162">
        <di:waypoint xsi:type="dc:Point" x="2976.0" y="1048.0"/>
        <di:waypoint xsi:type="dc:Point" x="2826.0" y="1052.0"/>
        <di:waypoint xsi:type="dc:Point" x="2829.0" y="974.0"/>
        <di:waypoint xsi:type="dc:Point" x="2701.0" y="975.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_155" bpmnElement="_160-_161">
        <di:waypoint xsi:type="dc:Point" x="2980.0" y="967.0"/>
        <di:waypoint xsi:type="dc:Point" x="2976.0" y="1048.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_156" bpmnElement="_159-_160">
        <di:waypoint xsi:type="dc:Point" x="2961.0" y="896.0"/>
        <di:waypoint xsi:type="dc:Point" x="2980.0" y="967.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_157" bpmnElement="_165-_166">
        <di:waypoint xsi:type="dc:Point" x="2730.0" y="1245.0"/>
        <di:waypoint xsi:type="dc:Point" x="2716.0" y="1336.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_158" bpmnElement="_164-_165">
        <di:waypoint xsi:type="dc:Point" x="2722.0" y="1165.0"/>
        <di:waypoint xsi:type="dc:Point" x="2730.0" y="1245.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_159" bpmnElement="_163-_164">
        <di:waypoint xsi:type="dc:Point" x="2717.0" y="1074.0"/>
        <di:waypoint xsi:type="dc:Point" x="2722.0" y="1165.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_160" bpmnElement="_136-_187">
        <di:waypoint xsi:type="dc:Point" x="2190.0" y="2897.0"/>
        <di:waypoint xsi:type="dc:Point" x="2193.0" y="3032.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_161" bpmnElement="_183-_184">
        <di:waypoint xsi:type="dc:Point" x="1580.0" y="316.0"/>
        <di:waypoint xsi:type="dc:Point" x="1580.0" y="196.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_162" bpmnElement="_192-_190">
        <di:waypoint xsi:type="dc:Point" x="863.0" y="596.0"/>
        <di:waypoint xsi:type="dc:Point" x="863.0" y="690.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_163" bpmnElement="_34-_191">
        <di:waypoint xsi:type="dc:Point" x="921.0" y="493.0"/>
        <di:waypoint xsi:type="dc:Point" x="961.0" y="570.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_164" bpmnElement="_36-_191">
        <di:waypoint xsi:type="dc:Point" x="1108.0" y="508.0"/>
        <di:waypoint xsi:type="dc:Point" x="985.0" y="570.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_165" bpmnElement="_187-_188">
        <di:waypoint xsi:type="dc:Point" x="2193.0" y="3032.0"/>
        <di:waypoint xsi:type="dc:Point" x="2901.0" y="3203.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_166" bpmnElement="_84-_189">
        <di:waypoint xsi:type="dc:Point" x="2434.0" y="1378.0"/>
        <di:waypoint xsi:type="dc:Point" x="2438.0" y="1459.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_167" bpmnElement="_7-_178">
        <di:waypoint xsi:type="dc:Point" x="269.0" y="171.0"/>
        <di:waypoint xsi:type="dc:Point" x="270.0" y="284.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_168" bpmnElement="_148-_179">
        <di:waypoint xsi:type="dc:Point" x="1109.0" y="797.0"/>
        <di:waypoint xsi:type="dc:Point" x="1194.0" y="797.0"/>
        <di:waypoint xsi:type="dc:Point" x="1400.0" y="797.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_169" bpmnElement="_175-_176">
        <di:waypoint xsi:type="dc:Point" x="1341.0" y="32.0"/>
        <di:waypoint xsi:type="dc:Point" x="1344.0" y="109.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_170" bpmnElement="_176-_177">
        <di:waypoint xsi:type="dc:Point" x="1344.0" y="109.0"/>
        <di:waypoint xsi:type="dc:Point" x="1350.0" y="184.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_171" bpmnElement="_181-_182">
        <di:waypoint xsi:type="dc:Point" x="1579.0" y="505.0"/>
        <di:waypoint xsi:type="dc:Point" x="1579.0" y="408.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_172" bpmnElement="_182-_183">
        <di:waypoint xsi:type="dc:Point" x="1579.0" y="408.0"/>
        <di:waypoint xsi:type="dc:Point" x="1580.0" y="316.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_173" bpmnElement="_179-_180">
        <di:waypoint xsi:type="dc:Point" x="1400.0" y="797.0"/>
        <di:waypoint xsi:type="dc:Point" x="1582.0" y="791.0"/>
        <di:waypoint xsi:type="dc:Point" x="1581.0" y="612.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_174" bpmnElement="_180-_181">
        <di:waypoint xsi:type="dc:Point" x="1581.0" y="612.0"/>
        <di:waypoint xsi:type="dc:Point" x="1579.0" y="505.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_175" bpmnElement="_191-_192">
        <di:waypoint xsi:type="dc:Point" x="985.0" y="570.0"/>
        <di:waypoint xsi:type="dc:Point" x="863.0" y="596.0"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn2:definitions>